!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},a=n.parcelRequire3607;null==a&&(a=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a},a.register=function(t,e){i[t]=e},n.parcelRequire3607=a),a.register("iE7OH",(function(e,n){var r,i;t(e.exports,"register",(function(){return r}),(function(t){return r=t})),t(e.exports,"resolve",(function(){return i}),(function(t){return i=t}));var a={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)a[e[n]]=t[e[n]]},i=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),a.register("aNJCr",(function(e,n){var r;t(e.exports,"getBundleURL",(function(){return r}),(function(t){return r=t}));var i={};function a(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return a(t[2])}return"/"}(),i[t]=e),e}})),a.register("c2tl2",(function(t,e){var n=a("ao67S"),r=a("dnqwG"),i=a("5uoV6"),o=a("3Jt3i");t.exports=function(t,e){return n(t)||r(t,e)||i(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("ao67S",(function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("dnqwG",(function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("5uoV6",(function(t,e){var n=a("8SL2m");t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("8SL2m",(function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("3Jt3i",(function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("clMMr",(function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("drNVG",(function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports})),a("iE7OH").register(JSON.parse('{"7EiNB":"index.0aae1cd6.js","9VljA":"title.6a70130b.svg"}'));var o={};function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function p(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,h(t,e,"get"))}function v(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(t,e,n){v(t,e),e.set(t,n)}function d(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,h(t,e,"set"),n),n}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function _(t,e){v(t,e),e.add(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){return g(t,e)}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function w(t,e,n){return(w=b()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function k(t,e,n){return w.apply(null,arguments)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t){return E(t)}function T(t,e){return!e||"object"!=((n=e)&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?s(t):e;var n}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=M(t);if(e){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T(this,n)}}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n||t):i.value}})(t,e,n)}function V(t,e,n){return S(t,e,n)}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){A(t,e,n[e])}))}return t}function R(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}function F(t,e){return function(t){if(Array.isArray(t))return t}(t)||L(t)||N(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t){return function(t){if(Array.isArray(t))return I(t)}(t)||L(t)||N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
/*! Tweakpane 3.0.8 (c) 2016 cocopon, licensed under the MIT license. */!function(t){"use strict";var e=function(){function t(e){c(this,t);var n=F(e.split("-"),2),r=n[0],i=n[1],a=r.split(".");this.major=parseInt(a[0],10),this.minor=parseInt(a[1],10),this.patch=parseInt(a[2],10),this.prerelease=null!=i?i:null}return C(t,[{key:"toString",value:function(){var t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}]),t}(),n=function(){function t(e){c(this,t),this.controller_=e}return C(t,[{key:"disabled",get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)}},{key:"hidden",get:function(){return this.controller_.viewProps.get("hidden")},set:function(t){this.controller_.viewProps.set("hidden",t)}},{key:"dispose",value:function(){this.controller_.viewProps.set("disposed",!0)}}]),t}(),r=function t(e){c(this,t),this.target=e},i=function(t){O(n,t);var e=P(n);function n(t,r,i,a){var o;return c(this,n),(o=e.call(this,t)).value=r,o.presetKey=i,o.last=null==a||a,o}return n}(r),a=function(t){O(n,t);var e=P(n);function n(t,r,i){var a;return c(this,n),(a=e.call(this,t)).value=r,a.presetKey=i,a}return n}(r),o=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t)).expanded=r,i}return n}(r);function u(t){return t}function l(t){return null==t}function h(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var p={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '".concat(t.name,"'")},nomatchingcontroller:function(t){return"No matching controller for '".concat(t.key,"'")},nomatchingview:function(t){return"No matching view for '".concat(JSON.stringify(t.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(t){return"Property '".concat(t.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},v=function(){function t(e){var n;c(this,t),this.message=null!==(n=p[e.type](u(e.context)))&&void 0!==n?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return C(t,null,[{key:"alreadyDisposed",value:function(){return new t({type:"alreadydisposed"})}},{key:"notBindable",value:function(){return new t({type:"notbindable"})}},{key:"propertyNotFound",value:function(e){return new t({type:"propertynotfound",context:{name:e}})}},{key:"shouldNeverHappen",value:function(){return new t({type:"shouldneverhappen"})}}]),t}(),f=function(){function t(e,n,r){c(this,t),this.obj_=e,this.key_=n,this.presetKey_=null!=r?r:n}return C(t,[{key:"key",get:function(){return this.key_}},{key:"presetKey",get:function(){return this.presetKey_}},{key:"read",value:function(){return this.obj_[this.key_]}},{key:"write",value:function(t){this.obj_[this.key_]=t}},{key:"writeProperty",value:function(e,n){var r=this.read();if(!t.isBindable(r))throw v.notBindable();if(!(e in r))throw v.propertyNotFound(e);r[e]=n}}],[{key:"isBindable",value:function(t){return null!==t&&"object"==typeof t}}]),t}(),d=function(t){O(n,t);var e=P(n);function n(){return c(this,n),e.apply(this,arguments)}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"title",get:function(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller_.valueController.props.set("title",t)}},{key:"on",value:function(t,e){var n=this,i=e.bind(this);return this.controller_.valueController.emitter.on(t,(function(){i(new r(n))})),this}}]),n}(n),m=function(){function t(){c(this,t),this.observers_={}}return C(t,[{key:"on",value:function(t,e){var n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}},{key:"off",value:function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter((function(t){return t.handler!==e}))),this}},{key:"emit",value:function(t,e){var n=this.observers_[t];n&&n.forEach((function(t){t.handler(e)}))}}]),t}(),_="tp";function g(t){return function(e,n){return[_,"-",t,"v",e?"_".concat(e):"",n?"-".concat(n):""].join("")}}function y(t,e){return function(n){return e(t(n))}}function b(t){return t.rawValue}function w(t,e){t.emitter.on("change",y(b,e)),e(t.rawValue)}function x(t,e,n){w(t.value(e),n)}function E(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function T(t,e){return function(n){E(t,e,n)}}function S(t,e){w(t,(function(t){e.textContent=null!=t?t:""}))}var D=g("btn"),R=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(D()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("button");r.classList.add(D("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var i=e.createElement("div");i.classList.add(D("t")),S(n.props.value("title"),i),this.buttonElement.appendChild(i)},L=function(){function t(e,n){c(this,t),this.emitter=new m,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new R(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return C(t,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),t}(),I=function(){function t(e,n){var r;c(this,t),this.constraint_=null==n?void 0:n.constraint,this.equals_=null!==(r=null==n?void 0:n.equals)&&void 0!==r?r:function(t,e){return t===e},this.emitter=new m,this.rawValue_=e}return C(t,[{key:"constraint",get:function(){return this.constraint_}},{key:"rawValue",get:function(){return this.rawValue_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}]),t}(),N=function(){function t(e){c(this,t),this.emitter=new m,this.value_=e}return C(t,[{key:"rawValue",get:function(){return this.value_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}]),t}();function j(t,e){var n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new I(t,e):new N(t)}var z=function(){function t(e){var n=this,r=function(t){var e=n;n.valMap_[t].emitter.on("change",(function(){e.emitter.emit("change",{key:t,sender:e})}))};for(var i in c(this,t),this.emitter=new m,this.valMap_=e,this.valMap_)r(i)}return C(t,[{key:"get",value:function(t){return this.valMap_[t].rawValue}},{key:"set",value:function(t,e){this.valMap_[t].rawValue=e}},{key:"value",value:function(t){return this.valMap_[t]}}],[{key:"createCore",value:function(t){return Object.keys(t).reduce((function(e,n){return Object.assign(e,A({},n,j(t[n])))}),{})}},{key:"fromObject",value:function(e){return new t(this.createCore(e))}}]),t}();function U(t,e){return u(Object.keys(e).reduce((function(n,r){if(void 0!==n){var i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),A({},r,i.value)):void 0}}),{}))}function q(t,e){return t.reduce((function(t,n){if(void 0!==t){var r=e(n);if(r.succeeded&&void 0!==r.value)return B(t).concat([r.value])}}),[])}function W(t){return null!==t&&"object"==typeof t}function G(t){return function(e){return function(n){if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};var r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}}function H(t){return{custom:function(e){return G(e)(t)},boolean:G((function(t){return"boolean"==typeof t?t:void 0}))(t),number:G((function(t){return"number"==typeof t?t:void 0}))(t),string:G((function(t){return"string"==typeof t?t:void 0}))(t),function:G((function(t){return"function"==typeof t?t:void 0}))(t),constant:function(e){return G((function(t){return t===e?e:void 0}))(t)},raw:G((function(t){return t}))(t),object:function(e){return G((function(t){if(W(t))return U(t,e)}))(t)},array:function(e){return G((function(t){if(Array.isArray(t))return q(t,e)}))(t)}}}var K={optional:H(!0),required:H(!1)};function Y(t,e){var n=K.required.object(e)(t);return n.succeeded?n.value:void 0}function X(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function Z(){return["veryfirst","first","last","verylast"]}var Q=g(""),$={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},J=function(){function t(e){var n=this;c(this,t),this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var r=this.view.element;this.blade.value("positions").emitter.on("change",(function(){Z().forEach((function(t){r.classList.remove(Q(void 0,$[t]))})),n.blade.get("positions").forEach((function(t){r.classList.add(Q(void 0,$[t]))}))})),this.viewProps.handleDispose((function(){X(r)}))}return C(t,[{key:"parent",get:function(){return this.parent_}}]),t}(),tt="http://www.w3.org/2000/svg";function et(t){t.offsetHeight}function nt(t,e){var n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function rt(t){return void 0!==t.ontouchstart}function it(){return new Function("return this")()}function at(){return u(it()).document}function ot(t){var e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d"):null}var st={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ut(t,e){var n=t.createElementNS(tt,"svg");return n.innerHTML=st[e],n}function lt(t,e,n){t.insertBefore(e,t.children[n])}function ct(t){t.parentElement&&t.parentElement.removeChild(t)}function ht(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function pt(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function vt(t){return t.relatedTarget?u(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}var ft=g("lbl");function dt(t,e){var n=t.createDocumentFragment();return e.split("\n").map((function(e){return t.createTextNode(e)})).forEach((function(e,r){r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}var mt=function t(e,n){var r=this;c(this,t),this.element=e.createElement("div"),this.element.classList.add(ft()),n.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(ft("l")),x(n.props,"label",(function(t){l(t)?r.element.classList.add(ft(void 0,"nol")):(r.element.classList.remove(ft(void 0,"nol")),pt(i),i.appendChild(dt(e,t)))})),this.element.appendChild(i),this.labelElement=i;var a=e.createElement("div");a.classList.add(ft("v")),this.element.appendChild(a),this.valueElement=a},_t=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=r.valueController.viewProps;return(i=e.call(this,Object.assign(Object.assign({},r),{view:new mt(t,{props:r.props,viewProps:a}),viewProps:a}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return n}(J),gt={id:"button",type:"blade",accept:function(t){var e=K,n=Y(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:function(t){return new _t(t.document,{blade:t.blade,props:z.fromObject({label:t.params.label}),valueController:new L(t.document,{props:z.fromObject({title:t.params.title}),viewProps:t.viewProps})})},api:function(t){return t.controller instanceof _t&&t.controller.valueController instanceof L?new d(t.controller):null}},yt=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).value=t.value,r}return n}(J);function bt(){return new z({positions:j([],{equals:h})})}var wt=function(t){O(n,t);var e=P(n);function n(t){return c(this,n),e.call(this,t)}return C(n,[{key:"styleExpanded",get:function(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}},{key:"styleHeight",get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?"".concat(t,"px"):"auto"}},{key:"bindExpandedClass",value:function(t,e){var n=this,r=function(){n.styleExpanded?t.classList.add(e):t.classList.remove(e)};x(this,"expanded",r),x(this,"temporaryExpanded",r)}},{key:"cleanUpTransition",value:function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}],[{key:"create",value:function(t){var e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null};return new n(z.createCore(e))}}]),n}(z);function kt(t,e){var n=0;return nt(e,(function(){t.set("expandedHeight",null),t.set("temporaryExpanded",!0),et(e),n=e.clientHeight,t.set("temporaryExpanded",null),et(e)})),n}function xt(t,e){e.style.height=t.styleHeight}function Ct(t,e){t.value("expanded").emitter.on("beforechange",(function(){t.set("completed",!1),l(t.get("expandedHeight"))&&t.set("expandedHeight",kt(t,e)),t.set("shouldFixHeight",!0),et(e)})),t.emitter.on("change",(function(){xt(t,e)})),xt(t,e),e.addEventListener("transitionend",(function(e){"height"===e.propertyName&&t.cleanUpTransition()}))}var Et=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t)).rackApi_=r,i}return n}(n);function Mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Tt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Pt(t,e){var n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function At(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}var St=function(){function t(e){c(this,t),this.emitter=new m,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return C(t,[{key:"items",get:function(){return this.items_}},{key:"allItems",value:function(){return Array.from(this.cache_)}},{key:"find",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.allItems()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;if(t(o))return o}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"includes",value:function(t){return this.cache_.has(t)}},{key:"add",value:function(t,e){if(this.includes(t))throw v.shouldNeverHappen();var n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);var r=this.extract_(t);if(r){var i=this;r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((function(t){i.cache_.add(t)}))}this.emitter.emit("add",{index:n,item:t,root:this,target:this})}},{key:"remove",value:function(t){var e=this.items_.indexOf(t);if(!(e<0)){this.items_.splice(e,1),this.cache_.delete(t);var n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}}},{key:"onSubListAdd_",value:function(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}},{key:"onSubListRemove_",value:function(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}]),t}(),Vt=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).onBindingChange_=r.onBindingChange_.bind(s(r)),r.emitter_=new m,r.controller_.binding.emitter.on("change",r.onBindingChange_),r}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}},{key:"refresh",value:function(){this.controller_.binding.read()}},{key:"onBindingChange_",value:function(t){var e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,u(e),this.controller_.binding.target.presetKey,t.options.last)})}}]),n}(n),Ot=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t,r)).binding=r.binding,i}return n}(_t),Dt=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).onBindingUpdate_=r.onBindingUpdate_.bind(s(r)),r.emitter_=new m,r.controller_.binding.emitter.on("update",r.onBindingUpdate_),r}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}},{key:"refresh",value:function(){this.controller_.binding.read()}},{key:"onBindingUpdate_",value:function(t){var e=t.sender.target.read();this.emitter_.emit("update",{event:new a(this,u(e),this.controller_.binding.target.presetKey)})}}]),n}(n),Rt=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t,r)).binding=r.binding,i.viewProps.bindDisabled(i.binding.ticker),i.viewProps.handleDispose((function(){i.binding.dispose()})),i}return n}(_t);function Lt(t){return t instanceof Ft?t.apiSet_:t instanceof Et?t.rackApi_.apiSet_:null}function It(t,e){var n=t.find((function(t){return t.controller_===e}));if(!n)throw v.shouldNeverHappen();return n}function Nt(t,e,n){if(!f.isBindable(t))throw v.notBindable();return new f(t,e,n)}var Ft=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n),(i=e.call(this,t)).onRackAdd_=i.onRackAdd_.bind(s(i)),i.onRackRemove_=i.onRackRemove_.bind(s(i)),i.onRackInputChange_=i.onRackInputChange_.bind(s(i)),i.onRackMonitorUpdate_=i.onRackMonitorUpdate_.bind(s(i)),i.emitter_=new m,i.apiSet_=new St(Lt),i.pool_=r;var a=i.controller_.rack;return a.emitter.on("add",i.onRackAdd_),a.emitter.on("remove",i.onRackRemove_),a.emitter.on("inputchange",i.onRackInputChange_),a.emitter.on("monitorupdate",i.onRackMonitorUpdate_),a.children.forEach((function(t){i.setUpApi_(t)})),i}return C(n,[{key:"children",get:function(){var t=this;return this.controller_.rack.children.map((function(e){return It(t.apiSet_,e)}))}},{key:"addInput",value:function(t,e,n){var r=n||{},i=this.controller_.view.element.ownerDocument,a=this.pool_.createInput(i,Nt(t,e,r.presetKey),r),o=new Vt(a);return this.add(o,r.index)}},{key:"addMonitor",value:function(t,e,n){var r=n||{},i=this.controller_.view.element.ownerDocument,a=this.pool_.createMonitor(i,Nt(t,e),r),o=new Dt(a);return u(this.add(o,r.index))}},{key:"addFolder",value:function(t){return Tt(this,t)}},{key:"addButton",value:function(t){return Mt(this,t)}},{key:"addSeparator",value:function(t){return Pt(this,t)}},{key:"addTab",value:function(t){return At(this,t)}},{key:"add",value:function(t,e){this.controller_.rack.add(t.controller_,e);var n=this.apiSet_.find((function(e){return e.controller_===t.controller_}));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}},{key:"remove",value:function(t){this.controller_.rack.remove(t.controller_)}},{key:"addBlade",value:function(t){var e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createBladeApi(n);return this.add(r,t.index)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}},{key:"setUpApi_",value:function(t){this.apiSet_.find((function(e){return e.controller_===t}))||this.apiSet_.add(this.pool_.createBladeApi(t))}},{key:"onRackAdd_",value:function(t){this.setUpApi_(t.bladeController)}},{key:"onRackRemove_",value:function(t){if(t.isRoot){var e=It(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}},{key:"onRackInputChange_",value:function(t){var e=t.bladeController;if(e instanceof Ot){var n=It(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new i(n,u(r.target.read()),r.target.presetKey,t.options.last)})}else if(e instanceof yt){var a=It(this.apiSet_,e);this.emitter_.emit("change",{event:new i(a,e.value.rawValue,void 0,t.options.last)})}}},{key:"onRackMonitorUpdate_",value:function(t){if(!(t.bladeController instanceof Rt))throw v.shouldNeverHappen();var e=It(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new a(e,u(n.target.read()),n.target.presetKey)})}}]),n}(n),Bt=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t,new Ft(t.rackController,r))).emitter_=new m,i.controller_.foldable.value("expanded").emitter.on("change",(function(t){i.emitter_.emit("fold",{event:new o(s(i),t.sender.rawValue)})})),i.rackApi_.on("change",(function(t){i.emitter_.emit("change",{event:t})})),i.rackApi_.on("update",(function(t){i.emitter_.emit("update",{event:t})})),i}return C(n,[{key:"expanded",get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)}},{key:"title",get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addInput",value:function(t,e,n){return this.rackApi_.addInput(t,e,n)}},{key:"addMonitor",value:function(t,e,n){return this.rackApi_.addMonitor(t,e,n)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addSeparator",value:function(t){return this.rackApi_.addSeparator(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){return this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}}]),n}(Et),jt=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})).rackController=t.rackController,r}return n}(J),zt=function t(e,n){c(this,t);var r=g(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)};function Ut(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof Ot&&r.binding===e)return r}return null}function qt(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof Rt&&r.binding===e)return r}return null}function Wt(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof yt&&r.value===e)return r}return null}function Gt(t){return t instanceof Yt?t.rack:t instanceof jt?t.rackController.rack:null}function Ht(t){var e=Gt(t);return e?e.bcSet_:null}var Kt=function(){function t(e){var n;c(this,t),this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new m,this.blade_=null!=e?e:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new St(Ht),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return C(t,[{key:"children",get:function(){return this.bcSet_.items}},{key:"add",value:function(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}},{key:"remove",value:function(t){t.parent_=null,this.bcSet_.remove(t)}},{key:"find",value:function(t){return u(this.bcSet_.allItems().filter((function(e){return e instanceof t})))}},{key:"onSetAdd_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),e){var n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof Ot)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Rt)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof yt)n.value.emitter.on("change",this.onChildValueChange_);else{var r=Gt(n);if(r){var i=r.emitter;i.on("layout",this.onDescendantLayout_),i.on("inputchange",this.onDescendantInputChange_),i.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}}},{key:"onSetRemove_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),e){var n=t.item;if(n instanceof Ot)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Rt)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof yt)n.value.emitter.off("change",this.onChildValueChange_);else{var r=Gt(n);if(r){var i=r.emitter;i.off("layout",this.onDescendantLayout_),i.off("inputchange",this.onDescendantInputChange_),i.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}}},{key:"updatePositions_",value:function(){var t=this,e=this.bcSet_.items.filter((function(t){return!t.viewProps.get("hidden")})),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach((function(e){var i=[];e===n&&(i.push("first"),t.blade_&&!t.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),e===r&&(i.push("last"),t.blade_&&!t.blade_.get("positions").includes("verylast")||i.push("verylast")),e.blade.set("positions",i)}))}},{key:"onChildPositionsChange_",value:function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildViewPropsChange_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildDispose_",value:function(){var t=this;this.bcSet_.items.filter((function(t){return t.viewProps.get("disposed")})).forEach((function(e){t.bcSet_.remove(e)}))}},{key:"onChildInputChange_",value:function(t){var e=Ut(this.find(Ot),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}},{key:"onChildMonitorUpdate_",value:function(t){var e=qt(this.find(Rt),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}},{key:"onChildValueChange_",value:function(t){var e=Wt(this.find(yt),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}},{key:"onDescendantLayout_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onDescendantInputChange_",value:function(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}},{key:"onDescendantMonitorUpdate_",value:function(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}},{key:"onBladePositionsChange_",value:function(){this.updatePositions_()}}]),t}(),Yt=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n),(i=e.call(this,Object.assign(Object.assign({},r),{view:new zt(t,{viewName:"brk",viewProps:r.viewProps})}))).onRackAdd_=i.onRackAdd_.bind(s(i)),i.onRackRemove_=i.onRackRemove_.bind(s(i));var a=new Kt(r.root?void 0:r.blade);return a.emitter.on("add",i.onRackAdd_),a.emitter.on("remove",i.onRackRemove_),i.rack=a,i.viewProps.handleDispose((function(){for(var t=i.rack.children.length-1;t>=0;t--)i.rack.children[t].viewProps.set("disposed",!0)})),i}return C(n,[{key:"onRackAdd_",value:function(t){t.isRoot&&lt(this.view.element,t.bladeController.view.element,t.index)}},{key:"onRackRemove_",value:function(t){t.isRoot&&ct(t.bladeController.view.element)}}]),n}(J),Xt=g("cnt"),Zt=function t(e,n){var r=this;c(this,t),this.className_=g(n.viewName||"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Xt()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),x(this.foldable_,"completed",T(this.element,this.className_(void 0,"cpl")));var i=e.createElement("button");i.classList.add(this.className_("b")),x(n.props,"title",(function(t){l(t)?r.element.classList.add(r.className_(void 0,"not")):r.element.classList.remove(r.className_(void 0,"not"))})),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var a=e.createElement("div");a.classList.add(this.className_("t")),S(n.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;var o=e.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);var s=n.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s},Qt=function(t){O(n,t);var e=P(n);function n(t,r){var i,a;c(this,n);var o=wt.create(null===(a=r.expanded)||void 0===a||a),u=new Yt(t,{blade:r.blade,root:r.root,viewProps:r.viewProps});return(i=e.call(this,Object.assign(Object.assign({},r),{rackController:u,view:new Zt(t,{containerElement:u.view.element,foldable:o,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps})}))).onTitleClick_=i.onTitleClick_.bind(s(i)),i.props=r.props,i.foldable=o,Ct(i.foldable,i.view.containerElement),i.rackController.rack.emitter.on("add",(function(){i.foldable.cleanUpTransition()})),i.rackController.rack.emitter.on("remove",(function(){i.foldable.cleanUpTransition()})),i.view.buttonElement.addEventListener("click",i.onTitleClick_),i}return C(n,[{key:"document",get:function(){return this.view.element.ownerDocument}},{key:"onTitleClick_",value:function(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}]),n}(jt),$t={id:"folder",type:"blade",accept:function(t){var e=K,n=Y(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:function(t){return new Qt(t.document,{blade:t.blade,expanded:t.params.expanded,props:z.fromObject({title:t.params.title}),viewProps:t.viewProps})},api:function(t){return t.controller instanceof Qt?new Bt(t.controller,t.pool):null}},Jt=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=r.valueController.viewProps;return(i=e.call(this,Object.assign(Object.assign({},r),{value:r.valueController.value,view:new mt(t,{props:r.props,viewProps:a}),viewProps:a}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return n}(yt),te=function(t){O(n,t);var e=P(n);function n(){return c(this,n),e.apply(this,arguments)}return n}(n),ee=g("spr"),ne=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(ee()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("hr");r.classList.add(ee("r")),this.element.appendChild(r)},re=function(t){O(n,t);var e=P(n);function n(t,r){return c(this,n),e.call(this,Object.assign(Object.assign({},r),{view:new ne(t,{viewProps:r.viewProps})}))}return n}(J),ie={id:"separator",type:"blade",accept:function(t){var e=Y(t,{view:K.required.constant("separator")});return e?{params:e}:null},controller:function(t){return new re(t.document,{blade:t.blade,viewProps:t.viewProps})},api:function(t){return t.controller instanceof re?new te(t.controller):null}},ae=g("");function oe(t,e){return T(t,ae(void 0,e))}var se=function(t){O(n,t);var e=P(n);function n(t){return c(this,n),e.call(this,t)}return C(n,[{key:"bindClassModifiers",value:function(t){x(this,"disabled",oe(t,"disabled")),x(this,"hidden",oe(t,"hidden"))}},{key:"bindDisabled",value:function(t){x(this,"disabled",(function(e){t.disabled=e}))}},{key:"bindTabIndex",value:function(t){x(this,"disabled",(function(e){t.tabIndex=e?-1:0}))}},{key:"handleDispose",value:function(t){this.value("disposed").emitter.on("change",(function(e){e&&t()}))}}],[{key:"create",value:function(t){var e,r,i=null!=t?t:{},a={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(r=i.hidden)&&void 0!==r&&r};return new n(z.createCore(a))}}]),n}(z),ue=g("tbi"),le=function t(e,n){var r=this;c(this,t),this.element=e.createElement("div"),this.element.classList.add(ue()),n.viewProps.bindClassModifiers(this.element),x(n.props,"selected",(function(t){t?r.element.classList.add(ue(void 0,"sel")):r.element.classList.remove(ue(void 0,"sel"))}));var i=e.createElement("button");i.classList.add(ue("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var a=e.createElement("div");a.classList.add(ue("t")),S(n.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a},ce=function(){function t(e,n){c(this,t),this.emitter=new m,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new le(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return C(t,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),t}(),he=function(){function t(e,n){var r=this;c(this,t),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new ce(e,{props:n.itemProps,viewProps:se.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Yt(e,{blade:bt(),viewProps:se.create()}),this.props=n.props,x(this.props,"selected",(function(t){r.itemController.props.set("selected",t),r.contentController.viewProps.set("hidden",!t)}))}return C(t,[{key:"itemController",get:function(){return this.ic_}},{key:"contentController",get:function(){return this.cc_}},{key:"onItemClick_",value:function(){this.props.set("selected",!0)}}]),t}(),pe=function(){function t(e,n){c(this,t),this.controller_=e,this.rackApi_=n}return C(t,[{key:"title",get:function(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller_.itemController.props.set("title",t)}},{key:"selected",get:function(){return this.controller_.props.get("selected")},set:function(t){this.controller_.props.set("selected",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addSeparator",value:function(t){return this.rackApi_.addSeparator(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addInput",value:function(t,e,n){return this.rackApi_.addInput(t,e,n)}},{key:"addMonitor",value:function(t,e,n){return this.rackApi_.addMonitor(t,e,n)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}}]),t}(),ve=function(t){O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t,new Ft(t.rackController,r))).onPageAdd_=i.onPageAdd_.bind(s(i)),i.onPageRemove_=i.onPageRemove_.bind(s(i)),i.emitter_=new m,i.pageApiMap_=new Map,i.rackApi_.on("change",(function(t){i.emitter_.emit("change",{event:t})})),i.rackApi_.on("update",(function(t){i.emitter_.emit("update",{event:t})})),i.controller_.pageSet.emitter.on("add",i.onPageAdd_),i.controller_.pageSet.emitter.on("remove",i.onPageRemove_),i.controller_.pageSet.items.forEach((function(t){i.setUpPageApi_(t)})),i}return C(n,[{key:"pages",get:function(){var t=this;return this.controller_.pageSet.items.map((function(e){var n=t.pageApiMap_.get(e);if(!n)throw v.shouldNeverHappen();return n}))}},{key:"addPage",value:function(t){var e=this.controller_.view.element.ownerDocument,n=new he(e,{itemProps:z.fromObject({selected:!1,title:t.title}),props:z.fromObject({selected:!1})});this.controller_.add(n,t.index);var r=this.pageApiMap_.get(n);if(!r)throw v.shouldNeverHappen();return r}},{key:"removePage",value:function(t){this.controller_.remove(t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}},{key:"setUpPageApi_",value:function(t){var e=this.rackApi_.apiSet_.find((function(e){return e.controller_===t.contentController}));if(!e)throw v.shouldNeverHappen();var n=new pe(t,e);this.pageApiMap_.set(t,n)}},{key:"onPageAdd_",value:function(t){this.setUpPageApi_(t.item)}},{key:"onPageRemove_",value:function(t){if(!this.pageApiMap_.get(t.item))throw v.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}]),n}(Et),fe=g("tab"),de=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(fe(),Xt()),n.viewProps.bindClassModifiers(this.element),w(n.empty,T(this.element,fe(void 0,"nop")));var r=e.createElement("div");r.classList.add(fe("i")),this.element.appendChild(r),this.itemsElement=r;var i=n.contentsElement;i.classList.add(fe("c")),this.element.appendChild(i),this.contentsElement=i},me=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=new Yt(t,{blade:r.blade,viewProps:r.viewProps}),o=j(!0);return(i=e.call(this,{blade:r.blade,rackController:a,view:new de(t,{contentsElement:a.view.element,empty:o,viewProps:r.viewProps})})).onPageAdd_=i.onPageAdd_.bind(s(i)),i.onPageRemove_=i.onPageRemove_.bind(s(i)),i.onPageSelectedChange_=i.onPageSelectedChange_.bind(s(i)),i.pageSet_=new St((function(){return null})),i.pageSet_.emitter.on("add",i.onPageAdd_),i.pageSet_.emitter.on("remove",i.onPageRemove_),i.empty_=o,i.applyPages_(),i}return C(n,[{key:"pageSet",get:function(){return this.pageSet_}},{key:"add",value:function(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}},{key:"remove",value:function(t){this.pageSet_.remove(this.pageSet_.items[t])}},{key:"applyPages_",value:function(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}},{key:"onPageAdd_",value:function(t){var e=t.item;lt(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}},{key:"onPageRemove_",value:function(t){var e=t.item;ct(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}},{key:"keepSelection_",value:function(){if(0!==this.pageSet_.items.length){var t=this.pageSet_.items.findIndex((function(t){return t.props.get("selected")}));t<0?this.pageSet_.items.forEach((function(t,e){t.props.set("selected",0===e)})):this.pageSet_.items.forEach((function(e,n){e.props.set("selected",n===t)}))}}},{key:"onPageSelectedChange_",value:function(t){if(t.rawValue){var e=this.pageSet_.items.findIndex((function(e){return e.props.value("selected")===t.sender}));this.pageSet_.items.forEach((function(t,n){t.props.set("selected",n===e)}))}else this.keepSelection_()}}]),n}(jt),_e={id:"tab",type:"blade",accept:function(t){var e=K,n=Y(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller:function(t){var e=new me(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((function(n){var r=new he(t.document,{itemProps:z.fromObject({selected:!1,title:n.title}),props:z.fromObject({selected:!1})});e.add(r)})),e},api:function(t){return t.controller instanceof me?new ve(t.controller,t.pool):null}};function ge(t,e){var n=t.accept(e.params);if(!n)return null;var r=K.optional.boolean(e.params.disabled).value,i=K.optional.boolean(e.params.hidden).value;return t.controller({blade:bt(),document:e.document,params:u(Object.assign(Object.assign({},n.params),{disabled:r,hidden:i})),viewProps:se.create({disabled:r,hidden:i})})}var ye=function(){function t(){c(this,t),this.disabled=!1,this.emitter=new m}return C(t,[{key:"dispose",value:function(){}},{key:"tick",value:function(){this.disabled||this.emitter.emit("tick",{sender:this})}}]),t}(),be=function(){function t(e,n){c(this,t),this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new m,this.interval_=n,this.setTimer_()}return C(t,[{key:"disabled",get:function(){return this.disabled_},set:function(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}},{key:"dispose",value:function(){this.clearTimer_()}},{key:"clearTimer_",value:function(){if(null!==this.timerId_){var t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}}},{key:"setTimer_",value:function(){if(this.clearTimer_(),!(this.interval_<=0)){var t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}}},{key:"onTick_",value:function(){this.disabled_||this.emitter.emit("tick",{sender:this})}}]),t}(),we=function(){function t(e){c(this,t),this.constraints=e}return C(t,[{key:"constrain",value:function(t){return this.constraints.reduce((function(t,e){return e.constrain(t)}),t)}}]),t}();function ke(t,e){if(t instanceof e)return t;if(t instanceof we){var n=t.constraints.reduce((function(t,n){return t||(n instanceof e?n:null)}),null);if(n)return n}return null}var xe=function(){function t(e){c(this,t),this.options=e}return C(t,[{key:"constrain",value:function(t){var e=this.options;return 0===e.length||e.filter((function(e){return e.value===t})).length>0?t:e[0].value}}]),t}(),Ce=function(){function t(e){c(this,t),this.maxValue=e.max,this.minValue=e.min}return C(t,[{key:"constrain",value:function(t){var e=t;return l(this.minValue)||(e=Math.max(e,this.minValue)),l(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}]),t}(),Ee=function(){function t(e){c(this,t),this.step=e}return C(t,[{key:"constrain",value:function(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}]),t}(),Me=g("lst"),Te=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(Me()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("select");r.classList.add(Me("s")),x(this.props_,"options",(function(t){ht(r),t.forEach((function(t,n){var i=e.createElement("option");i.dataset.index=String(n),i.textContent=t.text,i.value=String(t.value),r.appendChild(i)}))})),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;var i=e.createElement("div");i.classList.add(Me("m")),i.appendChild(ut(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,this.update_()}return C(t,[{key:"update_",value:function(){this.selectElement.value=String(this.value_.rawValue)}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),Pe=function(){function t(e,n){c(this,t),this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Te(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return C(t,[{key:"onSelectChange_",value:function(t){var e=u(t.currentTarget).selectedOptions.item(0);if(e){var n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}}]),t}(),Ae=g("pop"),Se=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(Ae()),n.viewProps.bindClassModifiers(this.element),w(n.shows,T(this.element,Ae(void 0,"v")))},Ve=function t(e,n){c(this,t),this.shows=j(!1),this.viewProps=n.viewProps,this.view=new Se(e,{shows:this.shows,viewProps:this.viewProps})},Oe=g("txt"),De=function(){function t(e,n){c(this,t),this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Oe()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);var r=e.createElement("input");r.classList.add(Oe("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}return C(t,[{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),Re=function(){function t(e,n){c(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new De(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return C(t,[{key:"onInputChange_",value:function(t){var e=u(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}}]),t}();function Le(t){return String(t)}function Ie(t){return"false"!==t&&!!t}function Ne(t){return Le(t)}var Fe=function(){function t(e){c(this,t),this.text=e}return C(t,[{key:"evaluate",value:function(){return Number(this.text)}},{key:"toString",value:function(){return this.text}}]),t}(),Be={"**":function(t,e){return Math.pow(t,e)},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"&":function(t,e){return t&e},"^":function(t,e){return t^e},"|":function(t,e){return t|e}},je=function(){function t(e,n,r){c(this,t),this.left=n,this.operator=e,this.right=r}return C(t,[{key:"evaluate",value:function(){var t=Be[this.operator];if(!t)throw new Error("unexpected binary operator: '".concat(this.operator));return t(this.left.evaluate(),this.right.evaluate())}},{key:"toString",value:function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}]),t}(),ze={"+":function(t){return t},"-":function(t){return-t},"~":function(t){return~t}},Ue=function(){function t(e,n){c(this,t),this.operator=e,this.expression=n}return C(t,[{key:"evaluate",value:function(){var t=ze[this.operator];if(!t)throw new Error("unexpected unary operator: '".concat(this.operator));return t(this.expression.evaluate())}},{key:"toString",value:function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}]),t}();function qe(t){return function(e,n){for(var r=0;r<t.length;r++){var i=t[r](e,n);if(""!==i)return i}return""}}function We(t,e){var n,r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ge(t,e){var n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function He(t,e){var n,r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ke(t,e){var n=He(t,e);if(""!==n)return n;var r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";var i=He(t,e+=1);return""===i?"":r+i}function Ye(t,e){var n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";var r=Ke(t,e);return""===r?"":n+r}function Xe(t,e){var n=t.substr(e,1);if("0"===n)return n;var r=Ge(t,e);return e+=r.length,""===r?"":r+He(t,e)}function Ze(t,e){var n=Xe(t,e);if(e+=n.length,""===n)return"";var r=t.substr(e,1);if(e+=r.length,"."!==r)return"";var i=He(t,e);return n+r+i+Ye(t,e+=i.length)}function Qe(t,e){var n=t.substr(e,1);if(e+=n.length,"."!==n)return"";var r=He(t,e);return e+=r.length,""===r?"":n+r+Ye(t,e)}function $e(t,e){var n=Xe(t,e);return e+=n.length,""===n?"":n+Ye(t,e)}var Je=qe([Ze,Qe,$e]);function tn(t,e){var n,r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function en(t,e){var n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";var r=tn(t,e);return""===r?"":n+r}function nn(t,e){var n,r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function rn(t,e){var n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";var r=nn(t,e);return""===r?"":n+r}function an(t,e){var n,r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function on(t,e){var n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";var r=an(t,e);return""===r?"":n+r}var sn=qe([en,rn,on]),un=qe([sn,Je]);function ln(t,e){var n=un(t,e);return e+=n.length,""===n?null:{evaluable:new Fe(n),cursor:e}}function cn(t,e){var n=t.substr(e,1);if(e+=n.length,"("!==n)return null;var r=mn(t,e);if(!r)return null;e=r.cursor,e+=We(t,e).length;var i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}function hn(t,e){return ln(t,e)||cn(t,e)}function pn(t,e){var n=hn(t,e);if(n)return n;var r=t.substr(e,1);if(e+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;var i=pn(t,e);return i?{cursor:e=i.cursor,evaluable:new Ue(r,i.evaluable)}:null}function vn(t,e,n){n+=We(e,n).length;var r=t.filter((function(t){return e.startsWith(t,n)}))[0];return r?(n+=r.length,{cursor:n+=We(e,n).length,operator:r}):null}function fn(t,e){return function(n,r){var i=t(n,r);if(!i)return null;r=i.cursor;for(var a=i.evaluable;;){var o=vn(e,n,r);if(!o)break;r=o.cursor;var s=t(n,r);if(!s)return null;r=s.cursor,a=new je(o.operator,a,s.evaluable)}return a?{cursor:r,evaluable:a}:null}}var dn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((function(t,e){return fn(t,e)}),pn);function mn(t,e){return e+=We(t,e).length,dn(t,e)}function _n(t){var e=mn(t,0);return e?e.cursor+We(t,e.cursor).length!==t.length?null:e.evaluable:null}function gn(t){var e,n=_n(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function yn(t){if("number"==typeof t)return t;if("string"==typeof t){var e=gn(t);if(!l(e))return e}return 0}function bn(t){return String(t)}function wn(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}var kn=wn(0);function xn(t){return kn(t)+"%"}function Cn(t){return String(t)}function En(t){return t}function Mn(t,e){for(;t.length<e;)t.push(void 0)}function Tn(t){var e=[];return Mn(e,t),j(e)}function Pn(t){var e=t.indexOf(void 0);return u(e<0?t:t.slice(0,e))}function An(t,e){var n=B(Pn(t)).concat([e]);return n.length>t.length?n.splice(0,n.length-t.length):Mn(n,t.length),n}function Sn(t){var e=t.primary,n=t.secondary,r=t.forward,i=t.backward,a=!1;function o(t){a||(a=!0,t(),a=!1)}e.emitter.on("change",(function(t){o((function(){n.setRawValue(r(e,n),t.options)}))})),n.emitter.on("change",(function(t){o((function(){e.setRawValue(i(e,n),t.options)})),o((function(){n.setRawValue(r(e,n),t.options)}))})),o((function(){n.setRawValue(r(e,n),{forceEmit:!1,last:!0})}))}function Vn(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function On(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Dn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Rn(t){return"ArrowUp"===t||"ArrowDown"===t}function Ln(t){return Rn(t)||"ArrowLeft"===t||"ArrowRight"===t}function In(t,e){var n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}var Nn=function(){function t(e){c(this,t),this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new m,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return C(t,[{key:"computePosition_",value:function(t){var e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}},{key:"onMouseDown_",value:function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(In(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseMove_",value:function(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(In(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseUp_",value:function(t){var e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(In(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onTouchStart_",value:function(t){t.preventDefault();var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchMove_",value:function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchEnd_",value:function(t){var e,n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}]),t}();function Fn(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function Bn(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function jn(t,e,n){return Math.min(Math.max(t,e),n)}function zn(t,e){return(t%e+e)%e}var Un=g("txt"),qn=function(){function t(e,n){c(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Un(),Un(void 0,"num")),n.arrayPosition&&this.element.classList.add(Un(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(Un("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Un()),this.inputElement.classList.add(Un("i"));var i=e.createElement("div");i.classList.add(Un("k")),this.element.appendChild(i),this.knobElement=i;var a=e.createElementNS(tt,"svg");a.classList.add(Un("g")),this.knobElement.appendChild(a);var o=e.createElementNS(tt,"path");o.classList.add(Un("gb")),a.appendChild(o),this.guideBodyElem_=o;var s=e.createElementNS(tt,"path");s.classList.add(Un("gh")),a.appendChild(s),this.guideHeadElem_=s;var u=e.createElement("div");u.classList.add(g("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}return C(t,[{key:"onDraggingChange_",value:function(t){if(null!==t.rawValue){this.element.classList.add(Un(void 0,"drg"));var e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=jn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(e,",-1 L").concat(e,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(e,",4"));var i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left="".concat(e,"px")}else this.element.classList.remove(Un(void 0,"drg"))}},{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),Wn=function(){function t(e,n){c(this,t),this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=j(null),this.view=new qn(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new Nn(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return C(t,[{key:"onInputChange_",value:function(t){var e=u(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}},{key:"onInputKeyDown_",value:function(t){var e=Vn(this.baseStep_,On(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}},{key:"onInputKeyUp_",value:function(t){0!==Vn(this.baseStep_,On(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},{key:"onPointerDown_",value:function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}},{key:"computeDraggingValue_",value:function(t){if(!t.point)return null;var e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}},{key:"onPointerMove_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}},{key:"onPointerUp_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}]),t}(),Gn=g("sld"),Hn=function(){function t(e,n){c(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Gn()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Gn("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;var i=e.createElement("div");i.classList.add(Gn("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}return C(t,[{key:"update_",value:function(){var t=jn(Fn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(t,"%")}},{key:"onChange_",value:function(){this.update_()}}]),t}(),Kn=function(){function t(e,n){c(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Hn(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return C(t,[{key:"handlePointerEvent_",value:function(t,e){t.point&&this.value.setRawValue(Fn(jn(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}},{key:"onPointerDownOrMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Vn(this.baseStep_,Dn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){0!==Vn(this.baseStep_,Dn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),Yn=g("sldtxt"),Xn=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(Yn());var r=e.createElement("div");r.classList.add(Yn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(Yn("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)},Zn=function(){function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Kn(e,{baseStep:n.baseStep,props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new Wn(e,{baseStep:n.baseStep,parser:n.parser,props:n.textProps,value:n.value,viewProps:n.viewProps}),this.view=new Xn(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return C(t,[{key:"sliderController",get:function(){return this.sliderC_}},{key:"textController",get:function(){return this.textC_}}]),t}();function Qn(t,e){t.write(e)}function $n(t){var e=K;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function Jn(t){if("inline"===t||"popup"===t)return t}function tr(t){var e=K;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function er(t){if(Array.isArray(t))return t;var e=[];return Object.keys(t).forEach((function(n){e.push({text:n,value:t[n]})})),e}function nr(t){return l(t)?null:new xe(er(u(t)))}function rr(t){var e=t?ke(t,xe):null;return e?e.options:null}function ir(t){var e=t?ke(t,Ee):null;return e?e.step:null}function ar(t,e){var n=t&&ke(t,Ee);return n?Bn(n.step):Math.max(Bn(e),2)}function or(t){var e=ir(t);return null!=e?e:1}function sr(t,e){var n,r=t&&ke(t,Ee),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}var ur=g("ckb"),lr=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ur()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("label");r.classList.add(ur("l")),this.element.appendChild(r);var i=e.createElement("input");i.classList.add(ur("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);var a=e.createElement("div");a.classList.add(ur("w")),r.appendChild(a);var o=ut(e,"check");a.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return C(t,[{key:"update_",value:function(){this.inputElement.checked=this.value.rawValue}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),cr=function(){function t(e,n){c(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new lr(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return C(t,[{key:"onInputChange_",value:function(t){var e=u(t.currentTarget);this.value.rawValue=e.checked}}]),t}();function hr(t){var e=[],n=nr(t.options);return n&&e.push(n),new we(e)}var pr={id:"input-bool",type:"input",accept:function(t,e){if("boolean"!=typeof t)return null;var n=Y(e,{options:K.optional.custom($n)});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Ie},constraint:function(t){return hr(t.params)},writer:function(t){return Qn}},controller:function(t){var e,n=t.document,r=t.value,i=t.constraint;return i&&ke(i,xe)?new Pe(n,{props:z.fromObject({options:null!==(e=rr(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new cr(n,{value:r,viewProps:t.viewProps})}},vr=g("col"),fr=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(vr()),n.foldable.bindExpandedClass(this.element,vr(void 0,"expanded")),x(n.foldable,"completed",T(this.element,vr(void 0,"cpl")));var r=e.createElement("div");r.classList.add(vr("h")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(vr("s")),r.appendChild(i),this.swatchElement=i;var a=e.createElement("div");if(a.classList.add(vr("t")),r.appendChild(a),this.textElement=a,"inline"===n.pickerLayout){var o=e.createElement("div");o.classList.add(vr("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null};function dr(t,e,n){var r=jn(t/255,0,1),i=jn(e/255,0,1),a=jn(n/255,0,1),o=Math.max(r,i,a),s=Math.min(r,i,a),u=o-s,l=0,c=0,h=(s+o)/2;return 0!==u&&(c=u/(1-Math.abs(o+s-1)),l=(l=r===o?(i-a)/u:i===o?2+(a-r)/u:4+(r-i)/u)/6+(l<0?1:0)),[360*l,100*c,100*h]}function mr(t,e,n){var r,i,a,o,s,u,l,c,h,p=(t%360+360)%360,v=jn(e/100,0,1),f=jn(n/100,0,1),d=(1-Math.abs(2*f-1))*v,m=d*(1-Math.abs(p/60%2-1)),_=f-d/2;return p>=0&&p<60?(r=(o=[d,m,0])[0],i=o[1],a=o[2]):p>=60&&p<120?(r=(s=[m,d,0])[0],i=s[1],a=s[2]):p>=120&&p<180?(r=(u=[0,d,m])[0],i=u[1],a=u[2]):p>=180&&p<240?(r=(l=[0,m,d])[0],i=l[1],a=l[2]):p>=240&&p<300?(r=(c=[m,0,d])[0],i=c[1],a=c[2]):(r=(h=[d,0,m])[0],i=h[1],a=h[2]),[255*(r+_),255*(i+_),255*(a+_)]}function _r(t,e,n){var r=jn(t/255,0,1),i=jn(e/255,0,1),a=jn(n/255,0,1),o=Math.max(r,i,a),s=o-Math.min(r,i,a);return[0===s?0:o===r?((i-a)/s%6+6)%6*60:o===i?60*((a-r)/s+2):60*((r-i)/s+4),100*(0===o?0:s/o),100*o]}function gr(t,e,n){var r,i,a,o,s,u,l,c,h,p=zn(t,360),v=jn(e/100,0,1),f=jn(n/100,0,1),d=f*v,m=d*(1-Math.abs(p/60%2-1)),_=f-d;return p>=0&&p<60?(r=(o=[d,m,0])[0],i=o[1],a=o[2]):p>=60&&p<120?(r=(s=[m,d,0])[0],i=s[1],a=s[2]):p>=120&&p<180?(r=(u=[0,d,m])[0],i=u[1],a=u[2]):p>=180&&p<240?(r=(l=[0,m,d])[0],i=l[1],a=l[2]):p>=240&&p<300?(r=(c=[m,0,d])[0],i=c[1],a=c[2]):(r=(h=[d,0,m])[0],i=h[1],a=h[2]),[255*(r+_),255*(i+_),255*(a+_)]}function yr(t,e,n){var r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]}function br(t,e,n){var r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]}function wr(t){return[t[0],t[1],t[2]]}function kr(t,e){return[t[0],t[1],t[2],e]}var xr={hsl:{hsl:function(t,e,n){return[t,e,n]},hsv:yr,rgb:mr},hsv:{hsl:br,hsv:function(t,e,n){return[t,e,n]},rgb:gr},rgb:{hsl:dr,hsv:_r,rgb:function(t,e,n){return[t,e,n]}}};function Cr(t,e,n){var r;return(r=xr[e])[n].apply(r,B(t))}var Er={hsl:function(t){var e;return[zn(t[0],360),jn(t[1],0,100),jn(t[2],0,100),jn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:function(t){var e;return[zn(t[0],360),jn(t[1],0,100),jn(t[2],0,100),jn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:function(t){var e;return[jn(t[0],0,255),jn(t[1],0,255),jn(t[2],0,255),jn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function Mr(t,e){return"object"==typeof t&&!l(t)&&e in t&&"number"==typeof t[e]}var Tr=function(){function t(e,n){c(this,t),this.mode_=n,this.comps_=Er[n](e)}return C(t,[{key:"mode",get:function(){return this.mode_}},{key:"getComponents",value:function(t){return kr(Cr(wr(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}},{key:"toRgbaObject",value:function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}],[{key:"black",value:function(){return new t([0,0,0],"rgb")}},{key:"fromObject",value:function(e){return new t("a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b],"rgb")}},{key:"toRgbaObject",value:function(t){return t.toRgbaObject()}},{key:"isRgbColorObject",value:function(t){return Mr(t,"r")&&Mr(t,"g")&&Mr(t,"b")}},{key:"isRgbaColorObject",value:function(t){return this.isRgbColorObject(t)&&Mr(t,"a")}},{key:"isColorObject",value:function(t){return this.isRgbColorObject(t)}},{key:"equals",value:function(t,e){if(t.mode_!==e.mode_)return!1;for(var n=t.comps_,r=e.comps_,i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}}]),t}(),Pr=g("colp"),Ar=function(){function t(e,n){c(this,t),this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Pr());var r=e.createElement("div");r.classList.add(Pr("hsv"));var i=e.createElement("div");i.classList.add(Pr("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);var a=e.createElement("div");a.classList.add(Pr("h")),this.hPaletteView_=n.hPaletteView,a.appendChild(this.hPaletteView_.element),r.appendChild(a),this.element.appendChild(r);var o=e.createElement("div");if(o.classList.add(Pr("rgb")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};var s=e.createElement("div");s.classList.add(Pr("a"));var u=e.createElement("div");u.classList.add(Pr("ap")),u.appendChild(this.alphaViews_.palette.element),s.appendChild(u);var l=e.createElement("div");l.classList.add(Pr("at")),l.appendChild(this.alphaViews_.text.element),s.appendChild(l),this.element.appendChild(s)}}return C(t,[{key:"allFocusableElements",get:function(){var t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement].concat(B(this.textView_.textViews.map((function(t){return t.inputElement}))));return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}]),t}();function Sr(t){var e=K;return Y(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(Jn)})}function Vr(t){return t?.1:1}function Or(t,e){var n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}var Dr={deg:function(t){return t},grad:function(t){return 360*t/400},rad:function(t){return 360*t/(2*Math.PI)},turn:function(t){return 360*t}};function Rr(t){var e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);var n=parseFloat(e[1]),r=e[2];return Dr[r](n)}var Lr={"func.rgb":function(t){var e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Or(e[1],255),Or(e[2],255),Or(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new Tr(n,"rgb")},"func.rgba":function(t){var e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Or(e[1],255),Or(e[2],255),Or(e[3],255),Or(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new Tr(n,"rgb")},"func.hsl":function(t){var e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Rr(e[1]),Or(e[2],100),Or(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new Tr(n,"hsl")},"func.hsla":function(t){var e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Rr(e[1]),Or(e[2],100),Or(e[3],100),Or(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new Tr(n,"hsl")},"hex.rgb":function(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new Tr([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");var n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new Tr([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":function(t){var e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new Tr([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Fn(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");var n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new Tr([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Fn(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Ir(t){return Object.keys(Lr).reduce((function(e,n){return e||((0,Lr[n])(t)?n:null)}),null)}var Nr=function(t){var e=Ir(t);return e?Lr[e](t):null};function Fr(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Br(t){if("string"==typeof t){var e=Nr(t);if(e)return e}return Tr.black()}function jr(t){var e=jn(Math.floor(t),0,255).toString(16);return 1===e.length?"0".concat(e):e}function zr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=wr(t.getComponents("rgb")).map(jr).join("");return"".concat(e).concat(n)}function Ur(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=t.getComponents("rgb"),r=[n[0],n[1],n[2],255*n[3]].map(jr).join("");return"".concat(e).concat(r)}function qr(t){var e=wn(0),n=wr(t.getComponents("rgb")).map((function(t){return e(t)}));return"rgb(".concat(n.join(", "),")")}function Wr(t){var e=wn(2),n=wn(0),r=t.getComponents("rgb").map((function(t,r){return(3===r?e:n)(t)}));return"rgba(".concat(r.join(", "),")")}function Gr(t){var e=[wn(0),xn,xn],n=wr(t.getComponents("hsl")).map((function(t,n){return e[n](t)}));return"hsl(".concat(n.join(", "),")")}function Hr(t){var e=[wn(0),xn,xn,wn(2)],n=t.getComponents("hsl").map((function(t,n){return e[n](t)}));return"hsla(".concat(n.join(", "),")")}var Kr={"func.hsl":Gr,"func.hsla":Hr,"func.rgb":qr,"func.rgba":Wr,"hex.rgb":zr,"hex.rgba":Ur};function Yr(t){return Kr[t]}var Xr=g("apl"),Zr=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Xr()),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(Xr("b")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(Xr("c")),r.appendChild(i),this.colorElem_=i;var a=e.createElement("div");a.classList.add(Xr("m")),this.element.appendChild(a),this.markerElem_=a;var o=e.createElement("div");o.classList.add(Xr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}return C(t,[{key:"update_",value:function(){var t=this.value.rawValue,e=t.getComponents("rgb"),n=new Tr([e[0],e[1],e[2],0],"rgb"),r=new Tr([e[0],e[1],e[2],255],"rgb"),i=["to right",Wr(n),Wr(r)];this.colorElem_.style.background="linear-gradient(".concat(i.join(","),")"),this.previewElem_.style.backgroundColor=Wr(t);var a=Fn(e[3],0,1,0,100);this.markerElem_.style.left="".concat(a,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),Qr=function(){function t(e,n){c(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Zr(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return C(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=t.point.x/t.bounds.width,r=F(this.value.rawValue.getComponents("hsv"),3),i=r[0],a=r[1],o=r[2];this.value.setRawValue(new Tr([i,a,o,n],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Vn(Vr(!0),Dn(t));if(0!==e){var n=F(this.value.rawValue.getComponents("hsv"),4),r=n[0],i=n[1],a=n[2],o=n[3];this.value.setRawValue(new Tr([r,i,a,o+e],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Vn(Vr(!0),Dn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),$r=g("coltxt");function Jr(t){var e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce((function(e,n){var r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e}),t.createDocumentFragment())),e}var ti=function(){function t(e,n){var r=this;c(this,t),this.element=e.createElement("div"),this.element.classList.add($r());var i=e.createElement("div");i.classList.add($r("m")),this.modeElem_=Jr(e),this.modeElem_.classList.add($r("ms")),i.appendChild(this.modeSelectElement);var a=e.createElement("div");a.classList.add($r("mm")),a.appendChild(ut(e,"dropdown")),i.appendChild(a),this.element.appendChild(i);var o=e.createElement("div");o.classList.add($r("w")),this.element.appendChild(o),this.textsElem_=o,this.textViews_=n.textViews,this.applyTextViews_(),w(n.colorMode,(function(t){r.modeElem_.value=t}))}return C(t,[{key:"modeSelectElement",get:function(){return this.modeElem_}},{key:"textViews",get:function(){return this.textViews_},set:function(t){this.textViews_=t,this.applyTextViews_()}},{key:"applyTextViews_",value:function(){var t=this;ht(this.textsElem_);var e=this.element.ownerDocument;this.textViews_.forEach((function(n){var r=e.createElement("div");r.classList.add($r("c")),r.appendChild(n.element),t.textsElem_.appendChild(r)}))}}]),t}(),ei=wn(0),ni={rgb:function(){return new Ce({min:0,max:255})},hsl:function(t){return new Ce(0===t?{min:0,max:360}:{min:0,max:100})},hsv:function(t){return new Ce(0===t?{min:0,max:360}:{min:0,max:100})}};function ri(t,e,n){return new Wn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Vr(!1),parser:e.parser,props:z.fromObject({draggingScale:1,formatter:ei}),value:j(0,{constraint:ni[e.colorMode](n)}),viewProps:e.viewProps})}var ii=function(){function t(e,n){c(this,t),this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=n.parser,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=j(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ti(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return C(t,[{key:"createComponentControllers_",value:function(t){var e=this,n={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},r=[ri(t,n,0),ri(t,n,1),ri(t,n,2)];return r.forEach((function(t,n){var r=e;Sn({primary:e.value,secondary:t.value,forward:function(t){return t.rawValue.getComponents(r.colorMode.rawValue)[n]},backward:function(t,e){var i=r.colorMode.rawValue,a=t.rawValue.getComponents(i);return a[n]=e.rawValue,new Tr(kr(wr(a),a[3]),i)}})})),r}},{key:"onModeSelectChange_",value:function(t){var e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}]),t}(),ai=g("hpl"),oi=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ai()),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(ai("c")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(ai("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return C(t,[{key:"update_",value:function(){var t=F(this.value.rawValue.getComponents("hsv"),1)[0];this.markerElem_.style.backgroundColor=qr(new Tr([t,100,100],"hsv"));var e=Fn(t,0,360,0,100);this.markerElem_.style.left="".concat(e,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),si=function(){function t(e,n){c(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new oi(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return C(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=Fn(jn(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),r=F(this.value.rawValue.getComponents("hsv"),4),i=r[1],a=r[2],o=r[3];this.value.setRawValue(new Tr([n,i,a,o],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Vn(Vr(!1),Dn(t));if(0!==e){var n=F(this.value.rawValue.getComponents("hsv"),4),r=n[0],i=n[1],a=n[2],o=n[3];this.value.setRawValue(new Tr([r+e,i,a,o],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Vn(Vr(!1),Dn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),ui=g("svp"),li=64,ci=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ui()),n.viewProps.bindTabIndex(this.element);var r=e.createElement("canvas");r.height=li,r.width=li,r.classList.add(ui("c")),this.element.appendChild(r),this.canvasElement=r;var i=e.createElement("div");i.classList.add(ui("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return C(t,[{key:"update_",value:function(){var t=ot(this.canvasElement);if(t){for(var e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=t.getImageData(0,0,n,r),a=i.data,o=0;o<r;o++)for(var s=0;s<n;s++){var u=Fn(s,0,n,0,100),l=Fn(o,0,r,100,0),c=gr(e[0],u,l),h=4*(o*n+s);a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2],a[h+3]=255}t.putImageData(i,0,0);var p=Fn(e[1],0,100,0,100);this.markerElem_.style.left="".concat(p,"%");var v=Fn(e[2],0,100,100,0);this.markerElem_.style.top="".concat(v,"%")}}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),hi=function(){function t(e,n){c(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ci(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return C(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=Fn(t.point.x,0,t.bounds.width,0,100),r=Fn(t.point.y,0,t.bounds.height,100,0),i=F(this.value.rawValue.getComponents("hsv"),4),a=i[0],o=i[3];this.value.setRawValue(new Tr([a,n,r,o],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){Ln(t.key)&&t.preventDefault();var e=F(this.value.rawValue.getComponents("hsv"),4),n=e[0],r=e[1],i=e[2],a=e[3],o=Vr(!1),s=Vn(o,Dn(t)),u=Vn(o,On(t));0===s&&0===u||this.value.setRawValue(new Tr([n,r+s,i+u,a],"hsv"),{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){var e=Vr(!1),n=Vn(e,Dn(t)),r=Vn(e,On(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),pi=function(){function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new si(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new hi(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Qr(e,{value:this.value,viewProps:this.viewProps}),text:new Wn(e,{parser:gn,baseStep:.1,props:z.fromObject({draggingScale:.01,formatter:wn(2)}),value:j(0,{constraint:new Ce({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Sn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(t){return t.rawValue.getComponents()[3]},backward:function(t,e){var n=t.rawValue.getComponents();return n[3]=e.rawValue,new Tr(n,t.rawValue.mode)}}),this.textC_=new ii(e,{parser:gn,value:this.value,viewProps:this.viewProps}),this.view=new Ar(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}return C(t,[{key:"textController",get:function(){return this.textC_}}]),t}(),vi=g("colsw"),fi=function(){function t(e,n){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(vi()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(vi("sw")),this.element.appendChild(r),this.swatchElem_=r;var i=e.createElement("button");i.classList.add(vi("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}return C(t,[{key:"update_",value:function(){var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Ur(t)}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),di=function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new fi(e,{value:this.value,viewProps:this.viewProps})},mi=function(){function t(e,n){var r=this;c(this,t),this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=wt.create(n.expanded),this.swatchC_=new di(e,{value:this.value,viewProps:this.viewProps});var i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Re(e,{parser:n.parser,props:z.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new fr(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===n.pickerLayout?new Ve(e,{viewProps:this.viewProps}):null;var a=new pi(e,{supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",r.onPopupChildBlur_),t.addEventListener("keydown",r.onPopupChildKeydown_)})),this.pickerC_=a,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(a.view.element),Sn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t.rawValue},backward:function(t,e){return e.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ct(this.foldable_,this.view.pickerElement))}return C(t,[{key:"textController",get:function(){return this.textC_}},{key:"onButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=u(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=vt(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!rt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}]),t}();function _i(t){return Tr.isColorObject(t)?Tr.fromObject(t):Tr.black()}function gi(t){return wr(t.getComponents("rgb")).reduce((function(t,e){return t<<8|255&Math.floor(e)}),0)}function yi(t){return t.getComponents("rgb").reduce((function(t,e,n){return t<<8|255&Math.floor(3===n?255*e:e)}),0)>>>0}function bi(t){return new Tr([t>>16&255,t>>8&255,255&t],"rgb")}function wi(t){return new Tr([t>>24&255,t>>16&255,t>>8&255,Fn(255&t,0,255,0,1)],"rgb")}function ki(t){return"number"!=typeof t?Tr.black():bi(t)}function xi(t){return"number"!=typeof t?Tr.black():wi(t)}function Ci(t){var e=Yr(t);return function(t,n){Qn(t,e(n))}}function Ei(t){var e=t?yi:gi;return function(t,n){Qn(t,e(n))}}function Mi(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function Ti(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function Pi(t){return t?Mi:Ti}function Ai(t){return"alpha"in t&&!0===t.alpha}function Si(t){return t?function(t){return Ur(t,"0x")}:function(t){return zr(t,"0x")}}var Vi={id:"input-color-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;var n=Sr(e);return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Ai(t.params)?xi:ki},equals:Tr.equals,writer:function(t){return Ei(Ai(t.params))}},controller:function(t){var e=Ai(t.params),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new mi(t.document,{expanded:null!=n&&n,formatter:Si(e),parser:Nr,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function Oi(t){return Tr.isRgbaColorObject(t)}var Di={id:"input-color-object",type:"input",accept:function(t,e){if(!Tr.isColorObject(t))return null;var n=Sr(e);return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return _i},equals:Tr.equals,writer:function(t){return Pi(Oi(t.initialValue))}},controller:function(t){var e=Tr.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0,i=e?Ur:zr;return new mi(t.document,{expanded:null!=n&&n,formatter:i,parser:Nr,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Ri={id:"input-color-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!Ir(t))return null;var n=Sr(e);return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Br},equals:Tr.equals,writer:function(t){var e=Ir(t.initialValue);if(!e)throw v.shouldNeverHappen();return Ci(e)}},controller:function(t){var e=Ir(t.initialValue);if(!e)throw v.shouldNeverHappen();var n=Yr(e),r="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new mi(t.document,{expanded:null!=r&&r,formatter:n,parser:Nr,pickerLayout:null!=i?i:"popup",supportsAlpha:Fr(e),value:t.value,viewProps:t.viewProps})}},Li=function(){function t(e){c(this,t),this.components=e.components,this.asm_=e.assembly}return C(t,[{key:"constrain",value:function(t){var e=this,n=this.asm_.toComponents(t).map((function(t,n){var r,i;return null!==(i=null===(r=e.components[n])||void 0===r?void 0:r.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(n)}}]),t}(),Ii=g("pndtxt"),Ni=function t(e,n){var r=this;c(this,t),this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Ii()),this.textViews.forEach((function(t){var n=e.createElement("div");n.classList.add(Ii("a")),n.appendChild(t.element),r.element.appendChild(n)}))};function Fi(t,e,n){return new Wn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:j(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}var Bi=function t(e,n){var r=this;c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((function(t,r){return Fi(e,n,r)})),this.acs_.forEach((function(t,e){Sn({primary:r.value,secondary:t.value,forward:function(t){return n.assembly.toComponents(t.rawValue)[e]},backward:function(t,r){var i=n.assembly.toComponents(t.rawValue);return i[e]=r.rawValue,n.assembly.fromComponents(i)}})})),this.view=new Ni(e,{textViews:this.acs_.map((function(t){return t.view}))})};function ji(t){return"step"in t&&!l(t.step)?new Ee(t.step):null}function zi(t){return"max"in t&&!l(t.max)||"min"in t&&!l(t.min)?new Ce({max:t.max,min:t.min}):null}function Ui(t){var e=[],n=ji(t);n&&e.push(n);var r=zi(t);r&&e.push(r);var i=nr(t.options);return i&&e.push(i),new we(e)}function qi(t){var e=t?ke(t,Ce):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Wi(t){var e=F(qi(t),2),n=e[0],r=e[1];return[null!=n?n:0,null!=r?r:100]}var Gi={id:"input-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;var n=K,r=Y(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom($n),step:n.optional.number});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return yn},constraint:function(t){return Ui(t.params)},writer:function(t){return Qn}},controller:function(t){var e,n,r=t.value,i=t.constraint;if(i&&ke(i,xe))return new Pe(t.document,{props:z.fromObject({options:null!==(e=rr(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps});var a=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:wn(ar(i,r.rawValue));if(i&&ke(i,Ce)){var o=F(Wi(i),2),s=o[0],u=o[1];return new Zn(t.document,{baseStep:or(i),parser:gn,sliderProps:z.fromObject({maxValue:u,minValue:s}),textProps:z.fromObject({draggingScale:sr(i,r.rawValue),formatter:a}),value:r,viewProps:t.viewProps})}return new Wn(t.document,{baseStep:or(i),parser:gn,props:z.fromObject({draggingScale:sr(i,r.rawValue),formatter:a}),value:r,viewProps:t.viewProps})}},Hi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,t),this.x=e,this.y=n}return C(t,[{key:"getComponents",value:function(){return[this.x,this.y]}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}}],[{key:"isObject",value:function(t){if(l(t))return!1;var e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}}]),t}(),Ki={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return k(Hi,B(t))}},Yi=g("p2d"),Xi=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(Yi()),n.viewProps.bindClassModifiers(this.element),w(n.expanded,T(this.element,Yi(void 0,"expanded")));var r=e.createElement("div");r.classList.add(Yi("h")),this.element.appendChild(r);var i=e.createElement("button");i.classList.add(Yi("b")),i.appendChild(ut(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;var a=e.createElement("div");if(a.classList.add(Yi("t")),r.appendChild(a),this.textElement=a,"inline"===n.pickerLayout){var o=e.createElement("div");o.classList.add(Yi("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null},Zi=g("p2dp"),Qi=function(){function t(e,n){c(this,t),this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=n.invertsY,this.maxValue_=n.maxValue,this.element=e.createElement("div"),this.element.classList.add(Zi()),"popup"===n.layout&&this.element.classList.add(Zi(void 0,"p"));var r=e.createElement("div");r.classList.add(Zi("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;var i=e.createElementNS(tt,"svg");i.classList.add(Zi("g")),this.padElement.appendChild(i),this.svgElem_=i;var a=e.createElementNS(tt,"line");a.classList.add(Zi("ax")),a.setAttributeNS(null,"x1","0"),a.setAttributeNS(null,"y1","50%"),a.setAttributeNS(null,"x2","100%"),a.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(a);var o=e.createElementNS(tt,"line");o.classList.add(Zi("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);var s=e.createElementNS(tt,"line");s.classList.add(Zi("l")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(s),this.lineElem_=s;var u=e.createElement("div");u.classList.add(Zi("m")),this.padElement.appendChild(u),this.markerElem_=u,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return C(t,[{key:"allFocusableElements",get:function(){return[this.padElement]}},{key:"update_",value:function(){var t=F(this.value.rawValue.getComponents(),2),e=t[0],n=t[1],r=this.maxValue_,i=Fn(e,-r,+r,0,100),a=Fn(n,-r,+r,0,100),o=this.invertsY_?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(i,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(o,"%")),this.markerElem_.style.left="".concat(i,"%"),this.markerElem_.style.top="".concat(o,"%")}},{key:"onValueChange_",value:function(){this.update_()}},{key:"onFoldableChange_",value:function(){this.update_()}}]),t}();function $i(t,e,n){return[Vn(e[0],Dn(t)),Vn(e[1],On(t))*(n?1:-1)]}var Ji=function(){function t(e,n){c(this,t),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.baseSteps_=n.baseSteps,this.maxValue_=n.maxValue,this.invertsY_=n.invertsY,this.view=new Qi(e,{invertsY:this.invertsY_,layout:n.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return C(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=this.maxValue_,r=Fn(t.point.x,0,t.bounds.width,-n,+n),i=Fn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Hi(r,i),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onPadKeyDown_",value:function(t){Ln(t.key)&&t.preventDefault();var e=F($i(t,this.baseSteps_,this.invertsY_),2),n=e[0],r=e[1];0===n&&0===r||this.value.setRawValue(new Hi(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}},{key:"onPadKeyUp_",value:function(t){var e=F($i(t,this.baseSteps_,this.invertsY_),2),n=e[0],r=e[1];0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),ta=function(){function t(e,n){var r,i,a=this;c(this,t),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=wt.create(n.expanded),this.popC_="popup"===n.pickerLayout?new Ve(e,{viewProps:this.viewProps}):null;var o=new Ji(e,{baseSteps:[n.axes[0].baseStep,n.axes[1].baseStep],invertsY:n.invertsY,layout:n.pickerLayout,maxValue:n.maxValue,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",a.onPopupChildBlur_),t.addEventListener("keydown",a.onPopupChildKeydown_)})),this.pickerC_=o,this.textC_=new Bi(e,{assembly:Ki,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Xi(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Sn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t.rawValue},backward:function(t,e){return e.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ct(this.foldable_,this.view.pickerElement))}return C(t,[{key:"onPadButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=u(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onPadButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=vt(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!rt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}]),t}();function ea(t){return Hi.isObject(t)?new Hi(t.x,t.y):new Hi}function na(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function ra(t){if(t){var e=[];return l(t.step)||e.push(new Ee(t.step)),l(t.max)&&l(t.min)||e.push(new Ce({max:t.max,min:t.min})),new we(e)}}function ia(t){return new Li({assembly:Ki,components:[ra("x"in t?t.x:void 0),ra("y"in t?t.y:void 0)]})}function aa(t,e){var n=t&&ke(t,Ce);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));var r=or(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function oa(t,e){var n=e instanceof Li?e.components[0]:void 0,r=e instanceof Li?e.components[1]:void 0,i=aa(n,t.x),a=aa(r,t.y);return Math.max(i,a)}function sa(t,e){return{baseStep:or(e),constraint:e,textProps:z.fromObject({draggingScale:sr(e,t),formatter:wn(ar(e,t))})}}function ua(t){if(!("y"in t))return!1;var e=t.y;return!!e&&"inverted"in e&&!!e.inverted}var la={id:"input-point2d",type:"input",accept:function(t,e){if(!Hi.isObject(t))return null;var n=K,r=Y(e,{expanded:n.optional.boolean,picker:n.optional.custom(Jn),x:n.optional.custom(tr),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return ea},constraint:function(t){return ia(t.params)},equals:Hi.equals,writer:function(t){return na}},controller:function(t){var e=t.document,n=t.value,r=t.constraint;if(!(r instanceof Li))throw v.shouldNeverHappen();var i="expanded"in t.params?t.params.expanded:void 0,a="picker"in t.params?t.params.picker:void 0;return new ta(e,{axes:[sa(n.rawValue.x,r.components[0]),sa(n.rawValue.y,r.components[1])],expanded:null!=i&&i,invertsY:ua(t.params),maxValue:oa(n.rawValue,r),parser:gn,pickerLayout:null!=a?a:"popup",value:n,viewProps:t.viewProps})}},ca=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c(this,t),this.x=e,this.y=n,this.z=r}return C(t,[{key:"getComponents",value:function(){return[this.x,this.y,this.z]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}}],[{key:"isObject",value:function(t){if(l(t))return!1;var e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}}]),t}(),ha={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return k(ca,B(t))}};function pa(t){return ca.isObject(t)?new ca(t.x,t.y,t.z):new ca}function va(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function fa(t){if(t){var e=[];return l(t.step)||e.push(new Ee(t.step)),l(t.max)&&l(t.min)||e.push(new Ce({max:t.max,min:t.min})),new we(e)}}function da(t){return new Li({assembly:ha,components:[fa("x"in t?t.x:void 0),fa("y"in t?t.y:void 0),fa("z"in t?t.z:void 0)]})}function ma(t,e){return{baseStep:or(e),constraint:e,textProps:z.fromObject({draggingScale:sr(e,t),formatter:wn(ar(e,t))})}}var _a={id:"input-point3d",type:"input",accept:function(t,e){if(!ca.isObject(t))return null;var n=K,r=Y(e,{x:n.optional.custom(tr),y:n.optional.custom(tr),z:n.optional.custom(tr)});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return pa},constraint:function(t){return da(t.params)},equals:ca.equals,writer:function(t){return va}},controller:function(t){var e=t.value,n=t.constraint;if(!(n instanceof Li))throw v.shouldNeverHappen();return new Bi(t.document,{assembly:ha,axes:[ma(e.rawValue.x,n.components[0]),ma(e.rawValue.y,n.components[1]),ma(e.rawValue.z,n.components[2])],parser:gn,value:e,viewProps:t.viewProps})}},ga=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;c(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return C(t,[{key:"getComponents",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}],[{key:"isObject",value:function(t){if(l(t))return!1;var e=t.x,n=t.y,r=t.z,i=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}}]),t}(),ya={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return k(ga,B(t))}};function ba(t){return ga.isObject(t)?new ga(t.x,t.y,t.z,t.w):new ga}function wa(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ka(t){if(t){var e=[];return l(t.step)||e.push(new Ee(t.step)),l(t.max)&&l(t.min)||e.push(new Ce({max:t.max,min:t.min})),new we(e)}}function xa(t){return new Li({assembly:ya,components:[ka("x"in t?t.x:void 0),ka("y"in t?t.y:void 0),ka("z"in t?t.z:void 0),ka("w"in t?t.w:void 0)]})}function Ca(t,e){return{baseStep:or(e),constraint:e,textProps:z.fromObject({draggingScale:sr(e,t),formatter:wn(ar(e,t))})}}var Ea={id:"input-point4d",type:"input",accept:function(t,e){if(!ga.isObject(t))return null;var n=K,r=Y(e,{x:n.optional.custom(tr),y:n.optional.custom(tr),z:n.optional.custom(tr),w:n.optional.custom(tr)});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return ba},constraint:function(t){return xa(t.params)},equals:ga.equals,writer:function(t){return wa}},controller:function(t){var e=t.value,n=t.constraint;if(!(n instanceof Li))throw v.shouldNeverHappen();return new Bi(t.document,{assembly:ya,axes:e.rawValue.getComponents().map((function(t,e){return Ca(t,n.components[e])})),parser:gn,value:e,viewProps:t.viewProps})}};function Ma(t){var e=[],n=nr(t.options);return n&&e.push(n),new we(e)}var Ta={id:"input-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;var n=Y(e,{options:K.optional.custom($n)});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Cn},constraint:function(t){return Ma(t.params)},writer:function(t){return Qn}},controller:function(t){var e,n=t.document,r=t.value,i=t.constraint;return i&&ke(i,xe)?new Pe(n,{props:z.fromObject({options:null!==(e=rr(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new Re(n,{parser:function(t){return t},props:z.fromObject({formatter:En}),value:r,viewProps:t.viewProps})}},Pa={monitor:{defaultInterval:200,defaultLineCount:3}},Aa=g("mll"),Sa=function(){function t(e,n){c(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Aa()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("textarea");r.classList.add(Aa("i")),r.style.height="calc(var(--bld-us) * ".concat(n.lineCount,")"),r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return C(t,[{key:"update_",value:function(){var t=this,e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach((function(e){void 0!==e&&r.push(t.formatter_(e))})),e.textContent=r.join("\n"),n&&(e.scrollTop=e.scrollHeight)}},{key:"onValueUpdate_",value:function(){this.update_()}}]),t}(),Va=function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new Sa(e,{formatter:n.formatter,lineCount:n.lineCount,value:this.value,viewProps:this.viewProps})},Oa=g("sgl"),Da=function(){function t(e,n){c(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Oa()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(Oa("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return C(t,[{key:"update_",value:function(){var t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}},{key:"onValueUpdate_",value:function(){this.update_()}}]),t}(),Ra=function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new Da(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})},La={id:"monitor-bool",type:"monitor",accept:function(t,e){if("boolean"!=typeof t)return null;var n=Y(e,{lineCount:K.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Ie}},controller:function(t){var e;return 1===t.value.rawValue.length?new Ra(t.document,{formatter:Ne,value:t.value,viewProps:t.viewProps}):new Va(t.document,{formatter:Ne,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Pa.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}},Ia=function(){function t(){c(this,t),this.emitter=new m,this.index_=-1}return C(t,[{key:"index",get:function(){return this.index_},set:function(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}]),t}(),Na=g("grl"),Fa=function(){function t(e,n){c(this,t),this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Na()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.minValue_=n.minValue,this.maxValue_=n.maxValue,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var r=e.createElementNS(tt,"svg");r.classList.add(Na("g")),r.style.height="calc(var(--bld-us) * ".concat(n.lineCount,")"),this.element.appendChild(r),this.svgElem_=r;var i=e.createElementNS(tt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var a=e.createElement("div");a.classList.add(Na("t"),g("tt")()),this.element.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return C(t,[{key:"graphElement",get:function(){return this.svgElem_}},{key:"update_",value:function(){var t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach((function(a,o){if(void 0!==a){var s=Fn(o,0,e,0,t.width),u=Fn(a,n,r,t.height,0);i.push([s,u].join(","))}})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));var a=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0!==o){var s=Fn(this.cursor_.index,0,e,0,t.width),u=Fn(o,n,r,t.height,0);a.style.left="".concat(s,"px"),a.style.top="".concat(u,"px"),a.textContent="".concat(this.formatter_(o)),a.classList.contains(Na("t","a"))||(a.classList.add(Na("t","a"),Na("t","in")),et(a),a.classList.remove(Na("t","in")))}else a.classList.remove(Na("t","a"))}},{key:"onValueUpdate_",value:function(){this.update_()}},{key:"onCursorChange_",value:function(){this.update_()}}]),t}(),Ba=function(){function t(e,n){if(c(this,t),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.cursor_=new Ia,this.view=new Fa(e,{cursor:this.cursor_,formatter:n.formatter,lineCount:n.lineCount,maxValue:n.maxValue,minValue:n.minValue,value:this.value,viewProps:this.viewProps}),rt(e)){var r=new Nn(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}return C(t,[{key:"onGraphMouseLeave_",value:function(){this.cursor_.index=-1}},{key:"onGraphMouseMove_",value:function(t){var e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Fn(t.offsetX,0,e.width,0,this.value.rawValue.length))}},{key:"onGraphPointerDown_",value:function(t){this.onGraphPointerMove_(t)}},{key:"onGraphPointerMove_",value:function(t){t.data.point?this.cursor_.index=Math.floor(Fn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}},{key:"onGraphPointerUp_",value:function(){this.cursor_.index=-1}}]),t}();function ja(t){return"format"in t&&!l(t.format)?t.format:wn(2)}function za(t){var e;return 1===t.value.rawValue.length?new Ra(t.document,{formatter:ja(t.params),value:t.value,viewProps:t.viewProps}):new Va(t.document,{formatter:ja(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Pa.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function Ua(t){var e,n,r;return new Ba(t.document,{formatter:ja(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Pa.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0,value:t.value,viewProps:t.viewProps})}function qa(t){return"view"in t&&"graph"===t.view}var Wa={id:"monitor-number",type:"monitor",accept:function(t,e){if("number"!=typeof t)return null;var n=K,r=Y(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:t,params:r}:null},binding:{defaultBufferSize:function(t){return qa(t)?64:1},reader:function(t){return yn}},controller:function(t){return qa(t.params)?Ua(t):za(t)}},Ga={id:"monitor-string",type:"monitor",accept:function(t,e){if("string"!=typeof t)return null;var n=K,r=Y(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return Cn}},controller:function(t){var e,n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new Va(t.document,{formatter:En,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Pa.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Ra(t.document,{formatter:En,value:n,viewProps:t.viewProps})}},Ha=function(){function t(e){c(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new m,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return C(t,[{key:"read",value:function(){var t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}},{key:"write_",value:function(t){this.writer(this.target,t)}},{key:"onValueChange_",value:function(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}]),t}();function Ka(t,e){var n=t.accept(e.target.read(),e.params);if(l(n))return null;var r=K,i={target:e.target,initialValue:n.initialValue,params:n.params},a=t.binding.reader(i),o=t.binding.constraint?t.binding.constraint(i):void 0,s=j(a(n.initialValue),{constraint:o,equals:t.binding.equals}),u=new Ha({reader:a,target:e.target,value:s,writer:t.binding.writer(i)}),c=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,p=t.controller({constraint:o,document:e.document,initialValue:n.initialValue,params:n.params,value:u.value,viewProps:se.create({disabled:c,hidden:h})}),v=r.optional.string(e.params.label).value;return new Ot(e.document,{binding:u,blade:bt(),props:z.fromObject({label:v||e.target.key}),valueController:p})}var Ya=function(){function t(e){c(this,t),this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new m,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return C(t,[{key:"dispose",value:function(){this.ticker.dispose()}},{key:"read",value:function(){var t=this.target.read();if(void 0!==t){var e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=An(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}}},{key:"onTick_",value:function(t){this.read()}}]),t}();function Xa(t,e){return 0===e?new ye:new be(t,null!=e?e:Pa.monitor.defaultInterval)}function Za(t,e){var n,r,i,a=K,o=t.accept(e.target.read(),e.params);if(l(o))return null;var s={target:e.target,initialValue:o.initialValue,params:o.params},u=t.binding.reader(s),c=null!==(r=null!==(n=a.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==r?r:1,h=a.optional.number(e.params.interval).value,p=new Ya({reader:u,target:e.target,ticker:Xa(e.document,h),value:Tn(c)}),v=a.optional.boolean(e.params.disabled).value,f=a.optional.boolean(e.params.hidden).value,d=t.controller({document:e.document,params:o.params,value:p.value,viewProps:se.create({disabled:v,hidden:f})}),m=null!==(i=a.optional.string(e.params.label).value)&&void 0!==i?i:e.target.key;return new Rt(e.document,{binding:p,blade:bt(),props:z.fromObject({label:m}),valueController:d})}var Qa=function(){function t(){c(this,t),this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return C(t,[{key:"getAll",value:function(){return B(this.pluginsMap_.blades).concat(B(this.pluginsMap_.inputs),B(this.pluginsMap_.monitors))}},{key:"register",value:function(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}},{key:"createInput",value:function(t,e,n){if(l(e.read()))throw new v({context:{key:e.key},type:"nomatchingcontroller"});var r=this.pluginsMap_.inputs.reduce((function(r,i){return r||Ka(i,{document:t,target:e,params:n})}),null);if(r)return r;throw new v({context:{key:e.key},type:"nomatchingcontroller"})}},{key:"createMonitor",value:function(t,e,n){var r=this.pluginsMap_.monitors.reduce((function(r,i){return r||Za(i,{document:t,params:n,target:e})}),null);if(r)return r;throw new v({context:{key:e.key},type:"nomatchingcontroller"})}},{key:"createBlade",value:function(t,e){var n=this.pluginsMap_.blades.reduce((function(n,r){return n||ge(r,{document:t,params:e})}),null);if(!n)throw new v({type:"nomatchingview",context:{params:e}});return n}},{key:"createBladeApi",value:function(t){var e=this;if(t instanceof Ot)return new Vt(t);if(t instanceof Rt)return new Dt(t);if(t instanceof Yt)return new Ft(t,this);var n=this.pluginsMap_.blades.reduce((function(n,r){return n||r.api({controller:t,pool:e})}),null);if(!n)throw v.shouldNeverHappen();return n}}]),t}();function $a(){var t=new Qa;return[la,_a,Ea,Ta,Gi,Ri,Di,Vi,pr,La,Ga,Wa,gt,$t,ie,_e].forEach((function(e){t.register(e)})),t}var Ja=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).emitter_=new m,r.controller_.valueController.value.emitter.on("change",(function(t){r.emitter_.emit("change",{event:new i(s(r),t.rawValue)})})),r}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"options",get:function(){return this.controller_.valueController.props.get("options")},set:function(t){this.controller_.valueController.props.set("options",t)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}}]),n}(n),to=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).emitter_=new m,r.controller_.valueController.value.emitter.on("change",(function(t){r.emitter_.emit("change",{event:new i(s(r),t.rawValue)})})),r}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"maxValue",get:function(){return this.controller_.valueController.sliderController.props.get("maxValue")},set:function(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}},{key:"minValue",get:function(){return this.controller_.valueController.sliderController.props.get("minValue")},set:function(t){this.controller_.valueController.sliderController.props.set("minValue",t)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}}]),n}(n),eo=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).emitter_=new m,r.controller_.valueController.value.emitter.on("change",(function(t){r.emitter_.emit("change",{event:new i(s(r),t.rawValue)})})),r}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"formatter",get:function(){return this.controller_.valueController.props.get("formatter")},set:function(t){this.controller_.valueController.props.set("formatter",t)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}}]),n}(n),no={id:"list",type:"blade",accept:function(t){var e=K,n=Y(t,{options:e.required.custom($n),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller:function(t){var e=new Pe(t.document,{props:z.fromObject({options:er(t.params.options)}),value:j(t.params.value),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:z.fromObject({label:t.params.label}),valueController:e})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof Pe?new Ja(t.controller):null}};function ro(t){return t.reduce((function(t,e){return Object.assign(t,A({},e.presetKey,e.read()))}),{})}function io(t,e){t.forEach((function(t){var n=e[t.presetKey];void 0!==n&&t.write(n)}))}var ao=function(t){O(n,t);var e=P(n);function n(t,r){return c(this,n),e.call(this,t,r)}return C(n,[{key:"element",get:function(){return this.controller_.view.element}},{key:"importPreset",value:function(t){io(this.controller_.rackController.rack.find(Ot).map((function(t){return t.binding.target})),t),this.refresh()}},{key:"exportPreset",value:function(){return ro(this.controller_.rackController.rack.find(Ot).map((function(t){return t.binding.target})))}},{key:"refresh",value:function(){this.controller_.rackController.rack.find(Ot).forEach((function(t){t.binding.read()})),this.controller_.rackController.rack.find(Rt).forEach((function(t){t.binding.read()}))}}]),n}(Bt),oo=function(t){O(n,t);var e=P(n);function n(t,r){return c(this,n),e.call(this,t,{expanded:r.expanded,blade:r.blade,props:r.props,root:!0,viewProps:r.viewProps})}return n}(Qt),so={id:"slider",type:"blade",accept:function(t){var e=K,n=Y(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller:function(t){var e,n,r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new Zn(t.document,{baseStep:1,parser:gn,sliderProps:z.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:z.fromObject({draggingScale:sr(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:bn}),value:j(r),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:z.fromObject({label:t.params.label}),valueController:i})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof Zn?new to(t.controller):null}},uo={id:"text",type:"blade",accept:function(t){var e=K,n=Y(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller:function(t){var e,n=new Re(t.document,{parser:t.params.parse,props:z.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:function(t){return String(t)}}),value:j(t.params.value),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:z.fromObject({label:t.params.label}),valueController:n})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof Re?new eo(t.controller):null}};function lo(t){var e=t.createElement("div");return e.classList.add(g("dfw")()),t.body&&t.body.appendChild(e),e}function co(t,e,n){if(!t.querySelector("style[data-tp-style=".concat(e,"]"))){var r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}}var ho=function(t){O(n,t);var e=P(n);function n(t){var r,i;c(this,n);var a=t||{},o=null!==(i=a.document)&&void 0!==i?i:at(),s=$a(),u=new oo(o,{expanded:a.expanded,blade:bt(),props:z.fromObject({title:a.title}),viewProps:se.create()});return(r=e.call(this,u,s)).pool_=s,r.containerElem_=a.container||lo(o),r.containerElem_.appendChild(r.element),r.doc_=o,r.usesDefaultWrapper_=!a.container,r.setUpDefaultPlugins_(),r}return C(n,[{key:"document",get:function(){if(!this.doc_)throw v.alreadyDisposed();return this.doc_}},{key:"dispose",value:function(){var t=this.containerElem_;if(!t)throw v.alreadyDisposed();if(this.usesDefaultWrapper_){var e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,V(M(n.prototype),"dispose",this).call(this)}},{key:"registerPlugin",value:function(t){var e=this;("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((function(t){e.pool_.register(t),e.embedPluginStyle_(t)}))}},{key:"embedPluginStyle_",value:function(t){t.css&&co(this.document,"plugin-".concat(t.id),t.css)}},{key:"setUpDefaultPlugins_",value:function(){var t=this;co(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((function(e){t.embedPluginStyle_(e)})),this.registerPlugin({plugins:[so,no,_e,uo]})}}]),n}(ao),po=new e("3.0.8");t.BladeApi=n,t.ButtonApi=d,t.FolderApi=Bt,t.InputBindingApi=Vt,t.ListApi=Ja,t.MonitorBindingApi=Dt,t.Pane=ho,t.SeparatorApi=te,t.SliderApi=to,t.TabApi=ve,t.TabPageApi=pe,t.TextApi=eo,t.TpChangeEvent=i,t.VERSION=po,Object.defineProperty(t,"__esModule",{value:!0})}(o);var j={};!function(t){"use strict";var e=function(){function t(e){c(this,t),this.controller_=e}return C(t,[{key:"disabled",get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)}},{key:"hidden",get:function(){return this.controller_.viewProps.get("hidden")},set:function(t){this.controller_.viewProps.set("hidden",t)}},{key:"dispose",value:function(){this.controller_.viewProps.set("disposed",!0)}}]),t}(),n=function t(e){c(this,t),this.target=e},r=function(t){O(n,t);var e=P(n);function n(t,r,i,a){var o;return c(this,n),(o=e.call(this,t)).value=r,o.presetKey=i,o.last=null==a||a,o}return n}(n);function i(t){return t}function a(t){return null==t}var o={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '".concat(t.name,"'")},nomatchingcontroller:function(t){return"No matching controller for '".concat(t.key,"'")},nomatchingview:function(t){return"No matching view for '".concat(JSON.stringify(t.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(t){return"Property '".concat(t.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},u=function(){function t(e){var n;c(this,t),this.message=null!==(n=o[e.type](i(e.context)))&&void 0!==n?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return C(t,null,[{key:"alreadyDisposed",value:function(){return new t({type:"alreadydisposed"})}},{key:"notBindable",value:function(){return new t({type:"notbindable"})}},{key:"propertyNotFound",value:function(e){return new t({type:"propertynotfound",context:{name:e}})}},{key:"shouldNeverHappen",value:function(){return new t({type:"shouldneverhappen"})}}]),t}(),l=function(){function t(){c(this,t),this.observers_={}}return C(t,[{key:"on",value:function(t,e){var n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}},{key:"off",value:function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter((function(t){return t.handler!==e}))),this}},{key:"emit",value:function(t,e){var n=this.observers_[t];n&&n.forEach((function(t){t.handler(e)}))}}]),t}(),h="tp";function p(t){return function(e,n){return[h,"-",t,"v",e?"_".concat(e):"",n?"-".concat(n):""].join("")}}function v(t,e){return function(n){return e(t(n))}}function f(t){return t.rawValue}function d(t,e){t.emitter.on("change",v(f,e)),e(t.rawValue)}function m(t,e,n){d(t.value(e),n)}function _(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function g(t,e){return function(n){_(t,e,n)}}function y(t,e){d(t,(function(t){e.textContent=null!=t?t:""}))}var b=p("btn"),w=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(b()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("button");r.classList.add(b("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var i=e.createElement("div");i.classList.add(b("t")),y(n.props.value("title"),i),this.buttonElement.appendChild(i)},x=function(){function t(e,n){c(this,t),this.emitter=new l,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new w(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return C(t,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),t}(),E=function(){function t(e,n){var r;c(this,t),this.constraint_=null==n?void 0:n.constraint,this.equals_=null!==(r=null==n?void 0:n.equals)&&void 0!==r?r:function(t,e){return t===e},this.emitter=new l,this.rawValue_=e}return C(t,[{key:"constraint",get:function(){return this.constraint_}},{key:"rawValue",get:function(){return this.rawValue_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}]),t}(),M=function(){function t(e){c(this,t),this.emitter=new l,this.value_=e}return C(t,[{key:"rawValue",get:function(){return this.value_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}]),t}();function T(t,e){var n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new E(t,e):new M(t)}var S=function(){function t(e){var n=this,r=function(t){var e=n;n.valMap_[t].emitter.on("change",(function(){e.emitter.emit("change",{key:t,sender:e})}))};for(var i in c(this,t),this.emitter=new l,this.valMap_=e,this.valMap_)r(i)}return C(t,[{key:"get",value:function(t){return this.valMap_[t].rawValue}},{key:"set",value:function(t,e){this.valMap_[t].rawValue=e}},{key:"value",value:function(t){return this.valMap_[t]}}],[{key:"createCore",value:function(t){return Object.keys(t).reduce((function(e,n){return Object.assign(e,A({},n,T(t[n])))}),{})}},{key:"fromObject",value:function(e){return new t(this.createCore(e))}}]),t}();function V(t,e){return i(Object.keys(e).reduce((function(n,r){if(void 0!==n){var i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),A({},r,i.value)):void 0}}),{}))}function D(t,e){return t.reduce((function(t,n){if(void 0!==t){var r=e(n);if(r.succeeded&&void 0!==r.value)return B(t).concat([r.value])}}),[])}function R(t){return null!==t&&"object"==typeof t}function L(t){return function(e){return function(n){if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};var r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}}function I(t){return{custom:function(e){return L(e)(t)},boolean:L((function(t){return"boolean"==typeof t?t:void 0}))(t),number:L((function(t){return"number"==typeof t?t:void 0}))(t),string:L((function(t){return"string"==typeof t?t:void 0}))(t),function:L((function(t){return"function"==typeof t?t:void 0}))(t),constant:function(e){return L((function(t){return t===e?e:void 0}))(t)},raw:L((function(t){return t}))(t),object:function(e){return L((function(t){if(R(t))return V(t,e)}))(t)},array:function(e){return L((function(t){if(Array.isArray(t))return D(t,e)}))(t)}}}var N={optional:I(!0),required:I(!1)};function j(t,e){var n=N.required.object(e)(t);return n.succeeded?n.value:void 0}function z(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function U(){return["veryfirst","first","last","verylast"]}var q=p(""),W={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},G=function(){function t(e){var n=this;c(this,t),this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var r=this.view.element;this.blade.value("positions").emitter.on("change",(function(){U().forEach((function(t){r.classList.remove(q(void 0,W[t]))})),n.blade.get("positions").forEach((function(t){r.classList.add(q(void 0,W[t]))}))})),this.viewProps.handleDispose((function(){z(r)}))}return C(t,[{key:"parent",get:function(){return this.parent_}}]),t}(),H="http://www.w3.org/2000/svg";function K(t){t.offsetHeight}function Y(t,e){var n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function X(t){return void 0!==t.ontouchstart}function Z(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function Q(t){return t.relatedTarget?i(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}var $=p("lbl");function J(t,e){var n=t.createDocumentFragment();return e.split("\n").map((function(e){return t.createTextNode(e)})).forEach((function(e,r){r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}var tt=function t(e,n){var r=this;c(this,t),this.element=e.createElement("div"),this.element.classList.add($()),n.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add($("l")),m(n.props,"label",(function(t){a(t)?r.element.classList.add($(void 0,"nol")):(r.element.classList.remove($(void 0,"nol")),Z(i),i.appendChild(J(e,t)))})),this.element.appendChild(i),this.labelElement=i;var o=e.createElement("div");o.classList.add($("v")),this.element.appendChild(o),this.valueElement=o},et=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=r.valueController.viewProps;return(i=e.call(this,Object.assign(Object.assign({},r),{view:new tt(t,{props:r.props,viewProps:a}),viewProps:a}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return n}(G),nt=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).value=t.value,r}return n}(G),rt=function(t){O(n,t);var e=P(n);function n(t){return c(this,n),e.call(this,t)}return C(n,[{key:"styleExpanded",get:function(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}},{key:"styleHeight",get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!a(t)?"".concat(t,"px"):"auto"}},{key:"bindExpandedClass",value:function(t,e){var n=this;m(this,"expanded",(function(){n.styleExpanded?t.classList.add(e):t.classList.remove(e)}))}}],[{key:"create",value:function(t){var e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null};return new n(S.createCore(e))}}]),n}(S);function it(t){return rt.create(t)}function at(t,e){var n=0;return Y(e,(function(){t.set("expandedHeight",null),t.set("temporaryExpanded",!0),K(e),n=e.clientHeight,t.set("temporaryExpanded",null),K(e)})),n}function ot(t,e){e.style.height=t.styleHeight}function st(t,e){t.value("expanded").emitter.on("beforechange",(function(){t.set("completed",!1),a(t.get("expandedHeight"))&&t.set("expandedHeight",at(t,e)),t.set("shouldFixHeight",!0),K(e)})),t.emitter.on("change",(function(){ot(t,e)})),ot(t,e),e.addEventListener("transitionend",(function(e){"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))}))}var ut=function t(e,n){c(this,t);var r=p(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)},lt=function(t){O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=r.valueController.viewProps;return(i=e.call(this,Object.assign(Object.assign({},r),{value:r.valueController.value,view:new tt(t,{props:r.props,viewProps:a}),viewProps:a}))).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return n}(nt),ct=p("");function ht(t,e){return g(t,ct(void 0,e))}var pt=function(t){O(n,t);var e=P(n);function n(t){return c(this,n),e.call(this,t)}return C(n,[{key:"bindClassModifiers",value:function(t){m(this,"disabled",ht(t,"disabled")),m(this,"hidden",ht(t,"hidden"))}},{key:"bindDisabled",value:function(t){m(this,"disabled",(function(e){t.disabled=e}))}},{key:"bindTabIndex",value:function(t){m(this,"disabled",(function(e){t.tabIndex=e?-1:0}))}},{key:"handleDispose",value:function(t){this.value("disposed").emitter.on("change",(function(e){e&&t()}))}}],[{key:"create",value:function(t){var e,r,i=null!=t?t:{},a={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(r=i.hidden)&&void 0!==r&&r};return new n(S.createCore(a))}}]),n}(S),vt=function(){function t(){c(this,t),this.disabled=!1,this.emitter=new l}return C(t,[{key:"dispose",value:function(){}},{key:"tick",value:function(){this.disabled||this.emitter.emit("tick",{sender:this})}}]),t}(),ft=function(){function t(e,n){c(this,t),this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new l,this.interval_=n,this.setTimer_()}return C(t,[{key:"disabled",get:function(){return this.disabled_},set:function(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}},{key:"dispose",value:function(){this.clearTimer_()}},{key:"clearTimer_",value:function(){if(null!==this.timerId_){var t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}}},{key:"setTimer_",value:function(){if(this.clearTimer_(),!(this.interval_<=0)){var t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}}},{key:"onTick_",value:function(){this.disabled_||this.emitter.emit("tick",{sender:this})}}]),t}(),dt=function(){function t(e){c(this,t),this.constraints=e}return C(t,[{key:"constrain",value:function(t){return this.constraints.reduce((function(t,e){return e.constrain(t)}),t)}}]),t}();function mt(t,e){if(t instanceof e)return t;if(t instanceof dt){var n=t.constraints.reduce((function(t,n){return t||(n instanceof e?n:null)}),null);if(n)return n}return null}var _t=function(){function t(e){c(this,t),this.maxValue=e.max,this.minValue=e.min}return C(t,[{key:"constrain",value:function(t){var e=t;return a(this.minValue)||(e=Math.max(e,this.minValue)),a(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}]),t}(),gt=function(){function t(e){c(this,t),this.step=e}return C(t,[{key:"constrain",value:function(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}]),t}(),yt=p("pop"),bt=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(yt()),n.viewProps.bindClassModifiers(this.element),d(n.shows,g(this.element,yt(void 0,"v")))},wt=function t(e,n){c(this,t),this.shows=T(!1),this.viewProps=n.viewProps,this.view=new bt(e,{shows:this.shows,viewProps:this.viewProps})},kt=p("txt"),xt=function(){function t(e,n){c(this,t),this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(kt()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);var r=e.createElement("input");r.classList.add(kt("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}return C(t,[{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),Ct=function(){function t(e,n){c(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new xt(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return C(t,[{key:"onInputChange_",value:function(t){var e=i(t.currentTarget).value,n=this.parser_(e);a(n)||(this.value.rawValue=n),this.view.refresh()}}]),t}(),Et=function(){function t(e){c(this,t),this.text=e}return C(t,[{key:"evaluate",value:function(){return Number(this.text)}},{key:"toString",value:function(){return this.text}}]),t}(),Mt={"**":function(t,e){return Math.pow(t,e)},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"&":function(t,e){return t&e},"^":function(t,e){return t^e},"|":function(t,e){return t|e}},Tt=function(){function t(e,n,r){c(this,t),this.left=n,this.operator=e,this.right=r}return C(t,[{key:"evaluate",value:function(){var t=Mt[this.operator];if(!t)throw new Error("unexpected binary operator: '".concat(this.operator));return t(this.left.evaluate(),this.right.evaluate())}},{key:"toString",value:function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}]),t}(),Pt={"+":function(t){return t},"-":function(t){return-t},"~":function(t){return~t}},At=function(){function t(e,n){c(this,t),this.operator=e,this.expression=n}return C(t,[{key:"evaluate",value:function(){var t=Pt[this.operator];if(!t)throw new Error("unexpected unary operator: '".concat(this.operator));return t(this.expression.evaluate())}},{key:"toString",value:function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}]),t}();function St(t){return function(e,n){for(var r=0;r<t.length;r++){var i=t[r](e,n);if(""!==i)return i}return""}}function Vt(t,e){var n,r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ot(t,e){var n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Dt(t,e){var n,r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Rt(t,e){var n=Dt(t,e);if(""!==n)return n;var r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";var i=Dt(t,e+=1);return""===i?"":r+i}function Lt(t,e){var n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";var r=Rt(t,e);return""===r?"":n+r}function It(t,e){var n=t.substr(e,1);if("0"===n)return n;var r=Ot(t,e);return e+=r.length,""===r?"":r+Dt(t,e)}function Nt(t,e){var n=It(t,e);if(e+=n.length,""===n)return"";var r=t.substr(e,1);if(e+=r.length,"."!==r)return"";var i=Dt(t,e);return n+r+i+Lt(t,e+=i.length)}function Ft(t,e){var n=t.substr(e,1);if(e+=n.length,"."!==n)return"";var r=Dt(t,e);return e+=r.length,""===r?"":n+r+Lt(t,e)}function Bt(t,e){var n=It(t,e);return e+=n.length,""===n?"":n+Lt(t,e)}var jt=St([Nt,Ft,Bt]);function zt(t,e){var n,r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ut(t,e){var n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";var r=zt(t,e);return""===r?"":n+r}function qt(t,e){var n,r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Wt(t,e){var n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";var r=qt(t,e);return""===r?"":n+r}function Gt(t,e){var n,r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ht(t,e){var n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";var r=Gt(t,e);return""===r?"":n+r}var Kt=St([Ut,Wt,Ht]),Yt=St([Kt,jt]);function Xt(t,e){var n=Yt(t,e);return e+=n.length,""===n?null:{evaluable:new Et(n),cursor:e}}function Zt(t,e){var n=t.substr(e,1);if(e+=n.length,"("!==n)return null;var r=ne(t,e);if(!r)return null;e=r.cursor,e+=Vt(t,e).length;var i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}function Qt(t,e){return Xt(t,e)||Zt(t,e)}function $t(t,e){var n=Qt(t,e);if(n)return n;var r=t.substr(e,1);if(e+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;var i=$t(t,e);return i?{cursor:e=i.cursor,evaluable:new At(r,i.evaluable)}:null}function Jt(t,e,n){n+=Vt(e,n).length;var r=t.filter((function(t){return e.startsWith(t,n)}))[0];return r?(n+=r.length,{cursor:n+=Vt(e,n).length,operator:r}):null}function te(t,e){return function(n,r){var i=t(n,r);if(!i)return null;r=i.cursor;for(var a=i.evaluable;;){var o=Jt(e,n,r);if(!o)break;r=o.cursor;var s=t(n,r);if(!s)return null;r=s.cursor,a=new Tt(o.operator,a,s.evaluable)}return a?{cursor:r,evaluable:a}:null}}var ee=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((function(t,e){return te(t,e)}),$t);function ne(t,e){return e+=Vt(t,e).length,ee(t,e)}function re(t){var e=ne(t,0);return e?e.cursor+Vt(t,e.cursor).length!==t.length?null:e.evaluable:null}function ie(t){var e,n=re(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function ae(t){if("number"==typeof t)return t;if("string"==typeof t){var e=ie(t);if(!a(e))return e}return 0}function oe(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}function se(t,e){for(;t.length<e;)t.push(void 0)}function ue(t){var e=[];return se(e,t),T(e)}function le(t){var e=t.indexOf(void 0);return i(e<0?t:t.slice(0,e))}function ce(t,e){var n=B(le(t)).concat([e]);return n.length>t.length?n.splice(0,n.length-t.length):se(n,t.length),n}function he(t){var e=t.primary,n=t.secondary,r=t.forward,i=t.backward,a=!1;function o(t){a||(a=!0,t(),a=!1)}e.emitter.on("change",(function(t){o((function(){n.setRawValue(r(e,n),t.options)}))})),n.emitter.on("change",(function(t){o((function(){e.setRawValue(i(e,n),t.options)})),o((function(){n.setRawValue(r(e,n),t.options)}))})),o((function(){n.setRawValue(r(e,n),{forceEmit:!1,last:!0})}))}function pe(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function ve(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function fe(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function de(t){return"ArrowUp"===t||"ArrowDown"===t}function me(t){return de(t)||"ArrowLeft"===t||"ArrowRight"===t}function _e(t,e){var n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}var ge=function(){function t(e){c(this,t),this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new l,e.addEventListener("touchstart",this.onTouchStart_),e.addEventListener("touchmove",this.onTouchMove_),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return C(t,[{key:"computePosition_",value:function(t){var e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}},{key:"onMouseDown_",value:function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(_e(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseMove_",value:function(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(_e(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseUp_",value:function(t){var e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(_e(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onTouchStart_",value:function(t){t.preventDefault();var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchMove_",value:function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchEnd_",value:function(t){var e,n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}]),t}();function ye(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function be(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function we(t,e,n){return Math.min(Math.max(t,e),n)}var ke=p("txt"),xe=function(){function t(e,n){c(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ke(),ke(void 0,"num")),n.arrayPosition&&this.element.classList.add(ke(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(ke("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ke()),this.inputElement.classList.add(ke("i"));var i=e.createElement("div");i.classList.add(ke("k")),this.element.appendChild(i),this.knobElement=i;var a=e.createElementNS(H,"svg");a.classList.add(ke("g")),this.knobElement.appendChild(a);var o=e.createElementNS(H,"path");o.classList.add(ke("gb")),a.appendChild(o),this.guideBodyElem_=o;var s=e.createElementNS(H,"path");s.classList.add(ke("gh")),a.appendChild(s),this.guideHeadElem_=s;var u=e.createElement("div");u.classList.add(p("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}return C(t,[{key:"onDraggingChange_",value:function(t){if(null!==t.rawValue){this.element.classList.add(ke(void 0,"drg"));var e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=we(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(e,",-1 L").concat(e,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(e,",4"));var i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left="".concat(e,"px")}else this.element.classList.remove(ke(void 0,"drg"))}},{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),Ce=function(){function t(e,n){c(this,t),this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=T(null),this.view=new xe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new ge(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return C(t,[{key:"onInputChange_",value:function(t){var e=i(t.currentTarget).value,n=this.parser_(e);a(n)||(this.value.rawValue=n),this.view.refresh()}},{key:"onInputKeyDown_",value:function(t){var e=pe(this.baseStep_,ve(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}},{key:"onInputKeyUp_",value:function(t){0!==pe(this.baseStep_,ve(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},{key:"onPointerDown_",value:function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}},{key:"computeDraggingValue_",value:function(t){if(!t.point)return null;var e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}},{key:"onPointerMove_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}},{key:"onPointerUp_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}]),t}();function Ee(t,e){t.write(e)}function Me(t){var e=t?mt(t,gt):null;return e?e.step:null}function Te(t,e){var n=t&&mt(t,gt);return n?be(n.step):Math.max(be(e),2)}function Pe(t){var e=Me(t);return null!=e?e:1}function Ae(t,e){var n,r=t&&mt(t,gt),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}var Se=function(){function t(e){c(this,t),this.components=e.components,this.asm_=e.assembly}return C(t,[{key:"constrain",value:function(t){var e=this,n=this.asm_.toComponents(t).map((function(t,n){var r,i;return null!==(i=null===(r=e.components[n])||void 0===r?void 0:r.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(n)}}]),t}(),Ve=p("pndtxt"),Oe=function t(e,n){var r=this;c(this,t),this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Ve()),this.textViews.forEach((function(t){var n=e.createElement("div");n.classList.add(Ve("a")),n.appendChild(t.element),r.element.appendChild(n)}))};function De(t,e,n){return new Ce(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:T(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}var Re=function t(e,n){var r=this;c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((function(t,r){return De(e,n,r)})),this.acs_.forEach((function(t,e){he({primary:r.value,secondary:t.value,forward:function(t){return n.assembly.toComponents(t.rawValue)[e]},backward:function(t,r){var i=n.assembly.toComponents(t.rawValue);return i[e]=r.rawValue,n.assembly.fromComponents(i)}})})),this.view=new Oe(e,{textViews:this.acs_.map((function(t){return t.view}))})};function Le(t){return"step"in t&&!a(t.step)?new gt(t.step):null}function Ie(t){return"max"in t&&!a(t.max)||"min"in t&&!a(t.min)?new _t({max:t.max,min:t.min}):null}var Ne={monitor:{defaultInterval:200,defaultLineCount:3}},Fe=function(){function t(){c(this,t),this.emitter=new l,this.index_=-1}return C(t,[{key:"index",get:function(){return this.index_},set:function(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}]),t}(),Be=p("grl"),je=function(){function t(e,n){c(this,t),this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Be()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.minValue_=n.minValue,this.maxValue_=n.maxValue,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var r=e.createElementNS(H,"svg");r.classList.add(Be("g")),r.style.height="calc(var(--bld-us) * ".concat(n.lineCount,")"),this.element.appendChild(r),this.svgElem_=r;var i=e.createElementNS(H,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var a=e.createElement("div");a.classList.add(Be("t"),p("tt")()),this.element.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return C(t,[{key:"graphElement",get:function(){return this.svgElem_}},{key:"update_",value:function(){var t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach((function(a,o){if(void 0!==a){var s=ye(o,0,e,0,t.width),u=ye(a,n,r,t.height,0);i.push([s,u].join(","))}})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));var a=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0!==o){var s=ye(this.cursor_.index,0,e,0,t.width),u=ye(o,n,r,t.height,0);a.style.left="".concat(s,"px"),a.style.top="".concat(u,"px"),a.textContent="".concat(this.formatter_(o)),a.classList.contains(Be("t","a"))||(a.classList.add(Be("t","a"),Be("t","in")),K(a),a.classList.remove(Be("t","in")))}else a.classList.remove(Be("t","a"))}},{key:"onValueUpdate_",value:function(){this.update_()}},{key:"onCursorChange_",value:function(){this.update_()}}]),t}(),ze=function(){function t(e,n){if(c(this,t),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.cursor_=new Fe,this.view=new je(e,{cursor:this.cursor_,formatter:n.formatter,lineCount:n.lineCount,maxValue:n.maxValue,minValue:n.minValue,value:this.value,viewProps:this.viewProps}),X(e)){var r=new ge(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}return C(t,[{key:"onGraphMouseLeave_",value:function(){this.cursor_.index=-1}},{key:"onGraphMouseMove_",value:function(t){var e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(ye(t.offsetX,0,e.width,0,this.value.rawValue.length))}},{key:"onGraphPointerDown_",value:function(t){this.onGraphPointerMove_(t)}},{key:"onGraphPointerMove_",value:function(t){t.data.point?this.cursor_.index=Math.floor(ye(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}},{key:"onGraphPointerUp_",value:function(){this.cursor_.index=-1}}]),t}(),Ue=function(){function t(e){c(this,t),this.controller_=e}return C(t,[{key:"disabled",get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)}},{key:"title",get:function(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller_.props.set("title",t)}},{key:"on",value:function(t,e){var r=this,i=e.bind(this);return this.controller_.emitter.on(t,(function(){i(new n(r))})),this}}]),t}(),qe=function(t){O(n,t);var e=P(n);function n(t,r,i){var a;return c(this,n),(a=e.call(this,t)).cell=r,a.index=i,a}return n}(n),We=function(t){O(n,t);var e=P(n);function n(t){var r;c(this,n),(r=e.call(this,t)).cellToApiMap_=new Map,r.emitter_=new l;var i=r.controller_.valueController;return i.cellControllers.forEach((function(t,e){var n=new Ue(t);r.cellToApiMap_.set(t,n),t.emitter.on("click",(function(){var t=e%i.size[0],a=Math.floor(e/i.size[0]);r.emitter_.emit("click",{event:new qe(s(r),n,[t,a])})}))})),r}return C(n,[{key:"cell",value:function(t,e){var n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t.event)})),this}}]),n}(e),Ge=function(){function t(e,n){var r=this;c(this,t),this.size=n.size;for(var i=F(this.size,2),a=i[0],o=i[1],s=[],u=0;u<o;u++)for(var l=0;l<a;l++){var h=new x(e,{props:S.fromObject(Object.assign({},n.cellConfig(l,u))),viewProps:pt.create()});s.push(h)}this.cellCs_=s,this.viewProps=pt.create(),this.viewProps.handleDispose((function(){r.cellCs_.forEach((function(t){t.viewProps.set("disposed",!0)}))})),this.view=new ut(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns="repeat(".concat(a,", 1fr)"),this.cellCs_.forEach((function(t){r.view.element.appendChild(t.view.element)}))}return C(t,[{key:"cellControllers",get:function(){return this.cellCs_}}]),t}(),He={id:"buttongrid",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept:function(t){var e=N,n=j(t,{cells:e.required.function,size:e.required.array(e.required.number),view:e.required.constant("buttongrid"),label:e.optional.string});return n?{params:n}:null},controller:function(t){return new et(t.document,{blade:t.blade,props:S.fromObject({label:t.params.label}),valueController:new Ge(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api:function(t){return t.controller instanceof et&&t.controller.valueController instanceof Ge?new We(t.controller):null}},Ke=function(t){O(n,t);var e=P(n);function n(){return c(this,n),e.apply(this,arguments)}return C(n,[{key:"label",get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)}},{key:"value",get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t}},{key:"on",value:function(t,e){var n=this,i=e.bind(this);return this.controller_.valueController.value.emitter.on(t,(function(t){i(new r(n,t.rawValue,void 0,t.options.last))})),this}}]),n}(e);function Ye(t,e,n){return t*(1-n)+e*n}var Xe=20,Ze=.001,Qe=100;function $e(t,e){for(var n=.25,r=.5,i=-1,a=0;a<Xe;a++){var o=F(t.curve(r),2),s=o[0];if(r+=n*(s<e?1:-1),i=o[1],n*=.5,Math.abs(e-s)<Ze)break}return i}var Je=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;c(this,t),this.cache_=[],this.comps_=[e,n,r,i]}return C(t,[{key:"x1",get:function(){return this.comps_[0]}},{key:"y1",get:function(){return this.comps_[1]}},{key:"x2",get:function(){return this.comps_[2]}},{key:"y2",get:function(){return this.comps_[3]}},{key:"curve",value:function(t){var e=Ye(0,this.x1,t),n=Ye(0,this.y1,t),r=Ye(this.x1,this.x2,t),i=Ye(this.y1,this.y2,t),a=Ye(this.x2,1,t),o=Ye(this.y2,1,t),s=Ye(e,r,t),u=Ye(n,i,t),l=Ye(r,a,t),c=Ye(i,o,t);return[Ye(s,l,t),Ye(u,c,t)]}},{key:"y",value:function(t){if(0===this.cache_.length){for(var e=[],n=0;n<Qe;n++)e.push($e(this,ye(n,0,Qe-1,0,1)));this.cache_=e}return this.cache_[Math.round(ye(we(t,0,1),0,1,0,Qe-1))]}},{key:"toObject",value:function(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}],[{key:"isObject",value:function(t){return!a(t)&&!!Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]}},{key:"equals",value:function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}}]),t}(),tn={toComponents:function(t){return t.toObject()},fromComponents:function(t){return k(Je,B(t))}};function en(t){var e=oe(2),n=t.toObject().map((function(t){return e(t)}));return"cubic-bezier(".concat(n.join(", "),")")}var nn=[0,.5,.5,1];function rn(t){var e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return k(Je,B(nn));var n=[e[1],e[2],e[3],e[4]].reduce((function(t,e){if(!t)return null;var n=Number(e);return isNaN(n)?null:B(t).concat([n])}),[]);return k(Je,B(null!=n?n:nn))}var an=p("cbz"),on=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(an()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,an(void 0,"expanded")),m(n.foldable,"completed",g(this.element,an(void 0,"cpl")));var r=e.createElement("div");r.classList.add(an("h")),this.element.appendChild(r);var i=e.createElement("button");i.classList.add(an("b")),n.viewProps.bindDisabled(i);var a=e.createElementNS(H,"svg");a.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(a),r.appendChild(i),this.buttonElement=i;var o=e.createElement("div");if(o.classList.add(an("t")),r.appendChild(o),this.textElement=o,"inline"===n.pickerLayout){var s=e.createElement("div");s.classList.add(an("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null},sn=p("cbzp"),un=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(sn()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(sn("g")),this.element.appendChild(r),this.graphElement=r;var i=e.createElement("div");i.classList.add(sn("t")),this.element.appendChild(i),this.textElement=i};function ln(t,e){var n=new MutationObserver((function(t){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"childList"===u.type&&u.addedNodes.forEach((function(t){t.contains(t)&&(e(),n.disconnect())}))}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}})),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}var cn=p("cbzg");function hn(t,e){return function(n){return e(t(n))}}var pn=function(){function t(e,n){var r=this;c(this,t),this.element=e.createElement("div"),this.element.classList.add(cn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var i=e.createElement("div");i.classList.add(cn("p")),this.element.appendChild(i),this.previewElement=i;var a=e.createElementNS(H,"svg");a.classList.add(cn("g")),this.element.appendChild(a),this.svgElem_=a;var o=e.createElementNS(H,"path");o.classList.add(cn("u")),this.svgElem_.appendChild(o),this.guideElem_=o;var s=e.createElementNS(H,"polyline");s.classList.add(cn("l")),this.svgElem_.appendChild(s),this.lineElem_=s,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach((function(t){t.classList.add(cn("h")),r.element.appendChild(t)})),this.vectorElems_=[e.createElementNS(H,"line"),e.createElementNS(H,"line")],this.vectorElems_.forEach((function(t){t.classList.add(cn("v")),r.svgElem_.appendChild(t)})),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((function(t,e){d(r.sel_,hn((function(t){return t===e}),g(t,cn("h","sel"))))})),ln(this.element,(function(){r.refresh()}))}return C(t,[{key:"getVertMargin_",value:function(t){return.25*t}},{key:"valueToPosition",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.width,i=n.height,a=this.getVertMargin_(i);return{x:ye(t,0,1,0,r),y:ye(e,0,1,i-a,a)}}},{key:"positionToValue",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.width,i=n.height,a=this.getVertMargin_(i);return{x:we(ye(t,0,r,0,1),0,1),y:ye(e,i-a,a,0,1)}}},{key:"refresh",value:function(){var t=this;this.guideElem_.setAttributeNS(null,"d",[0,1].map((function(e){var n=t.valueToPosition(0,e),r=t.valueToPosition(1,e);return["M ".concat(n.x,",").concat(n.y),"L ".concat(r.x,",").concat(r.y)].join(" ")})).join(" "));for(var e=this.value_.rawValue,n=[],r=0;;){var i=this.valueToPosition.apply(this,B(e.curve(r)));if(n.push([i.x,i.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));var a=e.toObject();[0,1].forEach((function(e){var n=t.valueToPosition(e,e),r=t.valueToPosition(a[2*e],a[2*e+1]),i=t.vectorElems_[e];i.setAttributeNS(null,"x1",String(n.x)),i.setAttributeNS(null,"y1",String(n.y)),i.setAttributeNS(null,"x2",String(r.x)),i.setAttributeNS(null,"y2",String(r.y));var o=t.handleElems_[e];o.style.left="".concat(r.x,"px"),o.style.top="".concat(r.y,"px")}))}},{key:"onValueChange_",value:function(){this.refresh()}}]),t}(),vn=24,fn=400,dn=1e3,mn=p("cbzprv"),_n=function(){function t(e,n){var r=this;c(this,t),this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mn()),n.viewProps.bindClassModifiers(this.element);var i=e.createElementNS(H,"svg");i.classList.add(mn("g")),this.element.appendChild(i),this.svgElem_=i;var a=e.createElementNS(H,"path");a.classList.add(mn("t")),this.svgElem_.appendChild(a),this.ticksElem_=a;var o=e.createElement("div");o.classList.add(mn("m")),this.element.appendChild(o),this.markerElem_=o,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),ln(this.element,(function(){r.refresh()}))}return C(t,[{key:"play",value:function(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(mn("m","a")),this.startTime_=(new Date).getTime()+fn,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}},{key:"stop",value:function(){this.stopped_=!0,this.markerElem_.classList.remove(mn("m","a"))}},{key:"onDispose_",value:function(){this.stop()}},{key:"updateMarker_",value:function(t){var e=this.value_.rawValue.y(we(t,0,1));this.markerElem_.style.left="".concat(100*e,"%")}},{key:"refresh",value:function(){for(var t=this.svgElem_.getBoundingClientRect(),e=t.width,n=t.height,r=[],i=this.value_.rawValue,a=0;a<vn;a++){var o=ye(a,0,vn-1,0,1),s=ye(i.y(o),0,1,0,e);r.push("M ".concat(s,",0 v").concat(n))}this.ticksElem_.setAttributeNS(null,"d",r.join(" "))}},{key:"onTimer_",value:function(){if(null!==this.startTime_){var t=(new Date).getTime()-this.startTime_,e=t/dn;this.updateMarker_(e),t>dn+fn&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}}},{key:"onValueChange_",value:function(){this.refresh(),this.play()}}]),t}();function gn(t,e,n,r){var i=n-t,a=r-e;return Math.sqrt(i*i+a*a)}function yn(t,e,n,r){var i=gn(t,e,n,r),a=Math.atan2(r-e,n-t),o=Math.round(a/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(o)*i,y:e+Math.sin(o)*i}}var bn=function(){function t(e,n){var r=this;c(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=n.baseStep,this.value=n.value,this.sel_=T(0),this.viewProps=n.viewProps,this.view=new pn(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new _n(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",(function(t){t.stopImmediatePropagation(),t.preventDefault(),r.prevView_.play()})),this.view.previewElement.appendChild(this.prevView_.element);var i=new ge(this.view.element);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}return C(t,[{key:"refresh",value:function(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}},{key:"updateValue_",value:function(t,e,n){var r=this.sel_.rawValue,i=this.value.rawValue.toObject(),a=this.view.positionToValue(t.x,t.y),o=e?yn(r,r,a.x,a.y):a;i[2*r]=o.x,i[2*r+1]=o.y,this.value.setRawValue(k(Je,B(i)),n)}},{key:"onPointerDown_",value:function(t){var e=t.data;if(e.point){var n=this.value.rawValue,r=this.view.valueToPosition(n.x1,n.y1),i=gn(e.point.x,e.point.y,r.x,r.y),a=this.view.valueToPosition(n.x2,n.y2),o=gn(e.point.x,e.point.y,a.x,a.y);this.sel_.rawValue=i<=o?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}}},{key:"onPointerMove_",value:function(t){var e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){var e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){me(t.key)&&t.preventDefault();var e=this.sel_.rawValue,n=this.value.rawValue.toObject();n[2*e]+=pe(this.baseStep_,fe(t)),n[2*e+1]+=pe(this.baseStep_,ve(t)),this.value.setRawValue(k(Je,B(n)),{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){me(t.key)&&t.preventDefault();var e=pe(this.baseStep_,fe(t)),n=pe(this.baseStep_,ve(t));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),wn=function(){function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new un(e,{viewProps:this.viewProps}),this.gc_=new bn(e,{baseStep:n.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);var r=Object.assign(Object.assign({},n.axis),{constraint:new _t({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new Re(e,{assembly:tn,axes:[r,i,r,i],parser:ie,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}return C(t,[{key:"allFocusableElements",get:function(){return[this.gc_.view.element].concat(B(this.tc_.view.textViews.map((function(t){return t.inputElement}))))}},{key:"refresh",value:function(){this.gc_.refresh()}}]),t}(),kn=function(){function t(e,n){var r=this;c(this,t),this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=it(n.expanded),this.view=new on(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new Ct(e,{parser:rn,props:S.fromObject({formatter:en}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_="popup"===n.pickerLayout?new wt(e,{viewProps:this.viewProps}):null;var i=new wn(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});i.allFocusableElements.forEach((function(t){t.addEventListener("blur",r.onPopupChildBlur_),t.addEventListener("keydown",r.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),d(this.popC_.shows,(function(t){t&&i.refresh()})),he({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t.rawValue},backward:function(t,e){return e.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),st(this.foldable_,this.view.pickerElement))}return C(t,[{key:"onButtonBlur_",value:function(t){if(this.popC_){var e=i(t.relatedTarget);e&&this.popC_.view.element.contains(e)||(this.popC_.shows.rawValue=!1)}}},{key:"onButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=Q(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!X(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_&&"Escape"===t.key&&(this.popC_.shows.rawValue=!1)}}]),t}();function xn(){return new Se({assembly:tn,components:[0,1,2,3].map((function(t){return t%2==0?new _t({min:0,max:1}):void 0}))})}var Cn={id:"cubic-bezier",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept:function(t){var e=N,n=j(t,{value:e.required.array(e.required.number),view:e.required.constant("cubicbezier"),expanded:e.optional.boolean,label:e.optional.string,picker:e.optional.custom((function(t){return"inline"===t||"popup"===t?t:void 0}))});return n?{params:n}:null},controller:function(t){var e,n,r=T(k(Je,B(t.params.value)),{constraint:xn(),equals:Je.equals}),i=new kn(t.document,{axis:{baseStep:.1,textProps:S.fromObject({draggingScale:.01,formatter:oe(2)})},expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:r,viewProps:t.viewProps});return new lt(t.document,{blade:t.blade,props:S.fromObject({label:t.params.label}),valueController:i})},api:function(t){return t.controller instanceof lt&&t.controller.valueController instanceof kn?new Ke(t.controller):null}},En=function(t){O(n,t);var e=P(n);function n(){return c(this,n),e.apply(this,arguments)}return C(n,[{key:"begin",value:function(){this.controller_.valueController.begin()}},{key:"end",value:function(){this.controller_.valueController.end()}}]),n}(e),Mn=20,Tn=function(){function t(){c(this,t),this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}return C(t,[{key:"duration",get:function(){return this.duration_}},{key:"fps",get:function(){return this.fps_}},{key:"begin",value:function(t){this.start_=t.getTime()}},{key:"calculateFps_",value:function(t){if(0===this.timestamps_.length)return null;var e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}},{key:"compactTimestamps_",value:function(){if(!(this.timestamps_.length<=Mn)){var t=this.timestamps_.length-Mn;this.timestamps_.splice(0,t);var e=this.timestamps_[0].frameCount;this.timestamps_.forEach((function(t){t.frameCount-=e})),this.frameCount_-=e}}},{key:"end",value:function(t){if(null!==this.start_){var e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}}}]),t}(),Pn=p("fps"),An=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(Pn()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(Pn("g")),this.element.appendChild(this.graphElement);var r=e.createElement("div");r.classList.add(Pn("l")),this.element.appendChild(r);var i=e.createElement("span");i.classList.add(Pn("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;var a=e.createElement("span");a.classList.add(Pn("u")),a.textContent="FPS",r.appendChild(a)},Sn=function(){function t(e,n){var r=this;c(this,t),this.stopwatch_=new Tn,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new An(e,{viewProps:this.viewProps}),this.graphC_=new ze(e,{formatter:oe(0),lineCount:n.lineCount,maxValue:n.maxValue,minValue:n.minValue,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose((function(){r.graphC_.viewProps.set("disposed",!0),r.ticker_.dispose()}))}return C(t,[{key:"begin",value:function(){this.stopwatch_.begin(new Date)}},{key:"end",value:function(){this.stopwatch_.end(new Date)}},{key:"onTick_",value:function(){var t=this.stopwatch_.fps;if(null!==t){var e=this.value_.rawValue;this.value_.rawValue=ce(e,t),this.view.valueElement.textContent=t.toFixed(0)}}}]),t}();function Vn(t,e){return 0===e?new vt:new ft(t,null!=e?e:Ne.monitor.defaultInterval)}var On={id:"fpsgraph",type:"blade",accept:function(t){var e=N,n=j(t,{view:e.required.constant("fpsgraph"),interval:e.optional.number,label:e.optional.string,lineCount:e.optional.number,max:e.optional.number,min:e.optional.number});return n?{params:n}:null},controller:function(t){var e,n,r,i,a=null!==(e=t.params.interval)&&void 0!==e?e:500;return new et(t.document,{blade:t.blade,props:S.fromObject({label:t.params.label}),valueController:new Sn(t.document,{lineCount:null!==(n=t.params.lineCount)&&void 0!==n?n:2,maxValue:null!==(r=t.params.max)&&void 0!==r?r:90,minValue:null!==(i=t.params.min)&&void 0!==i?i:0,ticker:Vn(t.document,a),value:ue(80),viewProps:t.viewProps})})},api:function(t){return t.controller instanceof et&&t.controller.valueController instanceof Sn?new En(t.controller):null}},Dn=function(){function t(e,n){c(this,t),this.min=e,this.max=n}return C(t,[{key:"length",get:function(){return this.max-this.min}},{key:"toObject",value:function(){return{min:this.min,max:this.max}}}],[{key:"isObject",value:function(t){if("object"!=typeof t||null===t)return!1;var e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}},{key:"equals",value:function(t,e){return t.min===e.min&&t.max===e.max}}]),t}(),Rn={fromComponents:function(t){return new Dn(t[0],t[1])},toComponents:function(t){return[t.min,t.max]}},Ln=function(){function t(e){c(this,t),this.edge=e}return C(t,[{key:"constrain",value:function(t){var e,n,r,i,a,o,s,u;if(t.min<=t.max)return new Dn(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(i=null===(r=this.edge)||void 0===r?void 0:r.constrain(t.max))&&void 0!==i?i:t.max);var l=(t.min+t.max)/2;return new Dn(null!==(o=null===(a=this.edge)||void 0===a?void 0:a.constrain(l))&&void 0!==o?o:l,null!==(u=null===(s=this.edge)||void 0===s?void 0:s.constrain(l))&&void 0!==u?u:l)}}]),t}(),In=p("rsltxt"),Nn=function t(e,n){c(this,t),this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(In());var r=e.createElement("div");r.classList.add(In("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(In("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)},Fn=p("rsl"),Bn=function(){function t(e,n){c(this,t),this.maxValue_=n.maxValue,this.minValue_=n.minValue,this.element=e.createElement("div"),this.element.classList.add(Fn()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this));var r=e.createElement("div");r.classList.add(Fn("t")),this.element.appendChild(r),this.trackElement=r;var i=e.createElement("div");i.classList.add(Fn("b")),r.appendChild(i),this.barElement=i;var a=["min","max"].map((function(t){var n=e.createElement("div");return n.classList.add(Fn("k"),Fn("k",t)),r.appendChild(n),n}));this.knobElements=[a[0],a[1]],this.update()}return C(t,[{key:"valueToX_",value:function(t){return 100*we(ye(t,this.minValue_,this.maxValue_,0,1),0,1)}},{key:"update",value:function(){var t=this.value_.rawValue;0===t.length?this.element.classList.add(Fn(void 0,"zero")):this.element.classList.remove(Fn(void 0,"zero"));var e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left="".concat(e[0],"%"),this.barElement.style.right="".concat(100-e[1],"%"),this.knobElements.forEach((function(t,n){t.style.left="".concat(e[n],"%")}))}},{key:"onValueChange_",value:function(){this.update()}}]),t}(),jn=function(){function t(e,n){c(this,t),this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.maxValue_=n.maxValue,this.minValue_=n.minValue,this.viewProps=n.viewProps,this.value=n.value,this.view=new Bn(e,{maxValue:n.maxValue,minValue:n.minValue,value:this.value,viewProps:n.viewProps});var r=new ge(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return C(t,[{key:"ofs_",value:function(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}},{key:"valueFromData_",value:function(t){return t.point?ye((t.point.x+this.ofs_())/t.bounds.width,0,1,this.minValue_,this.maxValue_):null}},{key:"onPointerDown_",value:function(t){if(t.data.point){var e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,r=ye(n.min,this.minValue_,this.maxValue_,0,1),i=ye(n.max,this.minValue_,this.maxValue_,0,1);Math.abs(i-e)<=.025?this.grabbing_="max":Math.abs(r-e)<=.025?this.grabbing_="min":e>=r&&e<=i?(this.grabbing_="length",this.grabOffset_=ye(e-r,0,1,0,this.maxValue_-this.minValue_)):e<r?(this.grabbing_="min",this.onPointerMove_(t)):e>i&&(this.grabbing_="max",this.onPointerMove_(t))}}},{key:"applyPointToValue_",value:function(t,e){var n=this.valueFromData_(t);if(null!==n)if("min"===this.grabbing_)this.value.setRawValue(new Dn(n,this.value.rawValue.max),e);else if("max"===this.grabbing_)this.value.setRawValue(new Dn(this.value.rawValue.min,n),e);else if("length"===this.grabbing_){var r=this.value.rawValue.length,i=n-this.grabOffset_,a=i+r;i<this.minValue_?(i=this.minValue_,a=this.minValue_+r):a>this.maxValue_&&(i=this.maxValue_-r,a=this.maxValue_),this.value.setRawValue(new Dn(i,a),e)}}},{key:"onPointerMove_",value:function(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}]),t}(),zn=function(){function t(e,n){c(this,t),this.value=n.value,this.viewProps=n.viewProps,this.sc_=new jn(e,n);var r={baseStep:n.baseStep,constraint:n.constraint,textProps:S.fromObject({draggingScale:n.draggingScale,formatter:n.formatter})};this.tc_=new Re(e,{assembly:Rn,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new Nn(e,{sliderView:this.sc_.view,textView:this.tc_.view})}return C(t,[{key:"textController",get:function(){return this.tc_}}]),t}();function Un(t){return Dn.isObject(t)?new Dn(t.min,t.max):new Dn(0,0)}function qn(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Wn(t){var e=[],n=Ie(t);n&&e.push(n);var r=Le(t);return r&&e.push(r),new Ln(new dt(e))}var Gn={id:"input-interval",type:"input",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept:function(t,e){if(!Dn.isObject(t))return null;var n=N,r=j(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,step:n.optional.number});return r?{initialValue:new Dn(t.min,t.max),params:r}:null},binding:{reader:function(t){return Un},constraint:function(t){return Wn(t.params)},equals:Dn.equals,writer:function(t){return qn}},controller:function(t){var e,n=t.value,r=t.constraint;if(!(r instanceof Ln))throw u.shouldNeverHappen();var i=(n.rawValue.min+n.rawValue.max)/2,a=null!==(e=t.params.format)&&void 0!==e?e:oe(Te(r.edge,i)),o=r.edge&&mt(r.edge,_t);if(void 0!==(null==o?void 0:o.minValue)&&void 0!==(null==o?void 0:o.maxValue))return new zn(t.document,{baseStep:Pe(r.edge),constraint:r.edge,draggingScale:Ae(o,i),formatter:a,maxValue:o.maxValue,minValue:o.minValue,parser:ie,value:n,viewProps:t.viewProps});var s={baseStep:Pe(r.edge),constraint:r.edge,textProps:S.fromObject({draggingScale:i,formatter:a})};return new Re(t.document,{assembly:Rn,axes:[s,s],parser:ie,value:n,viewProps:t.viewProps})}},Hn=function(){function t(e){c(this,t),this.controller_=e}return C(t,[{key:"disabled",get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)}},{key:"title",get:function(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller_.props.set("title",t)}}]),t}(),Kn=function(t){O(n,t);var e=P(n);function n(t,r,i,a,o){var s;return c(this,n),(s=e.call(this,t,a,o)).cell=r,s.index=i,s}return n}(r),Yn=function(t){O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).cellToApiMap_=new Map,r.controller_.valueController.cellControllers.forEach((function(t){var e=new Hn(t);r.cellToApiMap_.set(t,e)})),r}return C(n,[{key:"value",get:function(){return this.controller_.value}},{key:"cell",value:function(t,e){var n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}},{key:"on",value:function(t,e){var n=this,r=e.bind(this);this.controller_.value.emitter.on(t,(function(t){var e=n.controller_.valueController,i=e.findCellByValue(t.rawValue);if(i){var a=n.cellToApiMap_.get(i);if(a){var o=e.cellControllers.indexOf(i);r(new Kn(n,a,[o%e.size[0],Math.floor(o/e.size[0])],t.rawValue,void 0))}}}))}}]),n}(e),Xn=p("rad"),Zn=function t(e,n){c(this,t),this.element=e.createElement("div"),this.element.classList.add(Xn()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("label");r.classList.add(Xn("l")),this.element.appendChild(r);var i=e.createElement("input");i.classList.add(Xn("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;var a=e.createElement("div");a.classList.add(Xn("b")),r.appendChild(a);var o=e.createElement("div");o.classList.add(Xn("t")),a.appendChild(o),m(n.props,"title",(function(t){o.textContent=t}))},Qn=function t(e,n){c(this,t),this.props=n.props,this.viewProps=n.viewProps,this.view=new Zn(e,{name:n.name,props:this.props,viewProps:this.viewProps})},$n=function(){function t(e,n){var r=this;c(this,t),this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;for(var i=F(this.size,2),a=i[0],o=i[1],s=0;s<o;s++)for(var u=0;u<a;u++){var l=new Qn(e,{name:n.groupName,props:S.fromObject(Object.assign({},n.cellConfig(u,s))),viewProps:pt.create()});this.cellCs_.push(l),this.cellValues_.push(n.cellConfig(u,s).value)}this.value=n.value,d(this.value,(function(t){var e=r.findCellByValue(t);e&&(e.view.inputElement.checked=!0)})),this.viewProps=pt.create(),this.view=new ut(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns="repeat(".concat(a,", 1fr)"),this.cellCs_.forEach((function(t){t.view.inputElement.addEventListener("change",r.onCellInputChange_),r.view.element.appendChild(t.view.element)}))}return C(t,[{key:"cellControllers",get:function(){return this.cellCs_}},{key:"findCellByValue",value:function(t){var e=this.cellValues_.findIndex((function(e){return e===t}));return e<0?null:this.cellCs_[e]}},{key:"onCellInputChange_",value:function(t){var e=t.currentTarget,n=this.cellCs_.findIndex((function(t){return t.view.inputElement===e}));n<0||(this.value.rawValue=this.cellValues_[n])}}]),t}(),Jn={id:"radiogrid",type:"blade",accept:function(t){var e=N,n=j(t,{cells:e.required.function,groupName:e.required.string,size:e.required.array(e.required.number),value:e.required.raw,view:e.required.constant("radiogrid"),label:e.optional.string});return n?{params:n}:null},controller:function(t){return new lt(t.document,{blade:t.blade,props:S.fromObject({label:t.params.label}),valueController:new $n(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:T(t.params.value)})})},api:function(t){return t.controller instanceof lt&&t.controller.valueController instanceof $n?new Yn(t.controller):null}},tr=[He,Cn,On,Gn,Jn,{id:"input-radiogrid",type:"input",accept:function(t,e){if("number"!=typeof t)return null;var n=N,r=j(e,{cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),view:n.required.constant("radiogrid")});return r?{initialValue:t,params:r}:null},binding:{reader:function(t){return ae},writer:function(t){return Ee}},controller:function(t){return new $n(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})}}];t.CubicBezier=Je,t.plugins=tr,Object.defineProperty(t,"__esModule",{value:!0})}(j);var z={};t(z,"create",(function(){return G})),t(z,"clone",(function(){return H})),t(z,"copy",(function(){return K})),t(z,"fromValues",(function(){return Y})),t(z,"set",(function(){return X})),t(z,"identity",(function(){return Z})),t(z,"transpose",(function(){return Q})),t(z,"invert",(function(){return $})),t(z,"adjoint",(function(){return J})),t(z,"determinant",(function(){return tt})),t(z,"multiply",(function(){return et})),t(z,"translate",(function(){return nt})),t(z,"scale",(function(){return rt})),t(z,"rotate",(function(){return it})),t(z,"rotateX",(function(){return at})),t(z,"rotateY",(function(){return ot})),t(z,"rotateZ",(function(){return st})),t(z,"fromTranslation",(function(){return ut})),t(z,"fromScaling",(function(){return lt})),t(z,"fromRotation",(function(){return ct})),t(z,"fromXRotation",(function(){return ht})),t(z,"fromYRotation",(function(){return pt})),t(z,"fromZRotation",(function(){return vt})),t(z,"fromRotationTranslation",(function(){return ft})),t(z,"fromQuat2",(function(){return dt})),t(z,"getTranslation",(function(){return mt})),t(z,"getScaling",(function(){return _t})),t(z,"getRotation",(function(){return gt})),t(z,"fromRotationTranslationScale",(function(){return yt})),t(z,"fromRotationTranslationScaleOrigin",(function(){return bt})),t(z,"fromQuat",(function(){return wt})),t(z,"frustum",(function(){return kt})),t(z,"perspectiveNO",(function(){return xt})),t(z,"perspective",(function(){return Ct})),t(z,"perspectiveZO",(function(){return Et})),t(z,"perspectiveFromFieldOfView",(function(){return Mt})),t(z,"orthoNO",(function(){return Tt})),t(z,"ortho",(function(){return Pt})),t(z,"orthoZO",(function(){return At})),t(z,"lookAt",(function(){return St})),t(z,"targetTo",(function(){return Vt})),t(z,"str",(function(){return Ot})),t(z,"frob",(function(){return Dt})),t(z,"add",(function(){return Rt})),t(z,"subtract",(function(){return Lt})),t(z,"multiplyScalar",(function(){return It})),t(z,"multiplyScalarAndAdd",(function(){return Nt})),t(z,"exactEquals",(function(){return Ft})),t(z,"equals",(function(){return Bt})),t(z,"mul",(function(){return jt})),t(z,"sub",(function(){return zt}));var U=1e-6,q="undefined"!=typeof Float32Array?Float32Array:Array,W=Math.random;Math.PI;function G(){var t=new q(16);return q!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function H(t){var e=new q(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function K(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Y(t,e,n,r,i,a,o,s,u,l,c,h,p,v,f,d){var m=new q(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=u,m[9]=l,m[10]=c,m[11]=h,m[12]=p,m[13]=v,m[14]=f,m[15]=d,m}function X(t,e,n,r,i,a,o,s,u,l,c,h,p,v,f,d,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=p,t[12]=v,t[13]=f,t[14]=d,t[15]=m,t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function $(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],v=e[11],f=e[12],d=e[13],m=e[14],_=e[15],g=n*s-r*o,y=n*u-i*o,b=n*l-a*o,w=r*u-i*s,k=r*l-a*s,x=i*l-a*u,C=c*d-h*f,E=c*m-p*f,M=c*_-v*f,T=h*m-p*d,P=h*_-v*d,A=p*_-v*m,S=g*A-y*P+b*T+w*M-k*E+x*C;return S?(S=1/S,t[0]=(s*A-u*P+l*T)*S,t[1]=(i*P-r*A-a*T)*S,t[2]=(d*x-m*k+_*w)*S,t[3]=(p*k-h*x-v*w)*S,t[4]=(u*M-o*A-l*E)*S,t[5]=(n*A-i*M+a*E)*S,t[6]=(m*b-f*x-_*y)*S,t[7]=(c*x-p*b+v*y)*S,t[8]=(o*P-s*M+l*C)*S,t[9]=(r*M-n*P-a*C)*S,t[10]=(f*k-d*b+_*g)*S,t[11]=(h*b-c*k-v*g)*S,t[12]=(s*E-o*T-u*C)*S,t[13]=(n*T-r*E+i*C)*S,t[14]=(d*y-f*w-m*g)*S,t[15]=(c*w-h*y+p*g)*S,t):null}function J(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],v=e[11],f=e[12],d=e[13],m=e[14],_=e[15];return t[0]=s*(p*_-v*m)-h*(u*_-l*m)+d*(u*v-l*p),t[1]=-(r*(p*_-v*m)-h*(i*_-a*m)+d*(i*v-a*p)),t[2]=r*(u*_-l*m)-s*(i*_-a*m)+d*(i*l-a*u),t[3]=-(r*(u*v-l*p)-s*(i*v-a*p)+h*(i*l-a*u)),t[4]=-(o*(p*_-v*m)-c*(u*_-l*m)+f*(u*v-l*p)),t[5]=n*(p*_-v*m)-c*(i*_-a*m)+f*(i*v-a*p),t[6]=-(n*(u*_-l*m)-o*(i*_-a*m)+f*(i*l-a*u)),t[7]=n*(u*v-l*p)-o*(i*v-a*p)+c*(i*l-a*u),t[8]=o*(h*_-v*d)-c*(s*_-l*d)+f*(s*v-l*h),t[9]=-(n*(h*_-v*d)-c*(r*_-a*d)+f*(r*v-a*h)),t[10]=n*(s*_-l*d)-o*(r*_-a*d)+f*(r*l-a*s),t[11]=-(n*(s*v-l*h)-o*(r*v-a*h)+c*(r*l-a*s)),t[12]=-(o*(h*m-p*d)-c*(s*m-u*d)+f*(s*p-u*h)),t[13]=n*(h*m-p*d)-c*(r*m-i*d)+f*(r*p-i*h),t[14]=-(n*(s*m-u*d)-o*(r*m-i*d)+f*(r*u-i*s)),t[15]=n*(s*p-u*h)-o*(r*p-i*h)+c*(r*u-i*s),t}function tt(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],p=t[11],v=t[12],f=t[13],d=t[14],m=t[15];return(e*o-n*a)*(h*m-p*d)-(e*s-r*a)*(c*m-p*f)+(e*u-i*a)*(c*d-h*f)+(n*s-r*o)*(l*m-p*v)-(n*u-i*o)*(l*d-h*v)+(r*u-i*s)*(l*f-c*v)}function et(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],v=e[10],f=e[11],d=e[12],m=e[13],_=e[14],g=e[15],y=n[0],b=n[1],w=n[2],k=n[3];return t[0]=y*r+b*s+w*h+k*d,t[1]=y*i+b*u+w*p+k*m,t[2]=y*a+b*l+w*v+k*_,t[3]=y*o+b*c+w*f+k*g,y=n[4],b=n[5],w=n[6],k=n[7],t[4]=y*r+b*s+w*h+k*d,t[5]=y*i+b*u+w*p+k*m,t[6]=y*a+b*l+w*v+k*_,t[7]=y*o+b*c+w*f+k*g,y=n[8],b=n[9],w=n[10],k=n[11],t[8]=y*r+b*s+w*h+k*d,t[9]=y*i+b*u+w*p+k*m,t[10]=y*a+b*l+w*v+k*_,t[11]=y*o+b*c+w*f+k*g,y=n[12],b=n[13],w=n[14],k=n[15],t[12]=y*r+b*s+w*h+k*d,t[13]=y*i+b*u+w*p+k*m,t[14]=y*a+b*l+w*v+k*_,t[15]=y*o+b*c+w*f+k*g,t}function nt(t,e,n){var r,i,a,o,s,u,l,c,h,p,v,f,d=n[0],m=n[1],_=n[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*_+e[12],t[13]=e[1]*d+e[5]*m+e[9]*_+e[13],t[14]=e[2]*d+e[6]*m+e[10]*_+e[14],t[15]=e[3]*d+e[7]*m+e[11]*_+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],v=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=v,t[11]=f,t[12]=r*d+s*m+h*_+e[12],t[13]=i*d+u*m+p*_+e[13],t[14]=a*d+l*m+v*_+e[14],t[15]=o*d+c*m+f*_+e[15]),t}function rt(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function it(t,e,n,r){var i,a,o,s,u,l,c,h,p,v,f,d,m,_,g,y,b,w,k,x,C,E,M,T,P=r[0],A=r[1],S=r[2],V=Math.hypot(P,A,S);return V<U?null:(P*=V=1/V,A*=V,S*=V,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],l=e[2],c=e[3],h=e[4],p=e[5],v=e[6],f=e[7],d=e[8],m=e[9],_=e[10],g=e[11],y=P*P*o+a,b=A*P*o+S*i,w=S*P*o-A*i,k=P*A*o-S*i,x=A*A*o+a,C=S*A*o+P*i,E=P*S*o+A*i,M=A*S*o-P*i,T=S*S*o+a,t[0]=s*y+h*b+d*w,t[1]=u*y+p*b+m*w,t[2]=l*y+v*b+_*w,t[3]=c*y+f*b+g*w,t[4]=s*k+h*x+d*C,t[5]=u*k+p*x+m*C,t[6]=l*k+v*x+_*C,t[7]=c*k+f*x+g*C,t[8]=s*E+h*M+d*T,t[9]=u*E+p*M+m*T,t[10]=l*E+v*M+_*T,t[11]=c*E+f*M+g*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function at(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*r,t[5]=o*i+c*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=l*i-a*r,t[9]=c*i-o*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t}function ot(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-l*r,t[1]=o*i-c*r,t[2]=s*i-h*r,t[3]=u*i-p*r,t[8]=a*r+l*i,t[9]=o*r+c*i,t[10]=s*r+h*i,t[11]=u*r+p*i,t}function st(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*r,t[1]=o*i+c*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=l*i-a*r,t[5]=c*i-o*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t}function ut(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function lt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,e,n){var r,i,a,o=n[0],s=n[1],u=n[2],l=Math.hypot(o,s,u);return l<U?null:(o*=l=1/l,s*=l,u*=l,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*r,t[2]=u*o*a-s*r,t[3]=0,t[4]=o*s*a-u*r,t[5]=s*s*a+i,t[6]=u*s*a+o*r,t[7]=0,t[8]=o*u*a+s*r,t[9]=s*u*a-o*r,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ht(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ft(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,l=a+a,c=r*s,h=r*u,p=r*l,v=i*u,f=i*l,d=a*l,m=o*s,_=o*u,g=o*l;return t[0]=1-(v+d),t[1]=h+g,t[2]=p-_,t[3]=0,t[4]=h-g,t[5]=1-(c+d),t[6]=f+m,t[7]=0,t[8]=p+_,t[9]=f-m,t[10]=1-(c+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dt(t,e){var n=new q(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=r*r+i*i+a*a+o*o;return h>0?(n[0]=2*(s*o+c*r+u*a-l*i)/h,n[1]=2*(u*o+c*i+l*r-s*a)/h,n[2]=2*(l*o+c*a+s*i-u*r)/h):(n[0]=2*(s*o+c*r+u*a-l*i),n[1]=2*(u*o+c*i+l*r-s*a),n[2]=2*(l*o+c*a+s*i-u*r)),ft(t,e,n),t}function mt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _t(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,l,c),t}function gt(t,e){var n=new q(3);_t(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,u=e[2]*a,l=e[4]*r,c=e[5]*i,h=e[6]*a,p=e[8]*r,v=e[9]*i,f=e[10]*a,d=o+c+f,m=0;return d>0?(m=2*Math.sqrt(d+1),t[3]=.25*m,t[0]=(h-v)/m,t[1]=(p-u)/m,t[2]=(s-l)/m):o>c&&o>f?(m=2*Math.sqrt(1+o-c-f),t[3]=(h-v)/m,t[0]=.25*m,t[1]=(s+l)/m,t[2]=(p+u)/m):c>f?(m=2*Math.sqrt(1+c-o-f),t[3]=(p-u)/m,t[0]=(s+l)/m,t[1]=.25*m,t[2]=(h+v)/m):(m=2*Math.sqrt(1+f-o-c),t[3]=(s-l)/m,t[0]=(p+u)/m,t[1]=(h+v)/m,t[2]=.25*m),t}function yt(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,l=a+a,c=o+o,h=i*u,p=i*l,v=i*c,f=a*l,d=a*c,m=o*c,_=s*u,g=s*l,y=s*c,b=r[0],w=r[1],k=r[2];return t[0]=(1-(f+m))*b,t[1]=(p+y)*b,t[2]=(v-g)*b,t[3]=0,t[4]=(p-y)*w,t[5]=(1-(h+m))*w,t[6]=(d+_)*w,t[7]=0,t[8]=(v+g)*k,t[9]=(d-_)*k,t[10]=(1-(h+f))*k,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function bt(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],u=e[3],l=a+a,c=o+o,h=s+s,p=a*l,v=a*c,f=a*h,d=o*c,m=o*h,_=s*h,g=u*l,y=u*c,b=u*h,w=r[0],k=r[1],x=r[2],C=i[0],E=i[1],M=i[2],T=(1-(d+_))*w,P=(v+b)*w,A=(f-y)*w,S=(v-b)*k,V=(1-(p+_))*k,O=(m+g)*k,D=(f+y)*x,R=(m-g)*x,L=(1-(p+d))*x;return t[0]=T,t[1]=P,t[2]=A,t[3]=0,t[4]=S,t[5]=V,t[6]=O,t[7]=0,t[8]=D,t[9]=R,t[10]=L,t[11]=0,t[12]=n[0]+C-(T*C+S*E+D*M),t[13]=n[1]+E-(P*C+V*E+R*M),t[14]=n[2]+M-(A*C+O*E+L*M),t[15]=1,t}function wt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,h=r*s,p=i*o,v=i*s,f=i*u,d=a*o,m=a*s,_=a*u;return t[0]=1-h-f,t[1]=c+_,t[2]=p-m,t[3]=0,t[4]=c-_,t[5]=1-l-f,t[6]=v+d,t[7]=0,t[8]=p+m,t[9]=v-d,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kt(t,e,n,r,i,a,o){var s=1/(n-e),u=1/(i-r),l=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*l,t[15]=0,t}function xt(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ct=xt;function Et(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=i*a,t[14]=i*r*a):(t[10]=-1,t[14]=-r),t}function Mt(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Tt(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*l,t[15]=1,t}var Pt=Tt;function At(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=a*l,t[15]=1,t}function St(t,e,n,r){var i,a,o,s,u,l,c,h,p,v,f=e[0],d=e[1],m=e[2],_=r[0],g=r[1],y=r[2],b=n[0],w=n[1],k=n[2];return Math.abs(f-b)<U&&Math.abs(d-w)<U&&Math.abs(m-k)<U?Z(t):(c=f-b,h=d-w,p=m-k,i=g*(p*=v=1/Math.hypot(c,h,p))-y*(h*=v),a=y*(c*=v)-_*p,o=_*h-g*c,(v=Math.hypot(i,a,o))?(i*=v=1/v,a*=v,o*=v):(i=0,a=0,o=0),s=h*o-p*a,u=p*i-c*o,l=c*a-h*i,(v=Math.hypot(s,u,l))?(s*=v=1/v,u*=v,l*=v):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=u,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=p,t[11]=0,t[12]=-(i*f+a*d+o*m),t[13]=-(s*f+u*d+l*m),t[14]=-(c*f+h*d+p*m),t[15]=1,t)}function Vt(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],h=a-n[1],p=o-n[2],v=c*c+h*h+p*p;v>0&&(c*=v=1/Math.sqrt(v),h*=v,p*=v);var f=u*p-l*h,d=l*c-s*p,m=s*h-u*c;return(v=f*f+d*d+m*m)>0&&(f*=v=1/Math.sqrt(v),d*=v,m*=v),t[0]=f,t[1]=d,t[2]=m,t[3]=0,t[4]=h*m-p*d,t[5]=p*f-c*m,t[6]=c*d-h*f,t[7]=0,t[8]=c,t[9]=h,t[10]=p,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Ot(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Dt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Rt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function It(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Nt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],v=t[11],f=t[12],d=t[13],m=t[14],_=t[15],g=e[0],y=e[1],b=e[2],w=e[3],k=e[4],x=e[5],C=e[6],E=e[7],M=e[8],T=e[9],P=e[10],A=e[11],S=e[12],V=e[13],O=e[14],D=e[15];return Math.abs(n-g)<=U*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-y)<=U*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-b)<=U*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-w)<=U*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-k)<=U*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(s-x)<=U*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-C)<=U*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(l-E)<=U*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-M)<=U*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(h-T)<=U*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-P)<=U*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-A)<=U*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(f-S)<=U*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-V)<=U*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(m-O)<=U*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(_-D)<=U*Math.max(1,Math.abs(_),Math.abs(D))}var jt=et,zt=Lt,Ut={};t(Ut,"create",(function(){return ze})),t(Ut,"identity",(function(){return Ue})),t(Ut,"setAxisAngle",(function(){return qe})),t(Ut,"getAxisAngle",(function(){return We})),t(Ut,"getAngle",(function(){return Ge})),t(Ut,"dot",(function(){return kn})),t(Ut,"multiply",(function(){return He})),t(Ut,"rotateX",(function(){return Ke})),t(Ut,"rotateY",(function(){return Ye})),t(Ut,"rotateZ",(function(){return Xe})),t(Ut,"calculateW",(function(){return Ze})),t(Ut,"exp",(function(){return Qe})),t(Ut,"ln",(function(){return $e})),t(Ut,"pow",(function(){return Je})),t(Ut,"scale",(function(){return wn})),t(Ut,"slerp",(function(){return tn})),t(Ut,"random",(function(){return en})),t(Ut,"invert",(function(){return nn})),t(Ut,"conjugate",(function(){return rn})),t(Ut,"fromMat3",(function(){return an})),t(Ut,"fromEuler",(function(){return on})),t(Ut,"str",(function(){return sn})),t(Ut,"clone",(function(){return dn})),t(Ut,"fromValues",(function(){return mn})),t(Ut,"copy",(function(){return _n})),t(Ut,"set",(function(){return gn})),t(Ut,"add",(function(){return yn})),t(Ut,"mul",(function(){return bn})),t(Ut,"lerp",(function(){return xn})),t(Ut,"length",(function(){return Cn})),t(Ut,"len",(function(){return En})),t(Ut,"squaredLength",(function(){return Mn})),t(Ut,"sqrLen",(function(){return Tn})),t(Ut,"normalize",(function(){return Pn})),t(Ut,"exactEquals",(function(){return An})),t(Ut,"equals",(function(){return Sn})),t(Ut,"rotationTo",(function(){return Vn})),t(Ut,"sqlerp",(function(){return On})),t(Ut,"setAxes",(function(){return Dn}));var qt={};function Wt(){var t=new q(3);return q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Gt(t){var e=new q(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ht(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Kt(t,e,n){var r=new q(3);return r[0]=t,r[1]=e,r[2]=n,r}function Yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xt(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Zt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function $t(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Jt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function te(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ee(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ne(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function re(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ie(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ae(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function oe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function se(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function ue(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function le(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ce(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function he(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function pe(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function fe(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}function de(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function me(t,e,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t}function _e(t,e,n,r,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,h=3*u*o,p=u*a;return t[0]=e[0]*l+n[0]*c+r[0]*h+i[0]*p,t[1]=e[1]*l+n[1]*c+r[1]*h+i[1]*p,t[2]=e[2]*l+n[2]*c+r[2]*h+i[2]*p,t}function ge(t,e){e=e||1;var n=2*W()*Math.PI,r=2*W()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function ye(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function be(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function we(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],l=e[2],c=i*l-a*u,h=a*s-r*l,p=r*u-i*s,v=i*p-a*h,f=a*c-r*p,d=r*h-i*c,m=2*o;return c*=m,h*=m,p*=m,v*=2,f*=2,d*=2,t[0]=s+c+v,t[1]=u+h+f,t[2]=l+p+d,t}function ke(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function xe(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Ce(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Ee(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+o*o+s*s),l=u&&ve(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))}function Me(t){return t[0]=0,t[1]=0,t[2]=0,t}function Te(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ae(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=U*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=U*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=U*Math.max(1,Math.abs(i),Math.abs(s))}t(qt,"create",(function(){return Wt})),t(qt,"clone",(function(){return Gt})),t(qt,"length",(function(){return Ht})),t(qt,"fromValues",(function(){return Kt})),t(qt,"copy",(function(){return Yt})),t(qt,"set",(function(){return Xt})),t(qt,"add",(function(){return Zt})),t(qt,"subtract",(function(){return Qt})),t(qt,"multiply",(function(){return $t})),t(qt,"divide",(function(){return Jt})),t(qt,"ceil",(function(){return te})),t(qt,"floor",(function(){return ee})),t(qt,"min",(function(){return ne})),t(qt,"max",(function(){return re})),t(qt,"round",(function(){return ie})),t(qt,"scale",(function(){return ae})),t(qt,"scaleAndAdd",(function(){return oe})),t(qt,"distance",(function(){return se})),t(qt,"squaredDistance",(function(){return ue})),t(qt,"squaredLength",(function(){return le})),t(qt,"negate",(function(){return ce})),t(qt,"inverse",(function(){return he})),t(qt,"normalize",(function(){return pe})),t(qt,"len",(function(){return Ie})),t(qt,"dot",(function(){return ve})),t(qt,"cross",(function(){return fe})),t(qt,"lerp",(function(){return de})),t(qt,"hermite",(function(){return me})),t(qt,"bezier",(function(){return _e})),t(qt,"random",(function(){return ge})),t(qt,"transformMat4",(function(){return ye})),t(qt,"transformMat3",(function(){return be})),t(qt,"transformQuat",(function(){return we})),t(qt,"rotateX",(function(){return ke})),t(qt,"rotateY",(function(){return xe})),t(qt,"rotateZ",(function(){return Ce})),t(qt,"angle",(function(){return Ee})),t(qt,"zero",(function(){return Me})),t(qt,"str",(function(){return Te})),t(qt,"exactEquals",(function(){return Pe})),t(qt,"equals",(function(){return Ae})),t(qt,"sub",(function(){return Ve})),t(qt,"mul",(function(){return Oe})),t(qt,"div",(function(){return De})),t(qt,"dist",(function(){return Re})),t(qt,"sqrDist",(function(){return Le})),t(qt,"sqrLen",(function(){return Ne})),t(qt,"forEach",(function(){return Fe}));var Se,Ve=Qt,Oe=$t,De=Jt,Re=se,Le=ue,Ie=Ht,Ne=le,Fe=(Se=Wt(),function(t,e,n,r,i,a){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)Se[0]=t[o],Se[1]=t[o+1],Se[2]=t[o+2],i(Se,Se,a),t[o]=Se[0],t[o+1]=Se[1],t[o+2]=Se[2];return t});function Be(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function je(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}!function(){var t,e=(t=new q(4),q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function ze(){var t=new q(4);return q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ue(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function qe(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function We(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>U?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ge(t,e){var n=kn(t,e);return Math.acos(2*n*n-1)}function He(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+o*s+i*l-a*u,t[1]=i*c+o*u+a*s-r*l,t[2]=a*c+o*l+r*u-i*s,t[3]=o*c-r*s-i*u-a*l,t}function Ke(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-r*s,t}function Ye(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=i*u+o*s,t[2]=a*u+r*s,t[3]=o*u-i*s,t}function Xe(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function Ze(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Qe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),s=Math.exp(a),u=o>0?s*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(o),t}function $e(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+a*a),t}function Je(t,e,n){return $e(t,e),wn(t,t,n),Qe(t,t),t}function tn(t,e,n,r){var i,a,o,s,u,l=e[0],c=e[1],h=e[2],p=e[3],v=n[0],f=n[1],d=n[2],m=n[3];return(a=l*v+c*f+h*d+p*m)<0&&(a=-a,v=-v,f=-f,d=-d,m=-m),1-a>U?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),t[0]=s*l+u*v,t[1]=s*c+u*f,t[2]=s*h+u*d,t[3]=s*p+u*m,t}function en(t){var e=W(),n=W(),r=W(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function nn(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function rn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function an(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function on(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return t[0]=a*u*c-o*s*l,t[1]=o*s*c+a*u*l,t[2]=o*u*l-a*s*c,t[3]=o*u*c+a*s*l,t}function sn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var un,ln,cn,hn,pn,vn,fn,dn=function(t){var e=new q(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},mn=function(t,e,n,r){var i=new q(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},_n=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},gn=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},yn=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},bn=He,wn=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},kn=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},xn=function(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t},Cn=Be,En=Cn,Mn=je,Tn=Mn,Pn=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t},An=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Sn=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-o)<=U*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=U*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=U*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=U*Math.max(1,Math.abs(a),Math.abs(l))},Vn=(un=Wt(),ln=Kt(1,0,0),cn=Kt(0,1,0),function(t,e,n){var r=ve(e,n);return r<-.999999?(fe(un,ln,e),Ie(un)<1e-6&&fe(un,cn,e),pe(un,un),qe(t,un,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(fe(un,e,n),t[0]=un[0],t[1]=un[1],t[2]=un[2],t[3]=1+r,Pn(t,t))}),On=(hn=ze(),pn=ze(),function(t,e,n,r,i,a){return tn(hn,e,i,a),tn(pn,n,r,a),tn(t,hn,pn,2*a*(1-a)),t}),Dn=(vn=new q(9),q!=Float32Array&&(vn[1]=0,vn[2]=0,vn[3]=0,vn[5]=0,vn[6]=0,vn[7]=0),vn[0]=1,vn[4]=1,vn[8]=1,fn=vn,function(t,e,n,r){return fn[0]=n[0],fn[3]=n[1],fn[6]=n[2],fn[1]=r[0],fn[4]=r[1],fn[7]=r[2],fn[2]=-e[0],fn[5]=-e[1],fn[8]=-e[2],Pn(t,an(t,fn))}),Rn={};function Ln(){var t=new q(2);return q!=Float32Array&&(t[0]=0,t[1]=0),t}function In(t){var e=new q(2);return e[0]=t[0],e[1]=t[1],e}function Nn(t,e){var n=new q(2);return n[0]=t,n[1]=e,n}function Fn(t,e){return t[0]=e[0],t[1]=e[1],t}function Bn(t,e,n){return t[0]=e,t[1]=n,t}function jn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function zn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Un(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function qn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Wn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Gn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Hn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function Yn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Xn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Zn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Qn(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function $n(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function Jn(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function tr(t){var e=t[0],n=t[1];return e*e+n*n}function er(t,e){return t[0]=-e[0],t[1]=-e[1],t}function nr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function rr(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function ir(t,e){return t[0]*e[0]+t[1]*e[1]}function ar(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function or(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function sr(t,e){e=e||1;var n=2*W()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function ur(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function lr(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function cr(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function hr(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function pr(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=i*s-a*o+n[0],t[1]=i*o+a*s+n[1],t}function vr(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),s=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function fr(t){return t[0]=0,t[1]=0,t}function dr(t){return"vec2("+t[0]+", "+t[1]+")"}function mr(t,e){return t[0]===e[0]&&t[1]===e[1]}function _r(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=U*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=U*Math.max(1,Math.abs(r),Math.abs(a))}t(Rn,"create",(function(){return Ln})),t(Rn,"clone",(function(){return In})),t(Rn,"fromValues",(function(){return Nn})),t(Rn,"copy",(function(){return Fn})),t(Rn,"set",(function(){return Bn})),t(Rn,"add",(function(){return jn})),t(Rn,"subtract",(function(){return zn})),t(Rn,"multiply",(function(){return Un})),t(Rn,"divide",(function(){return qn})),t(Rn,"ceil",(function(){return Wn})),t(Rn,"floor",(function(){return Gn})),t(Rn,"min",(function(){return Hn})),t(Rn,"max",(function(){return Kn})),t(Rn,"round",(function(){return Yn})),t(Rn,"scale",(function(){return Xn})),t(Rn,"scaleAndAdd",(function(){return Zn})),t(Rn,"distance",(function(){return Qn})),t(Rn,"squaredDistance",(function(){return $n})),t(Rn,"length",(function(){return Jn})),t(Rn,"squaredLength",(function(){return tr})),t(Rn,"negate",(function(){return er})),t(Rn,"inverse",(function(){return nr})),t(Rn,"normalize",(function(){return rr})),t(Rn,"len",(function(){return gr})),t(Rn,"dot",(function(){return ir})),t(Rn,"cross",(function(){return ar})),t(Rn,"lerp",(function(){return or})),t(Rn,"random",(function(){return sr})),t(Rn,"transformMat2",(function(){return ur})),t(Rn,"transformMat2d",(function(){return lr})),t(Rn,"transformMat3",(function(){return cr})),t(Rn,"transformMat4",(function(){return hr})),t(Rn,"rotate",(function(){return pr})),t(Rn,"angle",(function(){return vr})),t(Rn,"zero",(function(){return fr})),t(Rn,"str",(function(){return dr})),t(Rn,"exactEquals",(function(){return mr})),t(Rn,"equals",(function(){return _r})),t(Rn,"sub",(function(){return yr})),t(Rn,"mul",(function(){return br})),t(Rn,"div",(function(){return wr})),t(Rn,"dist",(function(){return kr})),t(Rn,"sqrDist",(function(){return xr})),t(Rn,"sqrLen",(function(){return Cr})),t(Rn,"forEach",(function(){return Er}));var gr=Jn,yr=zn,br=Un,wr=qn,kr=Qn,xr=$n,Cr=tr,Er=function(){var t=Ln();return function(e,n,r,i,a,o){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();function Mr(t,e,n,r){var i=t.createProgram();if([t.VERTEX_SHADER,t.FRAGMENT_SHADER].forEach((function(n,r){var a=function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;console.error(t.getShaderInfoLog(r)),t.deleteShader(r)}(t,n,e[r]);t.attachShader(i,a)})),n&&t.transformFeedbackVaryings(i,n,t.SEPARATE_ATTRIBS),r)for(var a in r)t.bindAttribLocation(i,r[a],a);if(t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;console.error(t.getProgramInfoLog(i)),t.deleteProgram(i)}function Tr(t,e,n){var r=t.createVertexArray();t.bindVertexArray(r);var i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=F(s.value,3),c=l[0],h=l[1],p=l[2];-1!=h&&(t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(h),t.vertexAttribPointer(h,p,t.FLOAT,!1,0,0))}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}if(n){var v=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,v),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),t.STATIC_DRAW)}return t.bindVertexArray(null),r}function Pr(t,e,n){var r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,n),t.bindBuffer(t.ARRAY_BUFFER,null),r}function Ar(t,e,n){var r=t.createFramebuffer(),i=[];return t.bindFramebuffer(t.FRAMEBUFFER,r),e.forEach((function(e,n){var r=t["COLOR_ATTACHMENT".concat(n)];t.framebufferTexture2D(t.FRAMEBUFFER,r,t.TEXTURE_2D,e,0),i.push(r)})),n&&t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0),t.drawBuffers(i),t.checkFramebufferStatus(t.FRAMEBUFFER)!=t.FRAMEBUFFER_COMPLETE&&console.error("could not complete render framebuffer setup",t.checkFramebufferStatus(t.FRAMEBUFFER)),t.bindFramebuffer(t.FRAMEBUFFER,null),r}function Sr(t,e,n,r){t.bindFramebuffer(t.FRAMEBUFFER,e),t.viewport(0,0,n,r)}function Vr(t,e,n,r,i){var a=t.createTexture();return t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),a}var Or=new WeakSet,Dr=function(){"use strict";function t(e,n){var r=this;c(this,t),_(this,Or),A(this,"rotationQuat",Ut.create()),this.canvas=e,this.updateCallback=n||function(){return null},this.pointerDown=!1,this.pointerDownPos=Rn.create(),this.pointerPos=Rn.create(),this.followPos=qt.create(),this.prevFollowPos=qt.create(),this.autoRotationSpeed=0,this.velocity=.0025,this.rotationAxis=qt.fromValues(0,1,0),e.style.touchAction="none",e.addEventListener("pointerdown",(function(t){r.pointerDownPos=Rn.fromValues(t.clientX,t.clientY),r.followPos=qt.fromValues(t.clientX,t.clientY,0),r.pointerPos=Rn.fromValues(t.clientX,t.clientY),r.prevFollowPos=qt.fromValues(t.clientX,t.clientY,0),r.pointerDown=!0,r.autoRotationSpeed=0})),e.addEventListener("pointerup",(function(t){r.pointerDown=!1})),e.addEventListener("pointerleave",(function(t){r.pointerDown=!1})),e.addEventListener("pointermove",(function(t){r.pointerDown&&(r.pointerPos[0]=t.clientX,r.pointerPos[1]=t.clientY)}))}return C(t,[{key:"update",value:function(t){var e,n=16/(t+.01),r=10*n;if(this.followPos[0]+=(this.pointerPos[0]-this.followPos[0])/r,this.followPos[1]+=(this.pointerPos[1]-this.followPos[1])/r,this.pointerDown){var i=m(this,Or,Rr).call(this,this.followPos),a=m(this,Or,Rr).call(this,this.prevFollowPos),o=qt.normalize(qt.create(),i),s=qt.normalize(qt.create(),a),u=qt.cross(qt.create(),i,a);qt.normalize(u,u);var l=Math.max(-1,Math.min(1,qt.dot(o,s))),c=Math.acos(l)*n*5;this.velocity=c,this.rotationAxis=qt.clone(u),e=Ut.setAxisAngle(Ut.create(),u,c)}else this.velocity*=this.velocity>.0075?.99:1,e=Ut.setAxisAngle(Ut.create(),this.rotationAxis,this.velocity);Ut.multiply(this.rotationQuat,e,this.rotationQuat),Ut.normalize(this.rotationQuat,this.rotationQuat),this.prevFollowPos=qt.clone(this.followPos),this.updateCallback()}}]),t}();function Rr(t){var e=this.canvas.clientWidth,n=this.canvas.clientHeight,r=Math.max(e,n)-1,i=(2*t[0]-e-1)/r,a=(2*t[1]-n-1)/r,o=0,s=i*i+a*a;return o=s<=.5?Math.sqrt(1-s):.5/Math.sqrt(s),qt.fromValues(-i,a,o)}var Lr=new WeakMap,Ir=new WeakMap,Nr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,jr=new WeakMap,zr=new WeakMap,Ur=new WeakMap,qr=new WeakMap,Wr=new WeakSet,Gr=new WeakSet,Hr=new WeakSet,Kr=function t(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.5;c(this,t),_(this,Wr),_(this,Gr),_(this,Hr),A(this,"height",50),A(this,"radius",20),A(this,"bevelRadius",13),A(this,"radiusSegments",32),A(this,"bevelSegments",8),f(this,Lr,{writable:!0,value:void 0}),f(this,Ir,{writable:!0,value:void 0}),f(this,Nr,{writable:!0,value:void 0}),f(this,Fr,{writable:!0,value:void 0}),f(this,Br,{writable:!0,value:void 0}),f(this,jr,{writable:!0,value:void 0}),f(this,zr,{writable:!0,value:[]}),f(this,Ur,{writable:!0,value:[]}),f(this,qr,{writable:!0,value:[]}),this.height=e,this.radius=n,this.bevelRadius=r,history.radiusSegments=i,this.bevelSegments=a,this.normalBendFactor=o,d(this,Lr,this.height/2),d(this,Ir,this.radius-this.bevelRadius),d(this,Nr,2*Math.PI/this.radiusSegments),d(this,Fr,.5*Math.PI/(this.bevelSegments+1)),d(this,Br,p(this,Fr)*this.normalBendFactor),d(this,jr,(.5*Math.PI-2*p(this,Br))/(this.bevelSegments+1)),m(this,Wr,Yr).call(this,!0),m(this,Gr,Xr).call(this,!0),m(this,Wr,Yr).call(this,!1),m(this,Gr,Xr).call(this,!1),m(this,Hr,Zr).call(this),this.vertices=new Float32Array(p(this,zr)),this.normals=new Float32Array(p(this,qr)),this.indices=new Uint16Array(p(this,Ur))};function Yr(){var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=n?p(this,Lr):-p(this,Lr),i=qt.fromValues(0,Math.sign(r),0),a=qt.fromValues(0,r,0),o=(t=p(this,zr)).push.apply(t,B(a))/3-1;(e=p(this,qr)).push.apply(e,B(i));for(var s=0;s<this.radiusSegments;++s){var u,l,c=s*p(this,Nr),h=p(this,Ir)*Math.cos(c),v=p(this,Ir)*Math.sin(c);(u=p(this,zr)).push.apply(u,B(qt.fromValues(h,a[1],v)));var f=.5*Math.PI-p(this,Br),d=Math.sin(f),m=Math.cos(f)*Math.cos(c),_=Math.cos(f)*Math.sin(c),g=qt.fromValues(m,n?d:-d,_),y=qt.normalize(qt.create(),g);(l=p(this,qr)).push.apply(l,B(y)),n?p(this,Ur).push(o,o+(s+1)%this.radiusSegments+1,o+s+1):p(this,Ur).push(o,o+s+1,o+(s+1)%this.radiusSegments+1)}}function Xr(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=p(this,zr).length/3,n=(this.bevelSegments+2)*this.radiusSegments,r=t?p(this,Lr)-this.bevelRadius:this.bevelRadius-p(this,Lr),i=0,a=0;a<this.radiusSegments;++a)for(var o=a*p(this,Nr),s=p(this,Ir)*Math.cos(o),u=p(this,Ir)*Math.sin(o),l=qt.fromValues(s,r,u),c=0;c<=this.bevelSegments+1;++c){var h,v,f=.5*Math.PI-c*p(this,Fr),d=this.bevelRadius*Math.sin(f),m=this.bevelRadius*Math.cos(f)*Math.cos(o),_=this.bevelRadius*Math.cos(f)*Math.sin(o),g=qt.fromValues(m,t?d:-d,_),y=qt.add(qt.create(),l,g);(h=p(this,zr)).push.apply(h,B(y));var b=.5*Math.PI-p(this,Br)-c*p(this,jr),w=this.bevelRadius*Math.sin(b),k=this.bevelRadius*Math.cos(b)*Math.cos(o),x=this.bevelRadius*Math.cos(b)*Math.sin(o),C=qt.fromValues(k,t?w:-w,x),E=qt.normalize(qt.create(),C);if((v=p(this,qr)).push.apply(v,B(E)),c<=this.bevelSegments){var M=(i+(this.bevelSegments+2))%n;t?(p(this,Ur).push(e+i,e+M,e+M+1),p(this,Ur).push(e+i,e+M+1,e+i+1)):(p(this,Ur).push(e+i,e+M+1,e+M),p(this,Ur).push(e+i,e+i+1,e+M+1))}i++}}function Zr(){for(var t=p(this,zr).length/3,e=0,n=0;n<this.radiusSegments;++n){var r,i,a,o,s=n*p(this,Nr),u=this.radius*Math.cos(s),l=this.radius*Math.sin(s),c=qt.fromValues(u,p(this,Lr)-this.bevelRadius,l),h=qt.fromValues(u,this.bevelRadius-p(this,Lr),l),v=p(this,Br),f=Math.sin(v),d=Math.cos(v)*Math.cos(s),m=Math.cos(v)*Math.sin(s),_=qt.fromValues(d,f,m),g=qt.fromValues(d,-f,m),y=qt.normalize(qt.create(),_),b=qt.normalize(qt.create(),g);qt.normalize(qt.create(),qt.fromValues(u,0,l));(r=p(this,zr)).push.apply(r,B(c)),(i=p(this,zr)).push.apply(i,B(h)),(a=p(this,qr)).push.apply(a,B(y)),(o=p(this,qr)).push.apply(o,B(b));var w=(e+2)%(2*this.radiusSegments);p(this,Ur).push(t+e,t+w,t+w+1),p(this,Ur).push(t+e,t+w+1,t+e+1),e+=2}}var Qr=new WeakMap,$r=new WeakMap,Jr=new WeakMap,ti=function(){"use strict";function t(e,n,r,i){c(this,t),f(this,Qr,{writable:!0,value:100}),f(this,$r,{writable:!0,value:0}),f(this,Jr,{writable:!0,value:[]}),this.a0=e,this.c0=n,this.c1=r,this.a1=i;var a=this.pointAt(0);p(this,Jr).push(0);for(var o=1;o<=p(this,Qr);++o){var s=o/p(this,Qr),u=this.pointAt(s);p(this,Jr)[o]=p(this,Jr)[o-1]+qt.distance(a,u),a=u}d(this,$r,p(this,Jr)[p(this,Qr)])}return C(t,[{key:"pointAt",value:function(t){var e=t*t,n=e*t,r=3*e-n-3*t+1,i=3*n-6*e+3*t,a=-3*n+3*e,o=n,s=qt.scale(qt.create(),this.a0,r),u=qt.scale(qt.create(),this.c0,i),l=qt.scale(qt.create(),this.c1,a),c=qt.scale(qt.create(),this.a1,o),h=qt.add(qt.create(),s,u),p=qt.add(qt.create(),l,c);return qt.add(qt.create(),h,p)}},{key:"velocityAt",value:function(t){var e=t*t,n=-3*e+6*t-3,r=9*e-12*t+3,i=-9*e+6*t,a=3*e,o=qt.scale(qt.create(),this.a0,n),s=qt.scale(qt.create(),this.c0,r),u=qt.scale(qt.create(),this.c1,i),l=qt.scale(qt.create(),this.a1,a),c=qt.add(qt.create(),o,s),h=qt.add(qt.create(),u,l);return qt.add(qt.create(),c,h)}},{key:"map",value:function(t){for(var e=t*p(this,$r),n=p(this,Qr),r=0,i=0;r<n;)i=r+((n-r)/2|0),p(this,Jr)[i]<e?r=i+1:n=i;p(this,Jr)[i]>e&&i--;var a=p(this,Jr)[i];return a===e?i/p(this,Qr):(i+(e-a)/(p(this,Jr)[i+1]-a))/p(this,Qr)}}]),t}(),ei=(zr=new WeakMap,Ur=new WeakMap,qr=new WeakMap,new WeakMap),ni=new WeakMap,ri=new WeakMap,ii=new WeakMap,ai=new WeakSet,oi=function(){"use strict";function t(){c(this,t),_(this,ai),f(this,zr,{writable:!0,value:[]}),f(this,Ur,{writable:!0,value:[]}),f(this,qr,{writable:!0,value:[]}),f(this,ei,{writable:!0,value:[]}),f(this,ni,{writable:!0,value:10}),f(this,ri,{writable:!0,value:7.5}),f(this,ii,{writable:!0,value:20}),A(this,"contourBezierPoints",{a0:[0,0,0],c0:[0,.4,0],a1:[0,1,-1],c1:[0,.4,.1]});for(var e=0;e<=12;++e)for(var n=e/12,r=0;r<=8;++r){var i,a,o=(4-r)/4,s=m(this,ai,si).call(this,o),u=s.map(n),l=s.pointAt(u),h=qt.normalize(qt.create(),s.velocityAt(u)),v=Math.sqrt(2-o*o),d=-l[0],g=l[1],y=l[2]+1.5*(1-n*n*n)*(1-v);(i=p(this,zr)).push.apply(i,B(qt.fromValues(d,g,y)));var b=qt.normalize(qt.create(),qt.fromValues(-d,0,-y)),w=h[2]/h[1],k=qt.rotateX(qt.create(),b,qt.fromValues(0,0,0),Math.atan(w));(a=p(this,qr)).push.apply(a,B(k)),p(this,ei).push(o,n)}for(var x=0;x<12;++x)for(var C=0;C<8;++C)p(this,Ur).push(9*x+C,9*x+C+1,9*(x+1)+C+1),p(this,Ur).push(9*(x+1)+C+1,9*(x+1)+C,9*x+C);this.vertices=new Float32Array(p(this,zr)),this.normals=new Float32Array(p(this,qr)),this.uvs=new Float32Array(p(this,ei)),this.indices=new Uint16Array(p(this,Ur))}return C(t,[{key:"extent",get:function(){var t=B(this.contourBezierPoints.a1);return t[1]*=p(this,ni),t[2]*=p(this,ii),t}}]),t}();function si(t){var e=.02*p(this,ri),n=B(this.contourBezierPoints.a0),r=B(this.contourBezierPoints.c0),i=B(this.contourBezierPoints.a1),a=B(this.contourBezierPoints.c1);return n[0]=e*t,r[0]=n[0],a[0]=p(this,ri)*t,r[1]=r[1]*p(this,ni),a[1]=a[1]*p(this,ni),i[1]=i[1]*p(this,ni),i[2]*=p(this,ii),a[2]*=p(this,ii),new ti(n,r,a,i)}var ui,li=function(){"use strict";function t(n){c(this,t),this.gl=n,this.program=Mr(n,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\n\nvoid main() {\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n}"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nout vec4 outColor;\n\nvoid main() {\n    outColor = vec4(1., 0., 0., 1.);\n}\n")],null,{a_position:0}),this.locations={a_position:n.getAttribLocation(this.program,"a_position"),u_worldMatrix:n.getUniformLocation(this.program,"u_worldMatrix"),u_viewMatrix:n.getUniformLocation(this.program,"u_viewMatrix"),u_projectionMatrix:n.getUniformLocation(this.program,"u_projectionMatrix")}}return C(t,[{key:"render",value:function(t,e,n,r,i){var a=this.gl;a.useProgram(this.program),a.enable(a.CULL_FACE),a.enable(a.DEPTH_TEST),a.uniformMatrix4fv(this.locations.u_worldMatrix,!1,t),a.uniformMatrix4fv(this.locations.u_viewMatrix,!1,e),a.uniformMatrix4fv(this.locations.u_projectionMatrix,!1,n),a.bindVertexArray(r),a.drawArrays(a.LINE_STRIP,0,i)}}]),t}();ui="#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\nin mat4 a_instanceMatrix;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * a_instanceMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * a_instanceMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n\n    gl_PointSize = 2.;\n}\n";var ci;ci="#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform mat4 u_inversProjectionMatrix;\nuniform float u_frames;\nuniform sampler2D u_gradientTexture;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 VN = normalize(v_viewNormal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., .5, 4.));\n    float NdL = max(0., dot(N, L));\n\n    // the albedo term from the leaf gradient with some distortion\n    vec2 uv = vec2(v_uv.y, v_uv.x);\n    // apply line texture\n    uv.x += sin(v_uv.x * PI * 5.) * 0.1;\n    vec4 albedo = texture(u_gradientTexture, uv);\n    // darken the edges\n    albedo *= min(1., 1. - pow(uv.y, 2.) * 0.1 + uv.x * 0.1);\n\n    // the diffuse term\n    float diffuse = (NdL * NdL * NdL) * 0.1 + .95;\n\n    outColor = albedo * diffuse;\n}\n";var hi={rand_vect:function(){var t=2*Math.random()*Math.PI;return{x:Math.cos(t),y:Math.sin(t)}},dot_prod_grid:function(t,e,n,r){var i,a=t-n,o=e-r;return this.gradients[[n,r]]?i=this.gradients[[n,r]]:(i=this.rand_vect(),this.gradients[[n,r]]=i),a*i.x+o*i.y},smootherstep:function(t){return 6*Math.pow(t,5)-15*Math.pow(t,4)+10*Math.pow(t,3)},interp:function(t,e,n){return e+this.smootherstep(t)*(n-e)},seed:function(){this.gradients={},this.memory={}},get:function(t,e){if(this.memory.hasOwnProperty([t,e]))return this.memory[[t,e]];var n=Math.floor(t),r=Math.floor(e),i=this.dot_prod_grid(t,e,n,r),a=this.dot_prod_grid(t,e,n+1,r),o=this.dot_prod_grid(t,e,n,r+1),s=this.dot_prod_grid(t,e,n+1,r+1),u=this.interp(t-n,i,a),l=this.interp(t-n,o,s),c=this.interp(e-r,u,l);return this.memory[[t,e]]=c,c}};hi.seed();var pi=function(t){return--t*t*t+1},vi=new WeakMap,fi=new WeakMap,di=new WeakMap,mi=new WeakSet,_i=new WeakSet,gi=new WeakSet,yi=new WeakSet,bi=new WeakSet,wi=new WeakSet,ki=new WeakSet,xi=function(){"use strict";function t(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;c(this,t),_(this,mi),_(this,_i),_(this,gi),_(this,yi),_(this,bi),_(this,wi),_(this,ki),f(this,vi,{writable:!0,value:18}),f(this,fi,{writable:!0,value:2}),f(this,di,{writable:!0,value:p(this,vi)*p(this,fi)}),A(this,"leafInstances",void 0),A(this,"onLeafGrow",void 0),A(this,"onLeafWither",void 0),A(this,"onPlantGrow",void 0),this.context=n,this.vesselHeight=r,this.vesselRadius=i,this.vesselBevelRadius=a,this.animationDoneCallback=o,this.modelMatrix=z.translate(z.create(),z.create(),qt.fromValues(0,-this.vesselHeight/2,0));var s=this.context;this.leafProgram=Mr(s,[e(ui),e(ci)],null,{a_position:0,a_normal:1,a_uv:2}),this.leafLocations={a_position:s.getAttribLocation(this.leafProgram,"a_position"),a_normal:s.getAttribLocation(this.leafProgram,"a_normal"),a_uv:s.getAttribLocation(this.leafProgram,"a_uv"),a_instanceMatrix:s.getAttribLocation(this.leafProgram,"a_instanceMatrix"),u_worldMatrix:s.getUniformLocation(this.leafProgram,"u_worldMatrix"),u_viewMatrix:s.getUniformLocation(this.leafProgram,"u_viewMatrix"),u_projectionMatrix:s.getUniformLocation(this.leafProgram,"u_projectionMatrix"),u_inversProjectionMatrix:s.getUniformLocation(this.leafProgram,"u_inversProjectionMatrix"),u_worldInverseTransposeMatrix:s.getUniformLocation(this.leafProgram,"u_worldInverseTransposeMatrix"),u_cameraPosition:s.getUniformLocation(this.leafProgram,"u_cameraPosition"),u_gradientTexture:s.getUniformLocation(this.leafProgram,"u_gradientTexture")},this.leafGeometry=new oi,this.leafBuffers={position:Pr(s,this.leafGeometry.vertices,s.STATIC_DRAW),normal:Pr(s,this.leafGeometry.normals,s.STATIC_DRAW),uv:Pr(s,this.leafGeometry.uvs,s.STATIC_DRAW),numElem:this.leafGeometry.indices.length},this.leafVAO=Tr(s,[[this.leafBuffers.position,this.leafLocations.a_position,3],[this.leafBuffers.normal,this.leafLocations.a_normal,3],[this.leafBuffers.uv,this.leafLocations.a_uv,2]],this.leafGeometry.indices),this.leafGradientTexture=Vr(s,s.LINEAR,s.LINEAR,s.MIRRORED_REPEAT,s.MIRRORED_REPEAT);var u=new Uint8Array([221,255,185,134,224,69,114,214,80,134,224,69,134,224,69,211,245,144,225,255,174]);s.bindTexture(s.TEXTURE_2D,this.leafGradientTexture),s.texImage2D(s.TEXTURE_2D,0,s.RGB,7,1,0,s.RGB,s.UNSIGNED_BYTE,u),m(this,mi,Ci).call(this)}return C(t,[{key:"generate",value:function(t){m(this,_i,Ei).call(this),m(this,gi,Mi).call(this,t),this.onPlantGrow&&this.onPlantGrow()}},{key:"update",value:function(t){m(this,yi,Ti).call(this,t)}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=z.multiply(z.create(),t.worldMatrix,this.modelMatrix);e&&this.geometryHelper.render(n,t.viewMatrix,t.projectionMatrix,this.stemVAO,this.stemBuffers.numElem),m(this,bi,Pi).call(this,t,n)}}]),t}();function Ci(){var t=this.context;this.leafInstances={matricesArray:new Float32Array(16*p(this,di)),matrices:[],bindMatrices:[],buffer:t.createBuffer(),animationParams:[]};for(var e=p(this,di),n=0;n<e;++n){var r=new Float32Array(this.leafInstances.matricesArray.buffer,64*n,16);r.set(z.create()),this.leafInstances.matrices.push(r),this.leafInstances.bindMatrices.push(z.create())}t.bindVertexArray(this.leafVAO),t.bindBuffer(t.ARRAY_BUFFER,this.leafInstances.buffer),t.bufferData(t.ARRAY_BUFFER,this.leafInstances.matricesArray.byteLength,t.DYNAMIC_DRAW);for(var i=0;i<4;++i){var a=this.leafLocations.a_instanceMatrix+i;t.enableVertexAttribArray(a),t.vertexAttribPointer(a,4,t.FLOAT,!1,64,16*i),t.vertexAttribDivisor(a,1)}t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}function Ei(){var t=this.vesselHeight/2,e=2*Math.random()*Math.PI,n=Math.random()*(this.vesselRadius-this.vesselBevelRadius),r=qt.fromValues(n*Math.cos(e),0,n*Math.sin(e));e=2*Math.random()*Math.PI;var i=qt.fromValues(n*Math.cos(e),this.vesselHeight,n*Math.sin(e)),a=.1*this.vesselBevelRadius;e=2*Math.random()*Math.PI;var o=Math.random()*(t-a)+a,s=Math.random()*this.vesselRadius,u=qt.fromValues(s*Math.cos(e),o,s*Math.sin(e));e=2*Math.random()*Math.PI,o=Math.random()*(t-a)+t;var l=Math.random()*this.vesselRadius,c=qt.fromValues(l*Math.cos(e),o,l*Math.sin(e)),h=this.context;this.stemVertices=[],this.stemCurve=new ti(r,u,c,i);for(var v=0;v<=p(this,vi);++v){var f,d=v/p(this,vi);(f=this.stemVertices).push.apply(f,B(this.stemCurve.pointAt(this.stemCurve.map(d))))}this.stemVerticesData=new Float32Array(this.stemVertices),this.stemVAO?(h.bindBuffer(h.ARRAY_BUFFER,this.stemBuffers.position),h.bufferSubData(h.ARRAY_BUFFER,0,this.stemVerticesData),h.bindBuffer(h.ARRAY_BUFFER,null)):(this.stemBuffers={position:Pr(h,this.stemVerticesData,h.DYNAMIC_DRAW),numElem:this.stemVertices.length/3},this.geometryHelper=new li(h),this.stemVAO=Tr(h,[[this.stemBuffers.position,this.geometryHelper.locations.a_position,3]]))}function Mi(t){this.context;this.averageLeafDuration=300,this.leafStaggerDelay=2.5,this.totalDuration=0;for(var e=z.rotateX(z.create(),z.create(),-Math.PI/2),n=p(this,di),r=this.vesselHeight/n*.015,i=qt.fromValues(0,0,1),a=this.leafGeometry.extent,o=qt.length(a),s=0;s<n;++s){var u=s/(1.2*n)+.03,l=z.create(),c=z.create(),h=Math.random()*r-r/2,v=this.stemCurve.map(u+h),f=this.stemCurve.pointAt(v);z.translate(c,l,f);var d=qt.normalize(qt.create(),this.stemCurve.velocityAt(v));qt.rotateY(i,i,qt.create(),Math.random()*Math.PI*2-Math.PI);var _=z.targetTo(z.create(),qt.create(),d,i);z.multiply(_,_,e),z.multiply(c,c,_);for(var g=z.multiply(z.create(),this.modelMatrix,c),y=qt.transformMat4(qt.create(),a,g),b=qt.transformMat4(qt.create(),qt.create(),g),w=qt.normalize(qt.create(),qt.subtract(qt.create(),y,b)),k=qt.clone(b),x=0;x<4;++x){var C=-m(this,wi,Ai).call(this,k);qt.add(k,k,qt.scale(qt.create(),w,C))}var E=qt.subtract(qt.create(),k,b),M=Math.min(1.2,qt.length(E)/o);z.scale(c,c,[M,M,M]),this.leafInstances.bindMatrices[s]=c;var T=Math.max(.75*this.averageLeafDuration,this.averageLeafDuration*M);this.leafInstances.animationParams[s]={duration:T},this.totalDuration=Math.max(this.totalDuration,T+this.leafStaggerDelay*s)}this.startFrame=t,this.leafAnimationStartNdx=-1}function Ti(t){for(var e=this.context,n=p(this,di),r=Math.min(this.totalDuration,t-this.startFrame),i=0;i<n;++i){var a=this.leafInstances.animationParams[i].duration,o=i*this.leafStaggerDelay,s=Math.min(a,Math.max(0,r-o))/a;this.onLeafGrow&&s>0&&i>this.leafAnimationStartNdx&&(this.leafAnimationStartNdx=i,this.onLeafGrow(i));var u=s;s<=.2?u/=.2:u=s>.8?1-(s-.8)/.2:1;var l=.8*(1-(u=pi(u))*u)+.2,c=10*u*u*.5+1,h=.5*hi.get(s*c,s*c)*l,v=this.leafInstances.bindMatrices[i],f=z.fromScaling(z.create(),qt.fromValues(u,u,u));z.rotateX(f,f,h),z.multiply(f,v,f),z.copy(this.leafInstances.matrices[i],f)}e.bindBuffer(e.ARRAY_BUFFER,this.leafInstances.buffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.leafInstances.matricesArray),e.bindBuffer(e.ARRAY_BUFFER,null),r>=this.totalDuration&&this.animationDoneCallback&&this.animationDoneCallback()}function Pi(t,e){var n=this.context;n.useProgram(this.leafProgram),n.bindVertexArray(this.leafVAO),n.uniformMatrix4fv(this.leafLocations.u_viewMatrix,!1,t.viewMatrix),n.uniformMatrix4fv(this.leafLocations.u_projectionMatrix,!1,t.projectionMatrix),n.uniformMatrix4fv(this.leafLocations.u_inversProjectionMatrix,!1,t.inversProjectionMatrix),n.uniform3f(this.leafLocations.u_cameraPosition,t.cameraMatrix[12],t.cameraMatrix[14],t.cameraMatrix[14]),n.uniformMatrix4fv(this.leafLocations.u_worldMatrix,!1,e),n.uniformMatrix4fv(this.leafLocations.u_worldInverseTransposeMatrix,!1,t.worldInverseTransposeMatrix),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.leafGradientTexture),n.uniform1i(this.leafProgram.u_gradientTexture,0),n.drawElementsInstanced(n.TRIANGLES,this.leafBuffers.numElem,n.UNSIGNED_SHORT,0,p(this,di)),n.cullFace(n.FRONT);var r=z.scale(z.create(),t.worldInverseTransposeMatrix,qt.fromValues(-1,-1,-1));n.uniformMatrix4fv(this.leafLocations.u_worldInverseTransposeMatrix,!1,r),n.drawElementsInstanced(n.TRIANGLES,this.leafBuffers.numElem,n.UNSIGNED_SHORT,0,p(this,di)),n.cullFace(n.BACK)}function Ai(t){var e=.93;return m(this,ki,Si).call(this,t,this.vesselRadius*e,this.vesselBevelRadius*e,this.vesselHeight/2*e)}function Si(t,e,n,r){var i=Rn.fromValues(Rn.length(Rn.fromValues(t[0],t[2]))-e+n,Math.abs(t[1])-r+n);return Math.min(Math.max(i[0],i[1]),0)+Rn.length(Rn.fromValues(Math.max(i[0],0),Math.max(i[1],0)))-n}var Vi="14.7.77",Oi={};!function(t,e,n,r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=i(e),o=i(n),s=i(r),u=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},l=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},c=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},p=function(t,e,n){var r=n.startTime,i=n.target,a=n.timeConstant;return i+(e-i)*Math.exp((r-t)/a)},v=function(t){return"exponentialRampToValue"===t.type},f=function(t){return"linearRampToValue"===t.type},d=function(t){return v(t)||f(t)},m=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},g=function t(e,n,r,i){var a=e[n];return void 0===a?i:d(a)||m(a)?a.value:_(a)?a.values[a.values.length-1]:p(r,t(e,n-1,a.startTime,i),a)},y=function(t,e,n,r,i){return void 0===n?[r.insertTime,i]:d(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,g(t,e-1,n.startTime,i)]},b=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},k=function(t){return b(t)||w(t)?t.cancelTime:v(t)||f(t)?t.endTime:t.startTime},x=function(t,e,n,r){var i=r.endTime,a=r.value;return n===a?a:0<n&&0<a||n<0&&a<0?n*Math.pow(a/n,(t-e)/(i-e)):0},C=function(t,e,n,r){return n+(t-e)/(r.endTime-e)*(r.value-n)},E=function(t,e){var n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},M=function(t,e){var n=e.duration,r=e.startTime,i=e.values,a=(t-r)/n*(i.length-1);return E(i,a)},T=function(t){return"setTarget"===t.type},P=function(t){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return s.default(e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=k(t);if(b(t)||w(t)){var n=this._automationEvents.findIndex((function(n){return w(t)&&_(n)?n.startTime+n.duration>=e:k(n)>=e})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&d(r)){if(T(i))throw new Error("The internal list is malformed.");var a=_(i)?i.startTime+i.duration:k(i),o=_(i)?i.values[i.values.length-1]:i.value,s=v(r)?x(e,a,o,r):C(e,a,o,r),p=v(r)?u(s,e,this._currenTime):l(s,e,this._currenTime);this._automationEvents.push(p)}void 0!==i&&T(i)&&this._automationEvents.push(c(this.getValue(e),e)),void 0!==i&&_(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var m=this._automationEvents.findIndex((function(t){return k(t)>e})),g=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==g&&_(g)&&k(g)+g.duration>e)return!1;var y=v(t)?u(t.value,t.endTime,this._currenTime):f(t)?l(t.value,e,this._currenTime):t;if(-1===m)this._automationEvents.push(y);else{if(_(t)&&e+t.duration>k(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,y)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return k(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),r=n[0];T(r)&&n.unshift(c(g(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return k(e)>t})),n=this._automationEvents[e],r=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[r];if(void 0!==i&&T(i)&&(void 0===n||!d(n)||n.insertTime>t))return p(t,g(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(void 0!==i&&m(i)&&(void 0===n||!d(n)))return i.value;if(void 0!==i&&_(i)&&(void 0===n||!d(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?M(t,i):i.values[i.values.length-1];if(void 0!==i&&d(i)&&(void 0===n||!d(n)))return i.value;if(void 0!==n&&v(n)){var o=y(this._automationEvents,r,i,n,this._defaultValue),s=a.default(o,2),u=s[0],l=s[1];return x(t,u,l,n)}if(void 0!==n&&f(n)){var c=y(this._automationEvents,r,i,n,this._defaultValue),h=a.default(c,2),b=h[0],w=h[1];return C(t,b,w,n)}return this._defaultValue}}]),e}(Symbol.iterator),A=function(t){return{cancelTime:t,type:"cancelAndHold"}},S=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},V=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},O=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},D=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}};t.AutomationEventList=P,t.createCancelAndHoldAutomationEvent=A,t.createCancelScheduledValuesAutomationEvent=S,t.createExponentialRampToValueAutomationEvent=V,t.createLinearRampToValueAutomationEvent=O,t.createSetTargetAutomationEvent=D,t.createSetValueAutomationEvent=c,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(Oi,a("c2tl2"),a("clMMr"),a("drNVG"));var Di=new WeakSet,Ri=new WeakMap,Li=new WeakMap,Ii=new WeakMap,Ni=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,ji=new WeakMap,zi=new WeakMap,Ui=new WeakMap,qi={construct:function(){return qi}},Wi=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Gi=function(t,e){for(var n=[],r=t.replace(/^[\s]+/,""),i=r.match(Wi);null!==i;){var a=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());n.push(o),i=(r=r.slice(i[0].length).replace(/^[\s]+/,"")).match(Wi)}return[n.join(";"),r]},Hi=function(t){if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ki=function(t){if(!function(t){try{new new Proxy(t,qi)}catch(t){return!1}return!0}(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Yi=function(t,e){var n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Xi=function(t,e){var n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");var r=F(n,1)[0];return t.delete(r),r},Zi=function(t,e,n,r){var i=Yi(t,e),a=Xi(i,(function(t){return t[0]===n&&t[1]===r}));return 0===i.size&&t.delete(e),a},Qi=function(t){return Yi(Bi,t)},$i=function(t){if(Di.has(t))throw new Error("The AudioNode is already stored.");Di.add(t),Qi(t).forEach((function(t){return t(!0)}))},Ji=function(t){return"port"in t},ta=function(t){if(!Di.has(t))throw new Error("The AudioNode is not stored.");Di.delete(t),Qi(t).forEach((function(t){return t(!1)}))},ea=function(t,e){!Ji(t)&&e.every((function(t){return 0===t.size}))&&ta(t)},na={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ra={},ia=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),o=new P(r||[]);return a._invoke=function(t,e,n){var r=h;return function(i,a){if(r===v)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?f:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=f,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",f="completed",d={};function m(){}function _(){}function g(){}var y={};u(y,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,a)&&(y=w);var k=g.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,o,s){var u=c(t[i],t,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function A(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:e,done:!0}}return _.prototype=g,u(k,"constructor",g),u(g,"constructor",_),_.displayName=u(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},x(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new C(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(ra);try{regeneratorRuntime=ia}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=ia:Function("r","regeneratorRuntime = r")(ia)}var aa=function(t,e){return t.context===e},oa=function(t){try{t.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},sa=function(){return new DOMException("","IndexSizeError")},ua=function(t){var e;t.getChannelData=(e=t.getChannelData,function(n){try{return e.call(t,n)}catch(t){if(12===t.code)throw sa();throw t}})},la={numberOfChannels:1},ca=-34028234663852886e22,ha=34028234663852886e22,pa=function(t){return Di.has(t)},va={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},fa=function(t){return Yi(Ri,t)},da=function(t){return Yi(Ii,t)},ma=function(t,e){fa(t).activeInputs.forEach((function(n){return n.forEach((function(n){var r=F(n,1)[0];e.includes(t)||ma(r,B(e).concat([t]))}))}));var n=function(t){return"playbackRate"in t}(t)?[t.playbackRate]:Ji(t)?Array.from(t.parameters.values()):function(t){return"frequency"in t&&"gain"in t}(t)?[t.Q,t.detune,t.frequency,t.gain]:function(t){return"offset"in t}(t)?[t.offset]:function(t){return!("frequency"in t)&&"gain"in t}(t)?[t.gain]:function(t){return"detune"in t&&"frequency"in t}(t)?[t.detune,t.frequency]:function(t){return"pan"in t}(t)?[t.pan]:[],r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=da(u);void 0!==l&&l.activeInputs.forEach((function(t){var n=F(t,1)[0];return ma(n,e)}))}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}pa(t)&&ta(t)},_a=function(t){ma(t.destination,[])},ga=function(t){return void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t)},ya=function(t){return"context"in t},ba=function(t){return ya(t[0])},wa=function(t,e,n,r){var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){if(n(s.value)){if(r)return!1;throw Error("The set contains at least one similar element.")}}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return t.add(e),!0},ka=function(t,e,n,r){var i=F(n,2),a=i[0],o=i[1];wa(t,[e,a,o],(function(t){return t[0]===e&&t[1]===a}),r)},xa=function(t,e,n){var r=F(e,3),i=r[0],a=r[1],o=r[2],s=t.get(i);void 0===s?t.set(i,new Set([[a,o]])):wa(s,[a,o],(function(t){return t[0]===a}),n)},Ca=function(t){return"inputs"in t},Ea=function(t,e,n,r){if(Ca(e)){var i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},Ma=function(t,e,n){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u[0]===e&&u[1]===n)return t.delete(u),u}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return null},Ta=function(t,e){if(!Qi(t).delete(e))throw new Error("Missing the expected event listener.")},Pa=function(t,e,n){var r=Yi(t,e),i=Xi(r,(function(t){return t[0]===n}));return 0===r.size&&t.delete(e),i},Aa=function(t,e,n,r){Ca(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Sa=function(t){return Yi(Li,t)},Va=function(t){return Yi(Ni,t)},Oa=function(t){return ji.has(t)},Da=function(t){return!Di.has(t)},Ra=function(t,e){return new Promise((function(n){if(null!==e)n(!0);else{var r=t.createScriptProcessor(256,1,1),i=t.createGain(),a=t.createBuffer(1,2,44100),o=a.getChannelData(0);o[0]=1,o[1]=1;var s=t.createBufferSource();s.buffer=a,s.loop=!0,s.connect(r).connect(t.destination),s.connect(i),s.disconnect(i),r.onaudioprocess=function(e){var i=e.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(function(t){return 1===t}))?n(!0):n(!1),s.stop(),r.onaudioprocess=null,s.disconnect(r),r.disconnect(t.destination)},s.start()}}))},La=function(t,e){var n=new Map,r=!0,i=!1,a=void 0,o=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value;try{for(var p,v=h[Symbol.iterator]();!(r=(p=v.next()).done);r=!0){var f=p.value,d=n.get(f);n.set(f,void 0===d?1:d+1)}}catch(t){i=!0,a=t}finally{try{r||null==v.return||v.return()}finally{if(i)throw a}}}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}n.forEach((function(t,n){return e(n,t)}))},Ia=function(t){return"context"in t},Na=function(t,e,n,r){var i=da(e),a=i.activeInputs,o=i.passiveInputs,s=fa(t).outputs,u=Qi(t),l=function(i){var s=Sa(t),u=Va(e);if(i){var l=Pa(o,t,n);ka(a,t,l,!1),r||Oa(t)||s.connect(u,n)}else{var c=function(t,e,n){return Xi(t,(function(t){return t[0]===e&&t[1]===n}))}(a,t,n);xa(o,c,!1),r||Oa(t)||s.disconnect(u,n)}};return!!wa(s,[e,n],(function(t){return t[0]===e&&t[1]===n}),!0)&&(u.add(l),pa(t)?ka(a,t,[n,l],!0):xa(o,[t,n,l],!0),!0)},Fa=function(t,e,n,r,i){var a=F(function(t,e,n,r){var i=fa(e),a=i.activeInputs,o=i.passiveInputs,s=Ma(a[r],t,n);return null===s?[Zi(o,t,n,r)[2],!1]:[s[2],!0]}(t,n,r,i),2),o=a[0],s=a[1];if(null!==o&&(Ta(t,o),!s||e||Oa(t)||Aa(Sa(t),Sa(n),r,i)),pa(n)){var u=fa(n).activeInputs;ea(n,u)}},Ba=function(t,e,n,r){var i=F(function(t,e,n){var r=da(e),i=r.activeInputs,a=r.passiveInputs,o=Ma(i,t,n);return null===o?[Pa(a,t,n)[1],!1]:[o[2],!0]}(t,n,r),2),a=i[0],o=i[1];null!==a&&(Ta(t,a),!o||e||Oa(t)||Sa(t).disconnect(Va(n),r))},ja=function(){"use strict";function t(e){c(this,t),this._map=new Map(e)}return C(t,[{key:"size",get:function(){return this._map.size}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return this._map.forEach((function(r,i){return t.call(e,r,i,n)}))}},{key:"get",value:function(t){return this._map.get(t)}},{key:"has",value:function(t){return this._map.has(t)}},{key:"keys",value:function(){return this._map.keys()}},{key:"values",value:function(){return this._map.values()}}]),t}(),za={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Ua(t,e,n,r,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{var a=t.getChannelData(r);if(0===e[n].byteLength)e[n]=a.slice(i,i+128);else{var o=new Float32Array(a.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}var qa,Wa=function(t,e,n,r,i){"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,i):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],i)},Ga=function(t,e){for(var n=[],r=0;r<t;r+=1){for(var i=[],a="number"==typeof e?e:e[r],o=0;o<a;o+=1)i.push(new Float32Array(128));n.push(i)}return n},Ha=function(t,e){var n=Yi(Ui,t),r=Sa(e);return Yi(n,r)},Ka=(qa=l(e(ra).mark((function t(n,r,i,a,o,s,u){var l,c,h,p,v,f,d,m,_,g,y,b,w,k,x,C,E,M,T;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=null===r?128*Math.ceil(n.context.length/128):r.length,c=a.channelCount*a.numberOfInputs,h=o.reduce((function(t,e){return t+e}),0),p=0===h?null:i.createBuffer(h,l,i.sampleRate),void 0!==s){t.next=6;break}throw new Error("Missing the processor constructor.");case 6:return v=fa(n),t.next=9,Ha(i,n);case 9:f=t.sent,d=Ga(a.numberOfInputs,a.channelCount),m=Ga(a.numberOfOutputs,o),_=Array.from(n.parameters.keys()).reduce((function(t,e){return D({},t,A({},e,new Float32Array(128)))}),{}),g=0;case 14:if(!(g<l)){t.next=33;break}if(a.numberOfInputs>0&&null!==r)for(y=0;y<a.numberOfInputs;y+=1)for(b=0;b<a.channelCount;b+=1)Ua(r,d[y],b,b,g);for(void 0!==s.parameterDescriptors&&null!==r&&s.parameterDescriptors.forEach((function(t,e){var n=t.name;Ua(r,_,n,c+e,g)})),w=0;w<a.numberOfInputs;w+=1)for(k=0;k<o[w];k+=1)0===m[w][k].byteLength&&(m[w][k]=new Float32Array(128));if(t.prev=18,x=d.map((function(t,e){return 0===v.activeInputs[e].size?[]:t})),C=u(g/i.sampleRate,i.sampleRate,(function(){return f.process(x,m,_)})),null!==p)for(E=0,M=0;E<a.numberOfOutputs;E+=1){for(T=0;T<o[E];T+=1)Wa(p,m[E],T,M+T,g);M+=o[E]}if(C){t.next=24;break}return t.abrupt("break",33);case 24:t.next=30;break;case 26:return t.prev=26,t.t0=t.catch(18),n.dispatchEvent(new ErrorEvent("processorerror",{colno:t.t0.colno,filename:t.t0.filename,lineno:t.t0.lineno,message:t.t0.message})),t.abrupt("break",33);case 30:g+=128,t.next=14;break;case 33:return t.abrupt("return",p);case 34:case"end":return t.stop()}}),t,null,[[18,26]])}))),function(t,e,n,r,i,a,o){return qa.apply(this,arguments)}),Ya={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Xa={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Za={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Qa={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},$a={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Ja=function(t){var e=new MessageChannel,n=e.port1,r=e.port2;return new Promise((function(e){var i=function(){r.onmessage=null,n.close(),r.close(),e()};r.onmessage=function(){return i()};try{n.postMessage(t,[t])}finally{i()}}))},to={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},eo=function(t,e,n){var r=e[n];if(void 0===r)throw t();return r},no={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ro={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},io=function(){return new DOMException("","InvalidStateError")},ao=function(){return new DOMException("","InvalidAccessError")},oo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},so=function(t,e,n,r,i,a,o,s,u,l,c){for(var h=l.length,p=s,v=0;v<h;v+=1){for(var f=n[0]*l[v],d=1;d<i;d+=1){var m=p-d&u-1;f+=n[d]*a[m],f-=t[d]*o[m]}for(var _=i;_<r;_+=1)f+=n[_]*a[p-_&u-1];for(var g=i;g<e;g+=1)f-=t[g]*o[p-g&u-1];a[p]=l[v],o[p]=f,p=p+1&u-1,c[v]=f}return p},uo=function(t,e,n,r){var i=n instanceof Float64Array?n:new Float64Array(n),a=r instanceof Float64Array?r:new Float64Array(r),o=i.length,s=a.length,u=Math.min(o,s);if(1!==i[0]){for(var l=0;l<o;l+=1)a[l]/=i[0];for(var c=1;c<s;c+=1)i[c]/=i[0]}for(var h=new Float32Array(32),p=new Float32Array(32),v=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels,d=0;d<f;d+=1){var m=t.getChannelData(d),_=v.getChannelData(d);h.fill(0),p.fill(0),so(i,o,a,s,u,h,p,0,32,m,_)}return v},lo=(function(){var t=l(e(ra).mark((function t(n,r,i,a,o,s,u,l,c,h,p,v,f,d,m,_){var g;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n(r,r)&&n(i,i)&&n(o,o)&&n(s,s)&&n(l,l)&&n(c,c)&&n(h,h)&&n(p,p)&&n(v,v)&&n(f,f)&&n(d,d))){t.next=5;break}return t.next=3,Promise.all([n(a,a),n(u,u),n(m,m),n(_,_)]);case 3:return g=t.sent,t.abrupt("return",g.every((function(t){return t})));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})))}(),{channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"}),co=function(t){var e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var n=t.decodeAudioData(e.buffer,(function(){}));return void 0!==n&&(n.catch((function(){})),!0)}catch(t){}return!1},ho={numberOfChannels:1},po=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},vo=function(t,e){po(t,e,"channelCount"),po(t,e,"channelCountMode"),po(t,e,"channelInterpretation")},fo=function(t){return"function"==typeof t.getFloatTimeDomainData},mo=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},_o=function(t){var e;t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if("number"==typeof i&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})},go=function(t){var e;t.stop=(e=t.stop,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},yo=function(t,e){return null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))))},bo=function(t){return new Promise((function(e,n){var r=new MessageChannel,i=r.port1,a=r.port2;i.onmessage=function(t){var n=t.data;i.close(),a.close(),e(n)},i.onmessageerror=function(t){var e=t.data;i.close(),a.close(),n(e)},a.postMessage(t)}))},wo=function(){var t=l(e(ra).mark((function t(n,r){var i;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bo(r);case 2:return i=t.sent,t.abrupt("return",new n(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ko=function(t,e){var n=t.createBiquadFilter();return vo(n,e),mo(n,e,"Q"),mo(n,e,"detune"),mo(n,e,"frequency"),mo(n,e,"gain"),po(n,e,"type"),n},xo=function(t,e){var n,r,i=t.createChannelSplitter(e.numberOfOutputs);return vo(i,e),r=(n=i).numberOfOutputs,Object.defineProperty(n,"channelCount",{get:function(){return r},set:function(t){if(t!==r)throw io()}}),Object.defineProperty(n,"channelCountMode",{get:function(){return"explicit"},set:function(t){if("explicit"!==t)throw io()}}),Object.defineProperty(n,"channelInterpretation",{get:function(){return"discrete"},set:function(t){if("discrete"!==t)throw io()}}),i},Co=function(t,e){return t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t},Eo=function(t,e){var n=t.createDelay(e.maxDelayTime);return vo(n,e),mo(n,e,"delayTime"),n},Mo=function(t,e){var n=t.createGain();return vo(n,e),mo(n,e,"gain"),n};function To(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Po(t,e){for(var n,r,i=[0,0],a=t.length-1;a>=0;a-=1)r=e,(i=[(n=i)[0]*r[0]-n[1]*r[1],n[0]*r[1]+n[1]*r[0]])[0]+=t[a];return i}var Ao,So,Vo,Oo,Do,Ro,Lo,Io,No,Fo,Bo,jo,zo,Uo,qo,Wo,Go,Ho,Ko,Yo,Xo,Zo,Qo,$o,Jo,ts,es,ns,rs,is,as,os,ss,us,ls,cs,hs,ps,vs,fs,ds,ms,_s,gs,ys,bs,ws,ks,xs,Cs,Es,Ms,Ts,Ps,As,Ss,Vs,Os,Ds,Rs,Ls,Is,Ns,Fs,Bs,js,zs,Us,qs,Ws=function(t,e,n,r){return t.createScriptProcessor(e,n,r)},Gs=function(){return new DOMException("","NotSupportedError")},Hs={numberOfChannels:1},Ks={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ys={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Xs={disableNormalization:!1},Zs={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Qs=function(){return new DOMException("","UnknownError")},$s={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Js=function(t,e,n){return void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0])},tu=function(t){if(null===t)return!1;var e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},eu=function(t,e,n,r){for(var i=t;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);var a=Object.getOwnPropertyDescriptor(i,e),o=a.get,s=a.set;Object.defineProperty(t,e,{get:n(o),set:r(s)})},nu=function(t,e,n){try{t.setValueAtTime(e,n)}catch(r){if(9!==r.code)throw r;nu(t,e,n+1e-7)}},ru=function(t){var e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},iu=function(t){var e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch(t){return!1}},au=function(t){var e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},ou=function(t,e){var n=e.createGain();t.connect(n);var r,i,a,o=(r=t.disconnect,function(){r.call(t,n),t.removeEventListener("ended",o)});t.addEventListener("ended",o),Co(t,n),t.stop=(i=t.stop,a=!1,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(a)try{i.call(t,e)}catch(t){n.gain.setValueAtTime(0,e)}else i.call(t,e),a=!0})},su=function(t,e){return function(n){var r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)}},uu=(Ao=wa,function(t,e,n,r){var i=F(n,3),a=i[0],o=i[1],s=i[2];Ao(t[o],[e,a,s],(function(t){return t[0]===e&&t[1]===a}),r)}),lu=function(t){return function(e,n,r,i){var a=F(r,3),o=a[0],s=a[1],u=a[2],l=e.get(o);void 0===l?e.set(o,new Set([[s,n,u]])):t(l,[s,n,u],(function(t){return t[0]===s&&t[1]===n}),i)}}(wa),cu=(So=Xi,function(t,e,n,r){return So(t[r],(function(t){return t[0]===e&&t[1]===n}))}),hu=new WeakMap,pu=(Vo=hu,function(t){var e;return null!==(e=Vo.get(t))&&void 0!==e?e:0}),vu=(Oo=new Map,Do=new WeakMap,function(t,e){var n=Do.get(t);if(void 0!==n)return n;var r=Oo.get(t);if(void 0!==r)return r;try{var i=e();return i instanceof Promise?(Oo.set(t,i),i.catch((function(){return!1})).then((function(e){return Oo.delete(t),Do.set(t,e),e}))):(Do.set(t,i),i)}catch(e){return Do.set(t,!1),!1}}),fu="undefined"==typeof window?null:window,du=(Ro=vu,Lo=sa,function(t,e){var n=t.createAnalyser();if(vo(n,e),!(e.maxDecibels>e.minDecibels))throw Lo();return po(n,e,"fftSize"),po(n,e,"maxDecibels"),po(n,e,"minDecibels"),po(n,e,"smoothingTimeConstant"),Ro(fo,(function(){return fo(n)}))||function(t){t.getFloatTimeDomainData=function(e){var n=new Uint8Array(e.length);t.getByteTimeDomainData(n);for(var r=Math.max(n.length,t.fftSize),i=0;i<r;i+=1)e[i]=.0078125*(n[i]-128);return e}}(n),n}),mu=(Io=fa,function(t){var e=Io(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer}),_u=function(t,n,r){return i=l(e(ra).mark((function i(a,o,s){var u;return e(ra).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=t(a),i.next=3,Promise.all(u.activeInputs.map((function(t,i){return Array.from(t).map(function(){var t=l(e(ra).mark((function t(u){var l,c,h,p,v,f;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=F(u,2),c=l[0],h=l[1],p=n(c),t.next=4,p.render(c,o);case 4:v=t.sent,f=a.context.destination,r(c)||a===f&&r(a)||v.connect(s,h,i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).reduce((function(t,e){return B(t).concat(B(e))}),[]));case 3:case"end":return i.stop()}}),i)}))),function(t,e,n){return i.apply(this,arguments)};var i}(fa,mu,Oa),gu=(No=du,Fo=Sa,Bo=_u,function(){var t,n=new WeakMap,r=(t=l(e(ra).mark((function t(r,i){var a,o;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Fo(r),aa(a,i)||(o={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant},a=No(i,o)),n.set(i,a),t.next=6,Bo(r,i,a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)});return{render:function(t,e){var i=n.get(e);return void 0!==i?Promise.resolve(i):r(t,e)}}}),yu=(jo=Fi,function(t){var e=jo.get(t);if(void 0===e)throw io();return e}),bu=function(t){return null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null}(fu),wu=(zo=bu,function(t){return null!==zo&&t instanceof zo}),ku=new WeakMap,xu=(Uo=su,function(){"use strict";function t(e){c(this,t),this._nativeEventTarget=e,this._listeners=new WeakMap}return C(t,[{key:"addEventListener",value:function(t,e,n){if(null!==e){var r=this._listeners.get(e);void 0===r&&(r=Uo(this,e),"function"==typeof e&&this._listeners.set(e,r)),this._nativeEventTarget.addEventListener(t,r,n)}}},{key:"dispatchEvent",value:function(t){return this._nativeEventTarget.dispatchEvent(t)}},{key:"removeEventListener",value:function(t,e,n){var r=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===r?null:r,n)}}]),t}()),Cu=function(t){return null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null}(fu),Eu=(qo=Cu,function(t){return null!==qo&&t instanceof qo}),Mu=function(t){return function(e){return null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode}}(fu),Tu=function(t){return function(e){return null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam}}(fu),Pu=function(t){return null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null}(fu),Au=function(t,e,n,r,i,a,o,u,l,h,p,v,f,d,m,_){return function(h){"use strict";O(y,h);var g=P(y);function y(e,r,i,a){var o;c(this,y),(o=g.call(this,i))._context=e,o._nativeAudioNode=i;var u=p(e);return v(u)&&!0!==n(Ra,(function(){return Ra(u,_)}))&&function(t){var e,n,r=new Map;t.connect=(e=t.connect.bind(t),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Ia(t)?e(t,n,i):e(t,n),o=r.get(t);return void 0===o?r.set(t,[{input:i,output:n}]):o.every((function(t){return t.input!==i||t.output!==n}))&&o.push({input:i,output:n}),a}),t.disconnect=(n=t.disconnect,function(e,i,a){n.apply(t);var o=!0,s=!1,u=void 0;if(void 0===e)r.clear();else if("number"==typeof e)try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=F(l.value,2),p=h[0],v=h[1].filter((function(t){return t.output!==e}));0===v.length?r.delete(p):r.set(p,v)}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}else if(r.has(e))if(void 0===i)r.delete(e);else{var f=r.get(e);if(void 0!==f){var d=f.filter((function(t){return t.output!==i&&(t.input!==a||void 0===a)}));0===d.length?r.delete(e):r.set(e,d)}}var m=!0,_=!1,g=void 0;try{for(var y,b=function(e,n){var r=F(n.value,2),i=r[0];r[1].forEach((function(e){Ia(i)?t.connect(i,e.output,e.input):t.connect(i,e.output)}))},w=r[Symbol.iterator]();!(m=(y=w.next()).done);m=!0)b(0,y)}catch(t){_=!0,g=t}finally{try{m||null==w.return||w.return()}finally{if(_)throw g}}})}(i),Li.set(s(o),i),Bi.set(s(o),new Set),"closed"!==e.state&&r&&$i(s(o)),t(s(o),a,i),o}return C(y,[{key:"channelCount",get:function(){return this._nativeAudioNode.channelCount},set:function(t){this._nativeAudioNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioNode.channelCountMode},set:function(t){this._nativeAudioNode.channelCountMode=t}},{key:"channelInterpretation",get:function(){return this._nativeAudioNode.channelInterpretation},set:function(t){this._nativeAudioNode.channelInterpretation=t}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._nativeAudioNode.numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._nativeAudioNode.numberOfOutputs}},{key:"connect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();var u=p(this._context),c=m(u);if(f(t)||d(t))throw a();if(ya(t)){var h=Sa(t);try{var v,_=Ea(this._nativeAudioNode,h,n,s),g=Da(this);(c||g)&&(v=this._nativeAudioNode).disconnect.apply(v,B(_)),"closed"!==this.context.state&&!g&&Da(t)&&$i(t)}catch(t){if(12===t.code)throw a();throw t}var y=e(this,t,n,s,c);if(y){var b=l([this],t);La(b,r(c))}return t}var w=Va(t);if("playbackRate"===w.name&&1024===w.maxValue)throw o();try{this._nativeAudioNode.connect(w,n),(c||Da(this))&&this._nativeAudioNode.disconnect(w,n)}catch(t){if(12===t.code)throw a();throw t}var k=Na(this,t,n,c);if(k){var x=l([this],t);La(x,r(c))}}},{key:"disconnect",value:function(t,e,n){var r,o=p(this._context),s=m(o);if(void 0===t)r=function(t,e){var n=fa(t),r=[],i=!0,a=!1,o=void 0;try{for(var s,u=n.outputs[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;ba(l)?Fa.apply(void 0,[t,e].concat(B(l))):Ba.apply(void 0,[t,e].concat(B(l))),r.push(l[0])}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n.outputs.clear(),r}(this,s);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();r=function(t,e,n){var r=fa(t),i=[],a=!0,o=!1,s=void 0;try{for(var u,l=r.outputs[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;c[1]===n&&(ba(c)?Fa.apply(void 0,[t,e].concat(B(c))):Ba.apply(void 0,[t,e].concat(B(c))),i.push(c[0]),r.outputs.delete(c))}}catch(t){o=!0,s=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}(this,s,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(ya(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(r=function(t,e,n,r,i){var a=fa(t);return Array.from(a.outputs).filter((function(t){return!(t[0]!==n||void 0!==r&&t[1]!==r||void 0!==i&&t[2]!==i)})).map((function(n){return ba(n)?Fa.apply(void 0,[t,e].concat(B(n))):Ba.apply(void 0,[t,e].concat(B(n))),a.outputs.delete(n),n[0]}))}(this,s,t,e,n),0===r.length)throw a()}var c=!0,h=!1,v=void 0;try{for(var f,d=r[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var _=f.value,g=l([this],_);La(g,u)}}catch(t){h=!0,v=t}finally{try{c||null==d.return||d.return()}finally{if(h)throw v}}}}]),y}(h)}((Wo=Ri,function(t,e,n){for(var r=[],i=0;i<n.numberOfInputs;i+=1)r.push(new Set);Wo.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),function(t,e,n,r,i,a,o,s,u,l,c,h,p){var v=new WeakMap;return function(f,d,m,_,g){var y=a(d),b=y.activeInputs,w=y.passiveInputs,k=a(f).outputs,x=s(f),C=function(a){var s=u(d),l=u(f);if(a){var y=Zi(w,f,m,_);t(b,f,y,!1),g||h(f)||n(l,s,m,_),p(d)&&$i(d)}else{var k=r(b,f,m,_);e(w,_,k,!1),g||h(f)||i(l,s,m,_);var x=o(d);if(0===x)c(d)&&ea(d,b);else{var C=v.get(d);void 0!==C&&clearTimeout(C),v.set(d,setTimeout((function(){c(d)&&ea(d,b)}),1e3*x))}}};return!!l(k,[d,m,_],(function(t){return t[0]===d&&t[1]===m&&t[2]===_}),!0)&&(x.add(C),c(f)?t(b,f,[m,_,C],!0):e(w,_,[f,m,C],!0),!0)}}(uu,lu,Ea,cu,Aa,fa,pu,Qi,Sa,wa,pa,Oa,Da),vu,function(t,e,n,r,i,a){return function(o){return function(s,u){var l=t.get(s);if(void 0===l){if(!o&&a(s)){var c=r(s),h=n(s).outputs,p=!0,v=!1,f=void 0;try{for(var d,m=h[Symbol.iterator]();!(p=(d=m.next()).done);p=!0){var _=d.value;if(ba(_)){var g=r(_[0]);e(c,g,_[1],_[2])}else{var y=i(_[0]);c.disconnect(y,_[1])}}}catch(t){v=!0,f=t}finally{try{p||null==m.return||m.return()}finally{if(v)throw f}}}t.set(s,u)}else t.set(s,l+u)}}}(ji,Aa,fa,Sa,Va,pa),sa,ao,Gs,function(t,e,n,r,i,a,o,s){return function(u,l){var c=e.get(u);if(void 0===c)throw new Error("Missing the expected cycle count.");var h=a(u.context),p=s(h);if(c===l){if(e.delete(u),!p&&o(u)){var v=r(u),f=n(u).outputs,d=!0,m=!1,_=void 0;try{for(var g,y=f[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;if(ba(b)){var w=r(b[0]);t(v,w,b[1],b[2])}else{var k=i(b[0]);v.connect(k,b[1])}}}catch(t){m=!0,_=t}finally{try{d||null==y.return||y.return()}finally{if(m)throw _}}}}else e.set(u,c-l)}}(Ea,ji,fa,Sa,Va,yu,pa,wu),function(t,e,n){return function r(i,a){var o=ya(a)?a:n(t,a);if(function(t){return"delayTime"in t}(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];var s=e(o).outputs;return Array.from(s).map((function(t){return r(B(i).concat([o]),t[0])})).reduce((function(t,e){return t.concat(e)}),[])}}(ku,fa,Yi),xu,yu,Eu,Mu,Tu,wu,Pu),Su=function(t,e,n,r,i,a){return function(t){"use strict";O(s,t);var o=P(s);function s(t,n){var u;c(this,s);var l=i(t),h=D({},na,n),p=r(l,h),v=a(l)?e():null;return(u=o.call(this,t,!1,p,v))._nativeAnalyserNode=p,u}return C(s,[{key:"fftSize",get:function(){return this._nativeAnalyserNode.fftSize},set:function(t){this._nativeAnalyserNode.fftSize=t}},{key:"frequencyBinCount",get:function(){return this._nativeAnalyserNode.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._nativeAnalyserNode.maxDecibels},set:function(t){var e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}},{key:"minDecibels",get:function(){return this._nativeAnalyserNode.minDecibels},set:function(t){var e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}},{key:"smoothingTimeConstant",get:function(){return this._nativeAnalyserNode.smoothingTimeConstant},set:function(t){this._nativeAnalyserNode.smoothingTimeConstant=t}},{key:"getByteFrequencyData",value:function(t){this._nativeAnalyserNode.getByteFrequencyData(t)}},{key:"getByteTimeDomainData",value:function(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}},{key:"getFloatFrequencyData",value:function(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}},{key:"getFloatTimeDomainData",value:function(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}}]),s}(t)}(Au,gu,sa,du,yu,wu),Vu=new WeakSet,Ou=function(t){return null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null}(fu),Du=(Go=new Uint32Array(1),function(t){return Go[0]=t,Go[0]}),Ru=function(t,e){return function(n){n.copyFromChannel=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();for(var u=n.length,l=n.getChannelData(s),c=r.length,h=o<0?-o:0;h+o<u&&h<c;h+=1)r[h]=l[h+o]},n.copyToChannel=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();for(var u=n.length,l=n.getChannelData(s),c=r.length,h=o<0?-o:0;h+o<u&&h<c;h+=1)l[h+o]=r[h]}}}(Du,sa),Lu=(Ho=Du,function(t){var e,n;t.copyFromChannel=(e=t.copyFromChannel,function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Ho(i),o=Ho(r);if(a<t.length)return e.call(t,n,o,a)}),t.copyToChannel=(n=t.copyToChannel,function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Ho(i),o=Ho(r);if(a<t.length)return n.call(t,e,o,a)})}),Iu=function(t,e,n,r,i,a,o,s){var u,l=null;return u=Symbol.hasInstance,function(){"use strict";function h(u){if(c(this,h),null===i)throw new Error("Missing the native OfflineAudioContext constructor.");var p=D({},la,u),v=p.length,f=p.numberOfChannels,d=p.sampleRate;null===l&&(l=new i(1,1,44100));var m=null!==r&&e(a,a)?new r({length:v,numberOfChannels:f,sampleRate:d}):l.createBuffer(f,v,d);if(0===m.numberOfChannels)throw n();return"function"!=typeof m.copyFromChannel?(o(m),ua(m)):e(oa,(function(){return oa(m)}))||s(m),t.add(m),m}return C(h,null,[{key:u,value:function(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===h.prototype||t.has(e)}}]),h}()}(Vu,vu,Gs,Ou,bu,(Ko=Ou,function(){if(null===Ko)return!1;try{new Ko({length:1,sampleRate:44100})}catch(t){return!1}return!0}),Ru,Lu),Nu=(Yo=Mo,function(t,e){var n=Yo(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);var r=function(){e.removeEventListener("ended",r),e.disconnect(n),n.disconnect()};e.addEventListener("ended",r)}),Fu=(Xo=mu,Zo=da,Qo=Oa,$o=l(e(ra).mark((function t(n,r,i){var a;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Zo(n),t.next=3,Promise.all(Array.from(a.activeInputs).map(function(){var t=l(e(ra).mark((function t(n){var a,o,s,u,l;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=F(n,2),o=a[0],s=a[1],u=Xo(o),t.next=4,u.render(o,r);case 4:l=t.sent,Qo(o)||l.connect(i,s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)}))),function(t,e,n){return $o.apply(this,arguments)}),Bu=(Jo=Fu,function(t,e,n){return Jo(e,t,n)}),ju=function(t,e,n,r,i,a,o,s,u,l,c){return function(h,p){var v=h.createBufferSource();return vo(v,p),mo(v,p,"playbackRate"),po(v,p,"buffer"),po(v,p,"loop"),po(v,p,"loopEnd"),po(v,p,"loopStart"),e(n,(function(){return n(h)}))||function(t){var e,n;t.start=(e=t.start,n=!1,function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if(n)throw io();e.call(t,r,i,a),n=!0})}(v),e(r,(function(){return r(h)}))||u(v),e(i,(function(){return i(h)}))||l(v,h),e(a,(function(){return a(h)}))||_o(v),e(o,(function(){return o(h)}))||c(v,h),e(s,(function(){return s(h)}))||go(v),t(h,v),v}}(Nu,vu,(function(t){var e=t.createBufferSource();e.start();try{e.start()}catch(t){return!0}return!1}),(function(t){var e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch(t){return!1}return!0}),(function(t){var e=t.createBufferSource();e.start();try{e.stop()}catch(t){return!1}return!0}),ru,iu,au,(function(t){var e;t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,a=t.buffer,o=null===a?r:Math.min(a.duration,r);null!==a&&o>a.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})}),(ts=eu,function(t,e){var n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),ts(t,"buffer",(function(e){return function(){var r=e.call(t);return r===n?null:r}}),(function(e){return function(r){return e.call(t,null===r?n:r)}}))}),ou),zu=function(t,e){return function(n,r,i){return t(r).replay(i),e(r,n,i)}}(function(t){return function(e){var n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}}(da),Fu),Uu=function(t,n,r,i,a){return function(){var o,s=new WeakMap,u=null,c=null,h=(o=l(e(ra).mark((function o(l,h){var p,v,f,d;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=r(l),(v=aa(p,h))||(d={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value},p=n(h,d),null!==u&&(f=p).start.apply(f,B(u)),null!==c&&p.stop(c)),s.set(h,p),v){e.next=9;break}return e.next=7,i(h,l.playbackRate,p.playbackRate);case 7:e.next=11;break;case 9:return e.next=11,t(h,l.playbackRate,p.playbackRate);case 11:return e.next=13,a(l,h,p);case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}}),o)}))),function(t,e){return o.apply(this,arguments)});return{set start(t){u=t},set stop(t){c=t},render:function(t,e){var n=s.get(e);return void 0!==n?Promise.resolve(n):h(t,e)}}}}(Bu,ju,Sa,zu,_u),qu=function(t,e,n,r,i,a,o,s,u,l,c,h,p){return function(v,f,d){var m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,g=new Oi.AutomationEventList(d.defaultValue),y=f?r(g):null,b={get defaultValue(){return d.defaultValue},get maxValue(){return null===m?d.maxValue:m},get minValue(){return null===_?d.minValue:_},get value(){return d.value},set value(t){d.value=t,b.setValueAtTime(t,v.context.currentTime)},cancelAndHoldAtTime:function(t){if("function"==typeof d.cancelAndHoldAtTime)null===y&&g.flush(v.context.currentTime),g.add(i(t)),d.cancelAndHoldAtTime(t);else{var e=Array.from(g).pop();null===y&&g.flush(v.context.currentTime),g.add(i(t));var n=Array.from(g).pop();d.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?d.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?d.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?d.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&d.setValueCurveAtTime(n.values,n.startTime,n.duration))}return b},cancelScheduledValues:function(t){return null===y&&g.flush(v.context.currentTime),g.add(a(t)),d.cancelScheduledValues(t),b},exponentialRampToValueAtTime:function(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===y&&g.flush(v.context.currentTime),g.add(o(t,e)),d.exponentialRampToValueAtTime(t,e),b},linearRampToValueAtTime:function(t,e){return null===y&&g.flush(v.context.currentTime),g.add(s(t,e)),d.linearRampToValueAtTime(t,e),b},setTargetAtTime:function(t,e,n){return null===y&&g.flush(v.context.currentTime),g.add(u(t,e,n)),d.setTargetAtTime(t,e,n),b},setValueAtTime:function(t,e){return null===y&&g.flush(v.context.currentTime),g.add(l(t,e)),d.setValueAtTime(t,e),b},setValueCurveAtTime:function(t,e,n){var r=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){for(var i=e+n,a=v.context.sampleRate,o=Math.ceil(e*a),s=Math.floor(i*a),u=s-o,l=new Float32Array(u),f=0;f<u;f+=1){var m=(r.length-1)/n*((o+f)/a-e),_=Math.floor(m),w=Math.ceil(m);l[f]=_===w?r[_]:(1-(m-_))*r[_]+(1-(w-m))*r[w]}null===y&&g.flush(v.context.currentTime),g.add(c(l,e,n)),d.setValueCurveAtTime(l,e,n);var k=s/a;k<i&&p(b,l[l.length-1],k),p(b,r[r.length-1],i)}else null===y&&g.flush(v.context.currentTime),g.add(c(r,e,n)),d.setValueCurveAtTime(r,e,n);return b}};return n.set(b,d),e.set(b,v),t(b,y),b}}((es=Ii,function(t,e){es.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),ku,Ni,(function(t){return{replay:function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("exponentialRampToValue"===s.type){var u=s.endTime,l=s.value;e.exponentialRampToValueAtTime(l,u)}else if("linearRampToValue"===s.type){var c=s.endTime,h=s.value;e.linearRampToValueAtTime(h,c)}else if("setTarget"===s.type){var p=s.startTime,v=s.target,f=s.timeConstant;e.setTargetAtTime(v,p,f)}else if("setValue"===s.type){var d=s.startTime,m=s.value;e.setValueAtTime(m,d)}else{if("setValueCurve"!==s.type)throw new Error("Can't apply an unknown automation.");var _=s.duration,g=s.startTime,y=s.values;e.setValueCurveAtTime(y,g,_)}}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}}),Oi.createCancelAndHoldAutomationEvent,Oi.createCancelScheduledValuesAutomationEvent,Oi.createExponentialRampToValueAutomationEvent,Oi.createLinearRampToValueAutomationEvent,Oi.createSetTargetAutomationEvent,Oi.createSetValueAutomationEvent,Oi.createSetValueCurveAutomationEvent,Cu,nu),Wu=function(t,e,n,r,i,a,o,u){return function(t){"use strict";O(h,t);var l=P(h);function h(t,r){var u;c(this,h);var p=a(t),v=D({},va,r),f=i(p,v),d=o(p),m=d?e():null;return(u=l.call(this,t,!1,f,m))._audioBufferSourceNodeRenderer=m,u._isBufferNullified=!1,u._isBufferSet=null!==v.buffer,u._nativeAudioBufferSourceNode=f,u._onended=null,u._playbackRate=n(s(u),d,f.playbackRate,ha,ca),u}return C(h,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer},set:function(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw r();this._isBufferSet=!0}}},{key:"loop",get:function(){return this._nativeAudioBufferSourceNode.loop},set:function(t){this._nativeAudioBufferSourceNode.loop=t}},{key:"loopEnd",get:function(){return this._nativeAudioBufferSourceNode.loopEnd},set:function(t){this._nativeAudioBufferSourceNode.loopEnd=t}},{key:"loopStart",get:function(){return this._nativeAudioBufferSourceNode.loopStart},set:function(t){this._nativeAudioBufferSourceNode.loopStart=t}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"==typeof t?u(this,t):null;this._nativeAudioBufferSourceNode.onended=e;var n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"playbackRate",get:function(){return this._playbackRate}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){var r=this;$i(this);var i=function(){r._nativeAudioBufferSourceNode.removeEventListener("ended",i),pa(r)&&ta(r)};this._nativeAudioBufferSourceNode.addEventListener("ended",i)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}}]),h}(t)}(Au,Uu,qu,io,ju,yu,wu,su),Gu=function(t,e,n,r,i,a,o,s){return function(t){"use strict";O(l,t);var u=P(l);function l(t,n){var r;c(this,l);var h=a(t),p=o(h),v=i(h,n,p),f=p?e(s):null;return(r=u.call(this,t,!1,v,f))._isNodeOfNativeOfflineAudioContext=p,r._nativeAudioDestinationNode=v,r}return C(l,[{key:"channelCount",get:function(){return this._nativeAudioDestinationNode.channelCount},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioDestinationNode.channelCountMode},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=t}},{key:"maxChannelCount",get:function(){return this._nativeAudioDestinationNode.maxChannelCount}}]),l}(t)}(Au,(function(t){var n,r=new WeakMap,i=(n=l(e(ra).mark((function n(i,a){var o;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.destination,r.set(a,o),e.next=4,t(i,a,o);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),n)}))),function(t,e){return n.apply(this,arguments)});return{render:function(t,e){var n=r.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}}),sa,io,function(t,e){return function(n,r,i){var a=n.destination;if(a.channelCount!==r)try{a.channelCount=r}catch(t){}i&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:r});var o=t(n,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(o,"channelCount",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e);try{a.channelCount=e}catch(t){if(e>a.maxChannelCount)throw t}}})),e(o,"channelCountMode",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e),a.channelCountMode=e}})),e(o,"channelInterpretation",(function(t){return function(){return t.call(o)}}),(function(t){return function(e){t.call(o,e),a.channelInterpretation=e}})),Object.defineProperty(o,"maxChannelCount",{get:function(){return a.maxChannelCount}}),o.connect(a),o}}(Mo,eu),yu,wu,_u),Hu=function(t,n,r,i,a){return function(){var o=new WeakMap,s=function(){var s=l(e(ra).mark((function s(u,l){var c,h,p;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(u),(h=aa(c,l))||(p={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type},c=n(l,p)),o.set(l,c),h){e.next=15;break}return e.next=7,i(l,u.Q,c.Q);case 7:return e.next=9,i(l,u.detune,c.detune);case 9:return e.next=11,i(l,u.frequency,c.frequency);case 11:return e.next=13,i(l,u.gain,c.gain);case 13:e.next=23;break;case 15:return e.next=17,t(l,u.Q,c.Q);case 17:return e.next=19,t(l,u.detune,c.detune);case 19:return e.next=21,t(l,u.frequency,c.frequency);case 21:return e.next=23,t(l,u.gain,c.gain);case 23:return e.next=25,a(u,l,c);case 25:return e.abrupt("return",c);case 26:case"end":return e.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}}}(Bu,ko,Sa,zu,_u),Ku=function(t){return function(e,n){return t.set(e,n)}}(hu),Yu=(ns=qu,rs=Hu,is=ao,as=ko,os=yu,ss=wu,us=Ku,function(t){"use strict";O(n,t);var e=P(n);function n(t,r){var i;c(this,n);var a=os(t),o=D({},Ya,r),u=as(a,o),l=ss(a),h=l?rs():null;return(i=e.call(this,t,!1,u,h))._Q=ns(s(i),l,u.Q,ha,ca),i._detune=ns(s(i),l,u.detune,1200*Math.log2(ha),-1200*Math.log2(ha)),i._frequency=ns(s(i),l,u.frequency,t.sampleRate/2,0),i._gain=ns(s(i),l,u.gain,40*Math.log10(ha),ca),i._nativeBiquadFilterNode=u,us(s(i),1),i}return C(n,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"gain",get:function(){return this._gain}},{key:"Q",get:function(){return this._Q}},{key:"type",get:function(){return this._nativeBiquadFilterNode.type},set:function(t){this._nativeBiquadFilterNode.type=t}},{key:"getFrequencyResponse",value:function(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw is();throw t}if(t.length!==e.length||e.length!==n.length)throw is()}}]),n}(Au)),Xu=function(t,e){return function(n,r,i){var a,o,s=new Set;return n.connect=(a=n.connect,function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=0===s.size;if(e(i))return a.call(n,i,o,u),t(s,[i,o,u],(function(t){return t[0]===i&&t[1]===o&&t[2]===u}),!0),l&&r(),i;a.call(n,i,o),t(s,[i,o],(function(t){return t[0]===i&&t[1]===o}),!0),l&&r()}),n.disconnect=(o=n.disconnect,function(t,r,a){var u=s.size>0;if(void 0===t)o.apply(n),s.clear();else if("number"==typeof t){o.call(n,t);var l=!0,c=!1,h=void 0;try{for(var p,v=s[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var f=p.value;f[1]===t&&s.delete(f)}}catch(t){c=!0,h=t}finally{try{l||null==v.return||v.return()}finally{if(c)throw h}}}else{e(t)?o.call(n,t,r,a):o.call(n,t,r);var d=!0,m=!1,_=void 0;try{for(var g,y=s[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;b[0]!==t||void 0!==r&&b[1]!==r||void 0!==a&&b[2]!==a||s.delete(b)}}catch(t){m=!0,_=t}finally{try{d||null==y.return||y.return()}finally{if(m)throw _}}}var w=0===s.size;u&&w&&i()}),n}}(wa,Mu),Zu=(ls=io,cs=Xu,function(t,e){e.channelCount=1,e.channelCountMode="explicit",Object.defineProperty(e,"channelCount",{get:function(){return 1},set:function(){throw ls()}}),Object.defineProperty(e,"channelCountMode",{get:function(){return"explicit"},set:function(){throw ls()}});var n=t.createBufferSource();cs(e,(function(){for(var t=e.numberOfInputs,r=0;r<t;r+=1)n.connect(e,0,r)}),(function(){return n.disconnect(e)}))}),Qu=function(t,e){return function(n,r){var i=n.createChannelMerger(r.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),vo(i,r),i}}(Cu,Zu),$u=function(t,n,r){return function(){var i=new WeakMap,a=function(){var a=l(e(ra).mark((function a(o,s){var u,l;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n(o),aa(u,s)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs},u=t(s,l)),i.set(s,u),e.next=6,r(o,s,u);case 6:return e.abrupt("return",u);case 7:case"end":return e.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Qu,Sa,_u),Ju=function(t,e,n,r,i){return function(t){"use strict";O(o,t);var a=P(o);function o(t,s){c(this,o);var u=r(t),l=D({},Xa,s),h=n(u,l),p=i(u)?e():null;return a.call(this,t,!1,h,p)}return o}(t)}(Au,$u,Qu,yu,wu),tl=function(t,n,r){return function(){var i=new WeakMap,a=function(){var a=l(e(ra).mark((function a(o,s){var u,l;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n(o),aa(u,s)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs},u=t(s,l)),i.set(s,u),e.next=6,r(o,s,u);case 6:return e.abrupt("return",u);case 7:case"end":return e.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(xo,Sa,_u),el=function(t,e,n,r,i,a){return function(t){"use strict";O(s,t);var o=P(s);function s(t,u){c(this,s);var l=r(t),h=a(D({},Za,u)),p=n(l,h),v=i(l)?e():null;return o.call(this,t,!1,p,v)}return s}(t)}(Au,tl,xo,yu,wu,(function(t){return D({},t,{channelCount:t.numberOfOutputs})})),nl=function(t,e,n,r){return function(i,a){var o=a.offset,s=R(a,["offset"]),u=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,D({},s,{gain:o})),h=u.getChannelData(0);h[0]=1,h[1]=1,l.buffer=u,l.loop=!0;var p={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.addEventListener(e[0],e[1],e[2])},dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.dispatchEvent(e[0])},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.removeEventListener(e[0],e[1],e[2])},start:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l.start.call(l,t)},stop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l.stop.call(l,t)}};return t(i,l),r(Co(p,c),(function(){return l.connect(c)}),(function(){return l.disconnect(c)}))}}(Nu,ju,Mo,Xu),rl=function(t,e,n,r,i){return function(a,o){if(void 0===a.createConstantSource)return n(a,o);var s=a.createConstantSource();return vo(s,o),mo(s,o,"offset"),e(r,(function(){return r(a)}))||_o(s),e(i,(function(){return i(a)}))||go(s),t(a,s),s}}(Nu,vu,nl,ru,au),il=function(t,n,r,i,a){return function(){var o=new WeakMap,s=null,u=null,c=function(){var c=l(e(ra).mark((function l(c,h){var p,v,f;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=r(c),(v=aa(p,h))||(f={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value},p=n(h,f),null!==s&&p.start(s),null!==u&&p.stop(u)),o.set(h,p),v){e.next=9;break}return e.next=7,i(h,c.offset,p.offset);case 7:e.next=11;break;case 9:return e.next=11,t(h,c.offset,p.offset);case 11:return e.next=13,a(c,h,p);case 13:return e.abrupt("return",p);case 14:case"end":return e.stop()}}),l)})));return function(t,e){return c.apply(this,arguments)}}();return{set start(t){s=t},set stop(t){u=t},render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}}}(Bu,rl,Sa,zu,_u),al=function(t,e,n,r,i,a,o){return function(t){"use strict";O(l,t);var u=P(l);function l(t,o){var h;c(this,l);var p=i(t),v=D({},Qa,o),f=r(p,v),d=a(p),m=d?n():null;return(h=u.call(this,t,!1,f,m))._constantSourceNodeRenderer=m,h._nativeConstantSourceNode=f,h._offset=e(s(h),d,f.offset,ha,ca),h._onended=null,h}return C(l,[{key:"offset",get:function(){return this._offset}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;var n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){var e=this;$i(this);var n=function(){e._nativeConstantSourceNode.removeEventListener("ended",n),pa(e)&&ta(e)};this._nativeConstantSourceNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}}]),l}(t)}(Au,qu,il,rl,yu,wu,su),ol=function(t,e){return function(n,r){var i=n.createConvolver();if(vo(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),po(i,r,"buffer"),r.channelCount>2)throw t();if(e(i,"channelCount",(function(t){return function(){return t.call(i)}}),(function(e){return function(n){if(n>2)throw t();return e.call(i,n)}})),"max"===r.channelCountMode)throw t();return e(i,"channelCountMode",(function(t){return function(){return t.call(i)}}),(function(e){return function(n){if("max"===n)throw t();return e.call(i,n)}})),i}}(Gs,eu),sl=function(t,n,r){return function(){var i=new WeakMap,a=function(){var a=l(e(ra).mark((function a(o,s){var u,l;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n(o),aa(u,s)||(l={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize},u=t(s,l)),i.set(s,u),!Ca(u)){e.next=9;break}return e.next=7,r(o,s,u.inputs[0]);case 7:e.next=11;break;case 9:return e.next=11,r(o,s,u);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(ol,Sa,_u),ul=function(t,e,n,r,i,a){return function(t){"use strict";O(u,t);var o=P(u);function u(t,l){var h;c(this,u);var p=r(t),v=D({},$a,l),f=n(p,v),d=i(p)?e():null;return(h=o.call(this,t,!1,f,d))._isBufferNullified=!1,h._nativeConvolverNode=f,null!==v.buffer&&a(s(h),v.buffer.duration),h}return C(u,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer},set:function(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){var e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,44100),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}},{key:"normalize",get:function(){return this._nativeConvolverNode.normalize},set:function(t){this._nativeConvolverNode.normalize=t}}]),u}(t)}(Au,sl,ol,yu,wu,Ku),ll=function(t,n,r,i,a){return function(o){var s=new WeakMap,u=function(){var u=l(e(ra).mark((function u(l,c){var h,p,v;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=r(l),(p=aa(h,c))||(v={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:o},h=n(c,v)),s.set(c,h),p){e.next=9;break}return e.next=7,i(c,l.delayTime,h.delayTime);case 7:e.next=11;break;case 9:return e.next=11,t(c,l.delayTime,h.delayTime);case 11:return e.next=13,a(l,c,h);case 13:return e.abrupt("return",h);case 14:case"end":return e.stop()}}),u)})));return function(t,e){return u.apply(this,arguments)}}();return{render:function(t,e){var n=s.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}}}(Bu,Eo,Sa,zu,_u),cl=function(t,e,n,r,i,a,o){return function(t){"use strict";O(l,t);var u=P(l);function l(t,h){var p;c(this,l);var v=i(t),f=D({},to,h),d=r(v,f),m=a(v),_=m?n(f.maxDelayTime):null;return(p=u.call(this,t,!1,d,_))._delayTime=e(s(p),m,d.delayTime),o(s(p),f.maxDelayTime),p}return C(l,[{key:"delayTime",get:function(){return this._delayTime}}]),l}(t)}(Au,qu,ll,Eo,yu,wu,Ku),hl=(hs=Gs,function(t,e){var n=t.createDynamicsCompressor();if(vo(n,e),e.channelCount>2)throw hs();if("max"===e.channelCountMode)throw hs();return mo(n,e,"attack"),mo(n,e,"knee"),mo(n,e,"ratio"),mo(n,e,"release"),mo(n,e,"threshold"),n}),pl=function(t,n,r,i,a){return function(){var o=new WeakMap,s=function(){var s=l(e(ra).mark((function s(u,l){var c,h,p;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(u),(h=aa(c,l))||(p={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value},c=n(l,p)),o.set(l,c),h){e.next=17;break}return e.next=7,i(l,u.attack,c.attack);case 7:return e.next=9,i(l,u.knee,c.knee);case 9:return e.next=11,i(l,u.ratio,c.ratio);case 11:return e.next=13,i(l,u.release,c.release);case 13:return e.next=15,i(l,u.threshold,c.threshold);case 15:e.next=27;break;case 17:return e.next=19,t(l,u.attack,c.attack);case 19:return e.next=21,t(l,u.knee,c.knee);case 21:return e.next=23,t(l,u.ratio,c.ratio);case 23:return e.next=25,t(l,u.release,c.release);case 25:return e.next=27,t(l,u.threshold,c.threshold);case 27:return e.next=29,a(u,l,c);case 29:return e.abrupt("return",c);case 30:case"end":return e.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}}}(Bu,hl,Sa,zu,_u),vl=function(t,e,n,r,i,a,o,u){return function(t){"use strict";O(h,t);var l=P(h);function h(t,i){var p;c(this,h);var v=a(t),f=D({},no,i),d=r(v,f),m=o(v),_=m?n():null;return(p=l.call(this,t,!1,d,_))._attack=e(s(p),m,d.attack),p._knee=e(s(p),m,d.knee),p._nativeDynamicsCompressorNode=d,p._ratio=e(s(p),m,d.ratio),p._release=e(s(p),m,d.release),p._threshold=e(s(p),m,d.threshold),u(s(p),.006),p}return C(h,[{key:"attack",get:function(){return this._attack}},{key:"channelCount",get:function(){return this._nativeDynamicsCompressorNode.channelCount},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}},{key:"channelCountMode",get:function(){return this._nativeDynamicsCompressorNode.channelCountMode},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}},{key:"knee",get:function(){return this._knee}},{key:"ratio",get:function(){return this._ratio}},{key:"reduction",get:function(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}},{key:"release",get:function(){return this._release}},{key:"threshold",get:function(){return this._threshold}}]),h}(t)}(Au,qu,pl,hl,Gs,yu,wu,Ku),fl=function(t,n,r,i,a){return function(){var o=new WeakMap,s=function(){var s=l(e(ra).mark((function s(u,l){var c,h,p;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(u),(h=aa(c,l))||(p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value},c=n(l,p)),o.set(l,c),h){e.next=9;break}return e.next=7,i(l,u.gain,c.gain);case 7:e.next=11;break;case 9:return e.next=11,t(l,u.gain,c.gain);case 11:return e.next=13,a(u,l,c);case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}}}(Bu,Mo,Sa,zu,_u),dl=function(t,e,n,r,i,a){return function(t){"use strict";O(u,t);var o=P(u);function u(t,l){var h;c(this,u);var p=i(t),v=D({},ro,l),f=r(p,v),d=a(p),m=d?n():null;return(h=o.call(this,t,!1,f,m))._gain=e(s(h),d,f.gain,ha,ca),h}return C(u,[{key:"gain",get:function(){return this._gain}}]),u}(t)}(Au,qu,fl,Mo,yu,wu),ml=function(t,e,n,r){return function(i,a,o){var s=o.channelCount,u=o.channelCountMode,l=o.channelInterpretation,c=o.feedback,h=o.feedforward,p=yo(a,i.sampleRate),v=c instanceof Float64Array?c:new Float64Array(c),f=h instanceof Float64Array?h:new Float64Array(h),d=v.length,m=f.length,_=Math.min(d,m);if(0===d||d>20)throw r();if(0===v[0])throw e();if(0===m||m>20)throw r();if(0===f[0])throw e();if(1!==v[0]){for(var g=0;g<m;g+=1)f[g]/=v[0];for(var y=1;y<d;y+=1)v[y]/=v[0]}var b=n(i,p,s,s);b.channelCount=s,b.channelCountMode=u,b.channelInterpretation=l;for(var w=[],k=[],x=[],C=0;C<s;C+=1){w.push(0);var E=new Float32Array(32),M=new Float32Array(32);E.fill(0),M.fill(0),k.push(E),x.push(M)}b.onaudioprocess=function(t){for(var e=t.inputBuffer,n=t.outputBuffer,r=e.numberOfChannels,i=0;i<r;i+=1){var a=e.getChannelData(i),o=n.getChannelData(i);w[i]=so(v,d,f,m,_,k[i],x[i],w[i],32,a,o)}};var T=i.sampleRate/2,P={get bufferSize(){return p},get channelCount(){return b.channelCount},set channelCount(t){b.channelCount=t},get channelCountMode(){return b.channelCountMode},set channelCountMode(t){b.channelCountMode=t},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(t){b.channelInterpretation=t},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.addEventListener(e[0],e[1],e[2])},dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.dispatchEvent(e[0])},getFrequencyResponse:function(e,n,r){if(e.length!==n.length||n.length!==r.length)throw t();for(var i=e.length,a=0;a<i;a+=1){var o=-Math.PI*(e[a]/T),s=[Math.cos(o),Math.sin(o)],u=To(Po(f,s),Po(v,s));n[a]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),r[a]=Math.atan2(u[1],u[0])}},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.removeEventListener(e[0],e[1],e[2])}};return Co(P,b)}}(ao,io,Ws,Gs),_l=function(t,e,n,r){return function(i){return t(co,(function(){return co(i)}))?Promise.resolve(t(r,r)).then((function(t){if(!t){var e=n(i,512,0,1);i.oncomplete=function(){e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=function(){return i.currentTime},e.connect(i.destination)}return i.startRendering()})):new Promise((function(t){var n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=function(e){n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()}))}}(vu,Mo,Ws,function(t,e){return function(){if(null===e)return Promise.resolve(!1);var n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((function(t){n.oncomplete=function(){r.disconnect(),t(0!==n.currentTime)},n.startRendering()}))}}(Mo,bu)),gl=function(t,n,r,i,a){return function(o,s){var u=new WeakMap,c=null,h=function(){var h=l(e(ra).mark((function h(p,v){var f,d,m,_,g;return e(ra).wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(f=null,d=n(p),m=aa(d,v),void 0===v.createIIRFilter?f=t(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(d=v.createIIRFilter(s,o)),u.set(v,null===f?d:f),null===f){h.next=17;break}if(null!==c){h.next=11;break}if(null!==r){h.next=9;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:_=new r(p.context.destination.channelCount,p.context.length,v.sampleRate),c=l(e(ra).mark((function t(){var n;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(p,_,_.destination);case 2:return t.next=4,a(_);case 4:return n=t.sent,t.abrupt("return",uo(n,v,o,s));case 6:case"end":return t.stop()}}),t)})))();case 11:return h.next=13,c;case 13:return g=h.sent,f.buffer=g,f.start(0),h.abrupt("return",f);case 17:return h.next=19,i(p,v,d);case 19:return h.abrupt("return",d);case 20:case"end":return h.stop()}}),h)})));return function(t,e){return h.apply(this,arguments)}}();return{render:function(t,e){var n=u.get(e);return void 0!==n?Promise.resolve(n):h(t,e)}}}}(ju,Sa,bu,_u,_l),yl=function(t,e,n,r,i,a){return function(t){"use strict";O(u,t);var o=P(u);function u(t,l){var h;c(this,u);var p=r(t),v=i(p),f=D({},oo,l),d=e(p,v?null:t.baseLatency,f),m=v?n(f.feedback,f.feedforward):null;return h=o.call(this,t,!1,d,m),function(t){var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,function(n,r,i){if(n.length!==r.length||r.length!==i.length)throw ao();return e.call(t,n,r,i)})}(d),h._nativeIIRFilterNode=d,a(s(h),1),h}return C(u,[{key:"getFrequencyResponse",value:function(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}}]),u}(t)}(Au,(ps=ml,function(t,e,n){if(void 0===t.createIIRFilter)return ps(t,e,n);var r=t.createIIRFilter(n.feedforward,n.feedback);return vo(r,n),r}),gl,yu,wu,Ku),bl=function(t,e,n,r,i,a,o,s){return function(u,l){var c,h,p,v,f,d,m,_,g,y,b=l.listener,w=void 0===b.forwardX?(c=new Float32Array(1),h=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(l),v=!1,f=[0,0,-1,0,1,0],d=[0,0,0],m=function(){if(!v){v=!0;var t=r(l,256,9,0);t.onaudioprocess=function(t){var e,n=t.inputBuffer,r=[a(n,c,0),a(n,c,1),a(n,c,2),a(n,c,3),a(n,c,4),a(n,c,5)];r.some((function(t,e){return t!==f[e]}))&&((e=b).setOrientation.apply(e,B(r)),f=r);var i,o=[a(n,c,6),a(n,c,7),a(n,c,8)];o.some((function(t,e){return t!==d[e]}))&&((i=b).setPosition.apply(i,B(o)),d=o)},h.connect(t)}},g=function(t){return function(e){var n;e!==d[t]&&(d[t]=e,(n=b).setPosition.apply(n,B(d)))}},y=function(e,r,a){var o=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});o.connect(h,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:function(){return r}});var c,v,f,d,_,g,y,b=t({context:u},p,o.offset,ha,ca);return s(b,"value",(function(t){return function(){return t.call(b)}}),(function(t){return function(e){try{t.call(b,e)}catch(t){if(9!==t.code)throw t}m(),p&&a(e)}})),b.cancelAndHoldAtTime=(c=b.cancelAndHoldAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=c.apply(b,e);return m(),r}),b.cancelScheduledValues=(v=b.cancelScheduledValues,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=v.apply(b,e);return m(),r}),b.exponentialRampToValueAtTime=(f=b.exponentialRampToValueAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=f.apply(b,e);return m(),r}),b.linearRampToValueAtTime=(d=b.linearRampToValueAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=d.apply(b,e);return m(),r}),b.setTargetAtTime=(_=b.setTargetAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=_.apply(b,e);return m(),r}),b.setValueAtTime=(g=b.setValueAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=g.apply(b,e);return m(),r}),b.setValueCurveAtTime=(y=b.setValueCurveAtTime,p?function(){throw i()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=y.apply(b,e);return m(),r}),b},{forwardX:y(0,0,(_=function(t){return function(e){var n;e!==f[t]&&(f[t]=e,(n=b).setOrientation.apply(n,B(f)))}})(0)),forwardY:y(1,0,_(1)),forwardZ:y(2,-1,_(2)),positionX:y(6,0,g(0)),positionY:y(7,0,g(1)),positionZ:y(8,0,g(2)),upX:y(3,0,_(3)),upY:y(4,1,_(4)),upZ:y(5,0,_(5))}):b,k=w.forwardX,x=w.forwardY,C=w.forwardZ,E=w.positionX,M=w.positionY,T=w.positionZ,P=w.upX,A=w.upY,S=w.upZ;return{get forwardX(){return k},get forwardY(){return x},get forwardZ(){return C},get positionX(){return E},get positionY(){return M},get positionZ(){return T},get upX(){return P},get upY(){return A},get upZ(){return S}}}}(qu,Qu,rl,Ws,Gs,Js,wu,eu),wl=new WeakMap,kl=function(t,e,n,r,i,a){return function(n){"use strict";O(u,n);var o=P(u);function u(n,a){var l;return c(this,u),(l=o.call(this,n))._nativeContext=n,Fi.set(s(l),n),r(n)&&i.set(n,new Set),l._destination=new t(s(l),a),l._listener=e(s(l),n),l._onstatechange=null,l}return C(u,[{key:"currentTime",get:function(){return this._nativeContext.currentTime}},{key:"destination",get:function(){return this._destination}},{key:"listener",get:function(){return this._listener}},{key:"onstatechange",get:function(){return this._onstatechange},set:function(t){var e="function"==typeof t?a(this,t):null;this._nativeContext.onstatechange=e;var n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}},{key:"sampleRate",get:function(){return this._nativeContext.sampleRate}},{key:"state",get:function(){return this._nativeContext.state}}]),u}(n)}(Gu,bl,xu,wu,wl,su),xl=function(t,e,n,r,i,a){return function(o,s){var u=o.createOscillator();return vo(u,s),mo(u,s,"detune"),mo(u,s,"frequency"),void 0!==s.periodicWave?u.setPeriodicWave(s.periodicWave):po(u,s,"type"),e(n,(function(){return n(o)}))||_o(u),e(r,(function(){return r(o)}))||a(u,o),e(i,(function(){return i(o)}))||go(u),t(o,u),u}}(Nu,vu,ru,iu,au,ou),Cl=function(t,n,r,i,a){return function(){var o=new WeakMap,s=null,u=null,c=null,h=function(){var h=l(e(ra).mark((function l(h,p){var v,f,d;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=r(h),(f=aa(v,p))||(d={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,detune:v.detune.value,frequency:v.frequency.value,periodicWave:null===s?void 0:s,type:v.type},v=n(p,d),null!==u&&v.start(u),null!==c&&v.stop(c)),o.set(p,v),f){e.next=11;break}return e.next=7,i(p,h.detune,v.detune);case 7:return e.next=9,i(p,h.frequency,v.frequency);case 9:e.next=15;break;case 11:return e.next=13,t(p,h.detune,v.detune);case 13:return e.next=15,t(p,h.frequency,v.frequency);case 15:return e.next=17,a(h,p,v);case 17:return e.abrupt("return",v);case 18:case"end":return e.stop()}}),l)})));return function(t,e){return h.apply(this,arguments)}}();return{set periodicWave(t){s=t},set start(t){u=t},set stop(t){c=t},render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):h(t,e)}}}}(Bu,xl,Sa,zu,_u),El=function(t,e,n,r,i,a,o){return function(t){"use strict";O(l,t);var u=P(l);function l(t,o){var h;c(this,l);var p=i(t),v=D({},Ks,o),f=n(p,v),d=a(p),m=d?r():null,_=t.sampleRate/2;return(h=u.call(this,t,!1,f,m))._detune=e(s(h),d,f.detune,153600,-153600),h._frequency=e(s(h),d,f.frequency,_,-_),h._nativeOscillatorNode=f,h._onended=null,h._oscillatorNodeRenderer=m,null!==h._oscillatorNodeRenderer&&void 0!==v.periodicWave&&(h._oscillatorNodeRenderer.periodicWave=v.periodicWave),h}return C(l,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;var n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"type",get:function(){return this._nativeOscillatorNode.type},set:function(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}},{key:"setPeriodicWave",value:function(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){var e=this;$i(this);var n=function(){e._nativeOscillatorNode.removeEventListener("ended",n),pa(e)&&ta(e)};this._nativeOscillatorNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}}]),l}(t)}(Au,qu,xl,Cl,yu,wu,su),Ml=(vs=ju,function(t,e){var n=vs(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(e),n.start(),function(){n.stop(),n.disconnect(e)}}),Tl=function(t,e,n,r,i){return function(a,o){var s=o.curve,u=o.oversample,l=R(o,["curve","oversample"]),c=a.createWaveShaper(),h=a.createWaveShaper();vo(c,l),vo(h,l);var p=n(a,D({},l,{gain:1})),v=n(a,D({},l,{gain:-1})),f=n(a,D({},l,{gain:1})),d=n(a,D({},l,{gain:-1})),m=null,_=!1,g=null,y={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){p.channelCount=t,v.channelCount=t,c.channelCount=t,f.channelCount=t,h.channelCount=t,d.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){p.channelCountMode=t,v.channelCountMode=t,c.channelCountMode=t,f.channelCountMode=t,h.channelCountMode=t,d.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){p.channelInterpretation=t,v.channelInterpretation=t,c.channelInterpretation=t,f.channelInterpretation=t,h.channelInterpretation=t,d.channelInterpretation=t},get context(){return c.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,h.curve=n;else{var i=n.length,o=new Float32Array(i+2-i%2),s=new Float32Array(i+2-i%2);o[0]=n[0],s[0]=-n[i-1];for(var u=Math.ceil((i+1)/2),l=(i+1)/2-1,v=1;v<u;v+=1){var f=v/u*l,d=Math.floor(f),y=Math.ceil(f);o[v]=d===y?n[d]:(1-(f-d))*n[d]+(1-(y-f))*n[y],s[v]=d===y?-n[i-1-d]:-(1-(f-d))*n[i-1-d]-(1-(y-f))*n[i-1-y]}o[u]=i%2==1?n[u-1]:(n[u-2]+n[u-1])/2,c.curve=o,h.curve=s}g=n,_&&(r(g)&&null===m?m=t(a,p):null!==m&&(m(),m=null))},get inputs(){return[p]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,h.oversample=t},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.addEventListener(e[0],e[1],e[2])},dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.dispatchEvent(e[0])},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.removeEventListener(e[0],e[1],e[2])}};null!==s&&(y.curve=s instanceof Float32Array?s:new Float32Array(s)),u!==y.oversample&&(y.oversample=u);return i(Co(y,f),(function(){p.connect(c).connect(f),p.connect(v).connect(h).connect(d).connect(f),_=!0,r(g)&&(m=t(a,p))}),(function(){p.disconnect(c),c.disconnect(f),p.disconnect(v),v.disconnect(h),h.disconnect(d),d.disconnect(f),_=!1,null!==m&&(m(),m=null)}))}}(Ml,io,Mo,tu,Xu),Pl=function(t,e,n,r,i,a,o){return function(s,u){var l=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,u);vo(l,u);var c=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==c&&c.length<2)throw e();po(l,{curve:c},"curve"),po(l,u,"oversample");var h=null,p=!1;o(l,"curve",(function(t){return function(){return t.call(l)}}),(function(e){return function(n){return e.call(l,n),p&&(r(n)&&null===h?h=t(s,l):r(n)||null===h||(h(),h=null)),n}}));return i(l,(function(){p=!0,r(l.curve)&&(h=t(s,l))}),(function(){p=!1,null!==h&&(h(),h=null)}))}}(Ml,io,Tl,tu,Xu,Cu,eu),Al=function(t,e,n,r,i,a,o,s,u,l){return function(c,h){var p,v,f=h.coneInnerAngle,d=h.coneOuterAngle,m=h.coneOuterGain,_=h.distanceModel,g=h.maxDistance,y=h.orientationX,b=h.orientationY,w=h.orientationZ,k=h.panningModel,x=h.positionX,C=h.positionY,E=h.positionZ,M=h.refDistance,T=h.rolloffFactor,P=R(h,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]),A=c.createPanner();if(P.channelCount>2)throw o();if("max"===P.channelCountMode)throw o();vo(A,P);var S={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},V=n(c,D({},S,{channelInterpretation:"speakers",numberOfInputs:6})),O=r(c,D({},P,{gain:1})),L=r(c,D({},S,{gain:1})),I=r(c,D({},S,{gain:0})),N=r(c,D({},S,{gain:0})),F=r(c,D({},S,{gain:0})),j=r(c,D({},S,{gain:0})),z=r(c,D({},S,{gain:0})),U=i(c,256,6,1),q=a(c,D({},S,{curve:new Float32Array([1,1]),oversample:"none"})),W=[y,b,w],G=[x,C,E],H=new Float32Array(1);U.onaudioprocess=function(t){var e,n=t.inputBuffer,r=[u(n,H,0),u(n,H,1),u(n,H,2)];r.some((function(t,e){return t!==W[e]}))&&((e=A).setOrientation.apply(e,B(r)),W=r);var i,a=[u(n,H,3),u(n,H,4),u(n,H,5)];a.some((function(t,e){return t!==G[e]}))&&((i=A).setPosition.apply(i,B(a)),G=a)},Object.defineProperty(I.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(N.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(F.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(j.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(z.gain,"defaultValue",{get:function(){return 0}});var K={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(t){if(t>2)throw o();O.channelCount=t,A.channelCount=t},get channelCountMode(){return A.channelCountMode},set channelCountMode(t){if("max"===t)throw o();O.channelCountMode=t,A.channelCountMode=t},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(t){O.channelInterpretation=t,A.channelInterpretation=t},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(t){A.coneInnerAngle=t},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(t){A.coneOuterAngle=t},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();A.coneOuterGain=t},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(t){A.distanceModel=t},get inputs(){return[O]},get maxDistance(){return A.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;A.maxDistance=t},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return L.gain},get orientationY(){return I.gain},get orientationZ(){return N.gain},get panningModel(){return A.panningModel},set panningModel(t){A.panningModel=t},get positionX(){return F.gain},get positionY(){return j.gain},get positionZ(){return z.gain},get refDistance(){return A.refDistance},set refDistance(t){if(t<0)throw new RangeError;A.refDistance=t},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;A.rolloffFactor=t},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.addEventListener(e[0],e[1],e[2])},dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.dispatchEvent(e[0])},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O.removeEventListener(e[0],e[1],e[2])}};f!==K.coneInnerAngle&&(K.coneInnerAngle=f),d!==K.coneOuterAngle&&(K.coneOuterAngle=d),m!==K.coneOuterGain&&(K.coneOuterGain=m),_!==K.distanceModel&&(K.distanceModel=_),g!==K.maxDistance&&(K.maxDistance=g),y!==K.orientationX.value&&(K.orientationX.value=y),b!==K.orientationY.value&&(K.orientationY.value=b),w!==K.orientationZ.value&&(K.orientationZ.value=w),k!==K.panningModel&&(K.panningModel=k),x!==K.positionX.value&&(K.positionX.value=x),C!==K.positionY.value&&(K.positionY.value=C),E!==K.positionZ.value&&(K.positionZ.value=E),M!==K.refDistance&&(K.refDistance=M),T!==K.rolloffFactor&&(K.rolloffFactor=T),1===W[0]&&0===W[1]&&0===W[2]||(p=A).setOrientation.apply(p,B(W)),0===G[0]&&0===G[1]&&0===G[2]||(v=A).setPosition.apply(v,B(G));return l(Co(K,A),(function(){O.connect(A),t(O,q,0,0),q.connect(L).connect(V,0,0),q.connect(I).connect(V,0,1),q.connect(N).connect(V,0,2),q.connect(F).connect(V,0,3),q.connect(j).connect(V,0,4),q.connect(z).connect(V,0,5),V.connect(U).connect(c.destination)}),(function(){O.disconnect(A),s(O,q,0,0),q.disconnect(L),L.disconnect(V),q.disconnect(I),I.disconnect(V),q.disconnect(N),N.disconnect(V),q.disconnect(F),F.disconnect(V),q.disconnect(j),j.disconnect(V),q.disconnect(z),z.disconnect(V),V.disconnect(U),U.disconnect(c.destination)}))}}(Ea,io,Qu,Mo,Ws,Pl,Gs,Aa,Js,Xu),Sl=(fs=Al,function(t,e){var n=t.createPanner();return void 0===n.orientationX?fs(t,e):(vo(n,e),mo(n,e,"orientationX"),mo(n,e,"orientationY"),mo(n,e,"orientationZ"),mo(n,e,"positionX"),mo(n,e,"positionY"),mo(n,e,"positionZ"),po(n,e,"coneInnerAngle"),po(n,e,"coneOuterAngle"),po(n,e,"coneOuterGain"),po(n,e,"distanceModel"),po(n,e,"maxDistance"),po(n,e,"panningModel"),po(n,e,"refDistance"),po(n,e,"rolloffFactor"),n)}),Vl=function(t,n,r,i,a,o,s,u,c,h){return function(){var p,v=new WeakMap,f=null,d=(p=l(e(ra).mark((function p(d,m){var _,g,y,b,w,k,x,C,E,M,T,P,A,S,V,O,R,L,I,N;return e(ra).wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(_=null,g=o(d),y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},b=D({},y,{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),w=aa(g,m),"bufferSize"in g?_=i(m,D({},y,{gain:1})):w||(k=D({},b,{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value}),g=a(m,k)),v.set(m,null===_?g:_),null===_){p.next=31;break}if(null!==f){p.next=15;break}if(null!==s){p.next=11;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 11:x=new s(6,d.context.length,m.sampleRate),(C=n(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6})).connect(x.destination),f=l(e(ra).mark((function t(){var n,i;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(function(){var t=l(e(ra).mark((function t(n,i){var a;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0}),t.next=3,u(x,n,a.offset);case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:for(n=t.sent,i=0;i<6;i+=1)n[i].connect(C,0,i),n[i].start(0);return t.abrupt("return",h(x));case 5:case"end":return t.stop()}}),t)})))();case 15:return p.next=17,f;case 17:return E=p.sent,M=i(m,D({},y,{gain:1})),p.next=21,c(d,m,M);case 21:for(T=[],P=0;P<E.numberOfChannels;P+=1)T.push(E.getChannelData(P));for(A=[T[0][0],T[1][0],T[2][0]],S=[T[3][0],T[4][0],T[5][0]],V=i(m,D({},y,{gain:1})),O=a(m,D({},b,{orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:S[0],positionY:S[1],positionZ:S[2]})),M.connect(V).connect(O.inputs[0]),O.connect(_),R=128;R<E.length;R+=128)L=[T[0][R],T[1][R],T[2][R]],I=[T[3][R],T[4][R],T[5][R]],(L.some((function(t,e){return t!==A[e]}))||I.some((function(t,e){return t!==S[e]})))&&(A=L,S=I,N=R/m.sampleRate,V.gain.setValueAtTime(0,N),V=i(m,D({},y,{gain:0})),O=a(m,D({},b,{orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:S[0],positionY:S[1],positionZ:S[2]})),V.gain.setValueAtTime(1,N),M.connect(V).connect(O.inputs[0]),O.connect(_));return p.abrupt("return",_);case 31:if(w){p.next=46;break}return p.next=34,u(m,d.orientationX,g.orientationX);case 34:return p.next=36,u(m,d.orientationY,g.orientationY);case 36:return p.next=38,u(m,d.orientationZ,g.orientationZ);case 38:return p.next=40,u(m,d.positionX,g.positionX);case 40:return p.next=42,u(m,d.positionY,g.positionY);case 42:return p.next=44,u(m,d.positionZ,g.positionZ);case 44:p.next=58;break;case 46:return p.next=48,t(m,d.orientationX,g.orientationX);case 48:return p.next=50,t(m,d.orientationY,g.orientationY);case 50:return p.next=52,t(m,d.orientationZ,g.orientationZ);case 52:return p.next=54,t(m,d.positionX,g.positionX);case 54:return p.next=56,t(m,d.positionY,g.positionY);case 56:return p.next=58,t(m,d.positionZ,g.positionZ);case 58:if(!Ca(g)){p.next=63;break}return p.next=61,c(d,m,g.inputs[0]);case 61:p.next=65;break;case 63:return p.next=65,c(d,m,g);case 65:return p.abrupt("return",g);case 66:case"end":return p.stop()}}),p)}))),function(t,e){return p.apply(this,arguments)});return{render:function(t,e){var n=v.get(e);return void 0!==n?Promise.resolve(n):d(t,e)}}}}(Bu,Qu,rl,Mo,Sl,Sa,bu,zu,_u,_l),Ol=function(t,e,n,r,i,a,o){return function(t){"use strict";O(l,t);var u=P(l);function l(t,h){var p;c(this,l);var v=i(t),f=D({},Ys,h),d=n(v,f),m=a(v),_=m?r():null;return(p=u.call(this,t,!1,d,_))._nativePannerNode=d,p._orientationX=e(s(p),m,d.orientationX,ha,ca),p._orientationY=e(s(p),m,d.orientationY,ha,ca),p._orientationZ=e(s(p),m,d.orientationZ,ha,ca),p._positionX=e(s(p),m,d.positionX,ha,ca),p._positionY=e(s(p),m,d.positionY,ha,ca),p._positionZ=e(s(p),m,d.positionZ,ha,ca),o(s(p),1),p}return C(l,[{key:"coneInnerAngle",get:function(){return this._nativePannerNode.coneInnerAngle},set:function(t){this._nativePannerNode.coneInnerAngle=t}},{key:"coneOuterAngle",get:function(){return this._nativePannerNode.coneOuterAngle},set:function(t){this._nativePannerNode.coneOuterAngle=t}},{key:"coneOuterGain",get:function(){return this._nativePannerNode.coneOuterGain},set:function(t){this._nativePannerNode.coneOuterGain=t}},{key:"distanceModel",get:function(){return this._nativePannerNode.distanceModel},set:function(t){this._nativePannerNode.distanceModel=t}},{key:"maxDistance",get:function(){return this._nativePannerNode.maxDistance},set:function(t){this._nativePannerNode.maxDistance=t}},{key:"orientationX",get:function(){return this._orientationX}},{key:"orientationY",get:function(){return this._orientationY}},{key:"orientationZ",get:function(){return this._orientationZ}},{key:"panningModel",get:function(){return this._nativePannerNode.panningModel},set:function(t){this._nativePannerNode.panningModel=t}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"positionZ",get:function(){return this._positionZ}},{key:"refDistance",get:function(){return this._nativePannerNode.refDistance},set:function(t){this._nativePannerNode.refDistance=t}},{key:"rolloffFactor",get:function(){return this._nativePannerNode.rolloffFactor},set:function(t){this._nativePannerNode.rolloffFactor=t}}]),l}(t)}(Au,qu,Sl,Vl,yu,wu,Ku),Dl=function(t){return function(e,n){var r=n.disableNormalization,i=n.imag,a=n.real,o=i instanceof Float32Array?i:new Float32Array(i),s=a instanceof Float32Array?a:new Float32Array(a),u=e.createPeriodicWave(s,o,{disableNormalization:r});if(Array.from(i).length<2)throw t();return u}}(sa),Rl=function(t,e,n,r){var i;return i=Symbol.hasInstance,function(){"use strict";function a(i,o){c(this,a);var s=e(i),u=r(D({},Xs,o)),l=t(s,u);return n.add(l),l}return C(a,null,[{key:i,value:function(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===a.prototype||n.has(t)}}]),a}()}(Dl,yu,new WeakSet,(function(t){var e=t.imag,n=t.real;return D({},t,void 0===e?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,(function(){return 0})),real:n}:void 0===n?{imag:e,real:Array.from(e,(function(){return 0}))}:{imag:e,real:n})})),Ll=function(t,e,n,r,i,a){var o=16385,s=new Float32Array([1,1]),u=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c=D({},l,{oversample:"none"}),h=function(t,a,h,p,v){if(1===a)return function(t,e,i,a){for(var h=new Float32Array(o),p=new Float32Array(o),v=0;v<o;v+=1){var f=v/16384*u;h[v]=Math.cos(f),p[v]=Math.sin(f)}var d=n(t,D({},l,{gain:0})),m=r(t,D({},c,{curve:h})),_=r(t,D({},c,{curve:s})),g=n(t,D({},l,{gain:0})),y=r(t,D({},c,{curve:p}));return{connectGraph:function(){e.connect(d),e.connect(void 0===_.inputs?_:_.inputs[0]),e.connect(g),_.connect(i),i.connect(void 0===m.inputs?m:m.inputs[0]),i.connect(void 0===y.inputs?y:y.inputs[0]),m.connect(d.gain),y.connect(g.gain),d.connect(a,0,0),g.connect(a,0,1)},disconnectGraph:function(){e.disconnect(d),e.disconnect(void 0===_.inputs?_:_.inputs[0]),e.disconnect(g),_.disconnect(i),i.disconnect(void 0===m.inputs?m:m.inputs[0]),i.disconnect(void 0===y.inputs?y:y.inputs[0]),m.disconnect(d.gain),y.disconnect(g.gain),d.disconnect(a,0,0),g.disconnect(a,0,1)}}}(t,h,p,v);if(2===a)return function(t,i,a,h){for(var p=new Float32Array(o),v=new Float32Array(o),f=new Float32Array(o),d=new Float32Array(o),m=Math.floor(8192.5),_=0;_<o;_+=1)if(_>m){var g=(_-m)/(16384-m)*u;p[_]=Math.cos(g),v[_]=Math.sin(g),f[_]=0,d[_]=1}else{var y=_/(16384-m)*u;p[_]=1,v[_]=0,f[_]=Math.cos(y),d[_]=Math.sin(y)}var b=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=n(t,D({},l,{gain:0})),k=r(t,D({},c,{curve:p})),x=n(t,D({},l,{gain:0})),C=r(t,D({},c,{curve:v})),E=r(t,D({},c,{curve:s})),M=n(t,D({},l,{gain:0})),T=r(t,D({},c,{curve:f})),P=n(t,D({},l,{gain:0})),A=r(t,D({},c,{curve:d}));return{connectGraph:function(){i.connect(b),i.connect(void 0===E.inputs?E:E.inputs[0]),b.connect(w,0),b.connect(x,0),b.connect(M,1),b.connect(P,1),E.connect(a),a.connect(void 0===k.inputs?k:k.inputs[0]),a.connect(void 0===C.inputs?C:C.inputs[0]),a.connect(void 0===T.inputs?T:T.inputs[0]),a.connect(void 0===A.inputs?A:A.inputs[0]),k.connect(w.gain),C.connect(x.gain),T.connect(M.gain),A.connect(P.gain),w.connect(h,0,0),M.connect(h,0,0),x.connect(h,0,1),P.connect(h,0,1)},disconnectGraph:function(){i.disconnect(b),i.disconnect(void 0===E.inputs?E:E.inputs[0]),b.disconnect(w,0),b.disconnect(x,0),b.disconnect(M,1),b.disconnect(P,1),E.disconnect(a),a.disconnect(void 0===k.inputs?k:k.inputs[0]),a.disconnect(void 0===C.inputs?C:C.inputs[0]),a.disconnect(void 0===T.inputs?T:T.inputs[0]),a.disconnect(void 0===A.inputs?A:A.inputs[0]),k.disconnect(w.gain),C.disconnect(x.gain),T.disconnect(M.gain),A.disconnect(P.gain),w.disconnect(h,0,0),M.disconnect(h,0,0),x.disconnect(h,0,1),P.disconnect(h,0,1)}}}(t,h,p,v);throw i()};return function(e,r){var o=r.channelCount,s=r.channelCountMode,u=r.pan,l=R(r,["channelCount","channelCountMode","pan"]);if("max"===s)throw i();var c=t(e,D({},l,{channelCount:1,channelCountMode:s,numberOfInputs:2})),p=n(e,D({},l,{channelCount:o,channelCountMode:s,gain:1})),v=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:u}),f=h(e,o,p,v,c),d=f.connectGraph,m=f.disconnectGraph;Object.defineProperty(v.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(v.gain,"maxValue",{get:function(){return 1}}),Object.defineProperty(v.gain,"minValue",{get:function(){return-1}});var _={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(t){var n;p.channelCount!==t&&(g&&m(),n=h(e,t,p,v,c),d=n.connectGraph,m=n.disconnectGraph,g&&d());p.channelCount=t},get channelCountMode(){return p.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();p.channelCountMode=t},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(t){p.channelInterpretation=t},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return v.gain},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.addEventListener(e[0],e[1],e[2])},dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.dispatchEvent(e[0])},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.removeEventListener(e[0],e[1],e[2])}},g=!1;return a(Co(_,c),(function(){d(),g=!0}),(function(){m(),g=!1}))}}(Qu,xo,Mo,Pl,Gs,Xu),Il=function(t,e){return function(n,r){var i=r.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,r);var a=n.createStereoPanner();return vo(a,r),mo(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:function(){return i},set:function(t){if(t!==i)throw e()}}),a}}(Ll,Gs),Nl=function(t,n,r,i,a){return function(){var o=new WeakMap,s=function(){var s=l(e(ra).mark((function s(u,l){var c,h,p;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(u),(h=aa(c,l))||(p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value},c=n(l,p)),o.set(l,c),h){e.next=9;break}return e.next=7,i(l,u.pan,c.pan);case 7:e.next=11;break;case 9:return e.next=11,t(l,u.pan,c.pan);case 11:if(!Ca(c)){e.next=16;break}return e.next=14,a(u,l,c.inputs[0]);case 14:e.next=18;break;case 16:return e.next=18,a(u,l,c);case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}}}(Bu,Il,Sa,zu,_u),Fl=function(t,e,n,r,i,a){return function(t){"use strict";O(u,t);var o=P(u);function u(t,l){var h;c(this,u);var p=i(t),v=D({},Zs,l),f=n(p,v),d=a(p),m=d?r():null;return(h=o.call(this,t,!1,f,m))._pan=e(s(h),d,f.pan),h}return C(u,[{key:"pan",get:function(){return this._pan}}]),u}(t)}(Au,qu,Il,Nl,yu,wu),Bl=function(t,n,r){return function(){var i=new WeakMap,a=function(){var a=l(e(ra).mark((function a(o,s){var u,l;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n(o),aa(u,s)||(l={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample},u=t(s,l)),i.set(s,u),!Ca(u)){e.next=9;break}return e.next=7,r(o,s,u.inputs[0]);case 7:e.next=11;break;case 9:return e.next=11,r(o,s,u);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Pl,Sa,_u),jl=function(t,e,n,r,i,a,o){return function(t){"use strict";O(l,t);var u=P(l);function l(t,e){var h;c(this,l);var p=i(t),v=D({},$s,e),f=n(p,v),d=a(p)?r():null;return(h=u.call(this,t,!0,f,d))._isCurveNullified=!1,h._nativeWaveShaperNode=f,o(s(h),1),h}return C(l,[{key:"curve",get:function(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve},set:function(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}},{key:"oversample",get:function(){return this._nativeWaveShaperNode.oversample},set:function(t){this._nativeWaveShaperNode.oversample=t}}]),l}(t)}(Au,io,Pl,Bl,yu,wu,Ku),zl=function(t){return null!==t&&t.isSecureContext}(fu),Ul=function(t){return function(e,n,r){Object.defineProperties(t,{currentFrame:{configurable:!0,get:function(){return Math.round(e*n)}},currentTime:{configurable:!0,get:function(){return e}}});try{return r()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}}}(fu),ql=new WeakMap,Wl=function(t,e){return function(n){var r=t.get(n);if(void 0!==r)return r;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r}}(ql,bu),Gl=zl?function(t,e,n,r,i,a,o,s,u,l,h,p,v){var f=0;return function(d,m){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"},g=h.get(d);if(void 0!==g&&g.has(m))return Promise.resolve();var y=l.get(d);if(void 0!==y){var b=y.get(m);if(void 0!==b)return b}var w=a(d),k=void 0===w.audioWorklet?i(m).then((function(t){var e=F(t,2),r=e[0],i=e[1],a=F(Gi(r,i),2),o=a[0],s=a[1],u="".concat(o,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(s,"\n})})(window,'_AWGS')");return n(u)})).then((function(){var t=v._AWGS.pop();if(void 0===t)throw new SyntaxError;r(w.currentTime,w.sampleRate,(function(){return t((function t(){"use strict";c(this,t)}),void 0,(function(t,n){if(""===t.trim())throw e();var r=zi.get(w);if(void 0!==r){if(r.has(t))throw e();Ki(n),Hi(n.parameterDescriptors),r.set(t,n)}else Ki(n),Hi(n.parameterDescriptors),zi.set(w,new Map([[t,n]]))}),w.sampleRate,void 0,void 0)}))})):Promise.all([i(m),Promise.resolve(t(p,p))]).then((function(t){var e=F(t,2),n=F(e[0],2),r=n[0],i=n[1],a=e[1],l=f+1;f=l;var c=F(Gi(r,i),2),h=c[0],p=c[1],v=a?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",d=a?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",m=a?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",g="".concat(h,";((AudioWorkletProcessor,registerProcessor)=>{").concat(p,"\n})(").concat(v,",(n,p)=>registerProcessor(n,class extends p{").concat(d,"process(i,o,p){").concat(m,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(l,"',class extends AudioWorkletProcessor{process(){return !1}})"),y=new Blob([g],{type:"application/javascript; charset=utf-8"}),b=URL.createObjectURL(y);return w.audioWorklet.addModule(b,_).then((function(){if(s(w))return w;var t=o(w);return t.audioWorklet.addModule(b,_).then((function(){return t}))})).then((function(t){if(null===u)throw new SyntaxError;try{new u(t,"__sac".concat(l))}catch(t){throw new SyntaxError}})).finally((function(){return URL.revokeObjectURL(b)}))}));return void 0===y?l.set(d,new Map([[m,k]])):y.set(m,k),k.then((function(){var t=h.get(d);void 0===t?h.set(d,new Set([m])):t.add(m)})).finally((function(){var t=l.get(d);void 0!==t&&t.delete(m)})),k}}(vu,Gs,function(t){return function(e){return new Promise((function(n,r){if(null!==t){var i=t.document.head;if(null===i)r(new SyntaxError);else{var a=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(o),u=t.onerror,l=function(){t.onerror=u,URL.revokeObjectURL(s)};t.onerror=function(e,n,i,a,o){return n===s||n===t.location.href&&1===i&&1===a?(l(),r(o),!1):null!==u?u(e,n,i,a,o):void 0},a.onerror=function(){l(),r(new SyntaxError)},a.onload=function(){l(),n()},a.src=s,a.type="module",i.appendChild(a)}}else r(new SyntaxError)}))}}(fu),Ul,(ds=function(){return new DOMException("","AbortError")},function(){var t=l(e(ra).mark((function t(n){var r;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(n);case 3:if(!(r=t.sent).ok){t.next=10;break}return t.next=7,r.text();case 7:return t.t0=t.sent,t.t1=r.url,t.abrupt("return",[t.t0,t.t1]);case 10:t.next=14;break;case 12:t.prev=12,t.t2=t.catch(0);case 14:throw ds();case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()),yu,Wl,wu,Pu,new WeakMap,new WeakMap,function(t,n){return l(e(ra).mark((function r(){var i,a,o,s,u,l,c;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",!0);case 2:if(null!==n){e.next=4;break}return e.abrupt("return",!1);case 4:return i=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new n(1,128,44100),o=URL.createObjectURL(i),s=!1,u=!1,e.prev=9,e.next=12,a.audioWorklet.addModule(o);case 12:return l=new t(a,"a",{numberOfOutputs:0}),c=a.createOscillator(),l.port.onmessage=function(){return s=!0},l.onprocessorerror=function(){return u=!0},c.connect(l),c.start(0),e.next=20,a.startRendering();case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(9);case 24:return e.prev=24,URL.revokeObjectURL(o),e.finish(24);case 27:return e.abrupt("return",s&&!u);case 28:case"end":return e.stop()}}),r,null,[[9,22,24,27]])})))}(Pu,bu),fu):void 0,Hl=function(t,e){return function(n){return t(n)||e(n)}}(Eu,wu),Kl=function(t,n,r,i,a,o,s,u,c,h,p){return function(v,f){var d=s(v)?v:o(v);if(a.has(f)){var m=r();return Promise.reject(m)}try{a.add(f)}catch(t){}return n(c,(function(){return c(d)}))?d.decodeAudioData(f).then((function(e){return Ja(f).catch((function(){})),n(u,(function(){return u(e)}))||p(e),t.add(e),e})):new Promise((function(n,r){var a=function(){var t=l(e(ra).mark((function t(){return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ja(f);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),o=function(t){r(t),a()};try{d.decodeAudioData(f,(function(e){"function"!=typeof e.copyFromChannel&&(h(e),ua(e)),t.add(e),a().then((function(){return n(e)}))}),(function(t){o(null===t?i():t)}))}catch(t){o(t)}}))}}(Vu,vu,(function(){return new DOMException("","DataCloneError")}),(function(){return new DOMException("","EncodingError")}),new WeakSet,yu,Hl,oa,co,Ru,Lu),Yl=(ms=Gl,_s=Su,gs=Iu,ys=Wu,bs=Yu,ws=Ju,ks=el,xs=al,Cs=ul,Es=Kl,Ms=cl,Ts=vl,Ps=dl,As=yl,Ss=El,Vs=Ol,Os=Rl,Ds=Fl,Rs=jl,function(t){"use strict";O(n,t);var e=P(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t,r))._nativeContext=t,i._audioWorklet=void 0===ms?void 0:{addModule:function(t,e){return ms(s(i),t,e)}},i}return C(n,[{key:"audioWorklet",get:function(){return this._audioWorklet}},{key:"createAnalyser",value:function(){return new _s(this)}},{key:"createBiquadFilter",value:function(){return new bs(this)}},{key:"createBuffer",value:function(t,e,n){return new gs({length:e,numberOfChannels:t,sampleRate:n})}},{key:"createBufferSource",value:function(){return new ys(this)}},{key:"createChannelMerger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new ws(this,{numberOfInputs:t})}},{key:"createChannelSplitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new ks(this,{numberOfOutputs:t})}},{key:"createConstantSource",value:function(){return new xs(this)}},{key:"createConvolver",value:function(){return new Cs(this)}},{key:"createDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Ms(this,{maxDelayTime:t})}},{key:"createDynamicsCompressor",value:function(){return new Ts(this)}},{key:"createGain",value:function(){return new Ps(this)}},{key:"createIIRFilter",value:function(t,e){return new As(this,{feedback:e,feedforward:t})}},{key:"createOscillator",value:function(){return new Ss(this)}},{key:"createPanner",value:function(){return new Vs(this)}},{key:"createPeriodicWave",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1};return new Os(this,D({},n,{imag:e,real:t}))}},{key:"createStereoPanner",value:function(){return new Ds(this)}},{key:"createWaveShaper",value:function(){return new Rs(this)}},{key:"decodeAudioData",value:function(t,e,n){return Es(this._nativeContext,t).then((function(t){return"function"==typeof e&&e(t),t}),(function(t){throw"function"==typeof n&&n(t),t}))}}]),n}(kl)),Xl=function(t,e,n,r){return function(t){"use strict";O(a,t);var i=P(a);function a(t,o){var s;c(this,a);var u=n(t),l=e(u,o);if(r(u))throw TypeError();return(s=i.call(this,t,!0,l,null))._nativeMediaElementAudioSourceNode=l,s}return C(a,[{key:"mediaElement",get:function(){return this._nativeMediaElementAudioSourceNode.mediaElement}}]),a}(t)}(Au,(function(t,e){return t.createMediaElementSource(e.mediaElement)}),yu,wu),Zl=function(t,e,n,r){return function(t){"use strict";O(a,t);var i=P(a);function a(t,o){var s;c(this,a);var u=n(t);if(r(u))throw new TypeError;var l=D({},lo,o),h=e(u,l);return(s=i.call(this,t,!1,h,null))._nativeMediaStreamAudioDestinationNode=h,s}return C(a,[{key:"stream",get:function(){return this._nativeMediaStreamAudioDestinationNode.stream}}]),a}(t)}(Au,(function(t,e){var n=t.createMediaStreamDestination();return vo(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:function(){return 0}}),n}),yu,wu),Ql=function(t,e,n,r){return function(t){"use strict";O(a,t);var i=P(a);function a(t,o){var s;c(this,a);var u=n(t),l=e(u,o);if(r(u))throw new TypeError;return(s=i.call(this,t,!0,l,null))._nativeMediaStreamAudioSourceNode=l,s}return C(a,[{key:"mediaStream",get:function(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}]),a}(t)}(Au,(function(t,e){var n=e.mediaStream,r=n.getAudioTracks();r.sort((function(t,e){return t.id<e.id?-1:t.id>e.id?1:0}));var i=r.slice(0,1),a=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:n}),a}),yu,wu),$l=function(t,e){return function(n,r){var i=r.mediaStreamTrack;if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);var a=new MediaStream([i]),o=n.createMediaStreamSource(a);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return o}}(io,wu),Jl=function(t,e,n){return function(t){"use strict";O(i,t);var r=P(i);function i(t,a){c(this,i);var o=n(t),s=e(o,a);return r.call(this,t,!0,s,null)}return i}(t)}(Au,$l,yu),tc=function(t,e,n,r,i,a,o,s,u){return function(t){"use strict";O(h,t);var l=P(h);function h(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c(this,h),null===u)throw new Error("Missing the native AudioContext constructor.");try{e=new u(i)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw r();if(!ga(i.latencyHint))throw new TypeError("The provided value '".concat(i.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==i.sampleRate&&e.sampleRate!==i.sampleRate)throw n();t=l.call(this,e,2);var a=i.latencyHint,o=e.sampleRate;if(t._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===a?512/o:"interactive"===a||void 0===a?256/o:"playback"===a?1024/o:128*Math.max(2,Math.min(128,Math.round(a*o/128)))/o,t._nativeAudioContext=e,"webkitAudioContext"===u.name?(t._nativeGainNode=e.createGain(),t._nativeOscillatorNode=e.createOscillator(),t._nativeGainNode.gain.value=1e-37,t._nativeOscillatorNode.connect(t._nativeGainNode).connect(e.destination),t._nativeOscillatorNode.start()):(t._nativeGainNode=null,t._nativeOscillatorNode=null),t._state=null,"running"===e.state){t._state="suspended";var s=function(){"suspended"===t._state&&(t._state=null),e.removeEventListener("statechange",s)};e.addEventListener("statechange",s)}return t}return C(h,[{key:"baseLatency",get:function(){return this._baseLatency}},{key:"state",get:function(){return null!==this._state?this._state:this._nativeAudioContext.state}},{key:"close",value:function(){var t=this;return"closed"===this.state?this._nativeAudioContext.close().then((function(){throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((function(){null!==t._nativeGainNode&&null!==t._nativeOscillatorNode&&(t._nativeOscillatorNode.stop(),t._nativeGainNode.disconnect(),t._nativeOscillatorNode.disconnect()),_a(t)})))}},{key:"createMediaElementSource",value:function(t){return new i(this,{mediaElement:t})}},{key:"createMediaStreamDestination",value:function(){return new a(this)}},{key:"createMediaStreamSource",value:function(t){return new o(this,{mediaStream:t})}},{key:"createMediaStreamTrackSource",value:function(t){return new s(this,{mediaStreamTrack:t})}},{key:"resume",value:function(){var t=this;return"suspended"===this._state?new Promise((function(e,n){var r=t,i=function(){r._nativeAudioContext.removeEventListener("statechange",i),"running"===r._nativeAudioContext.state?e():r.resume().then(e,n)};t._nativeAudioContext.addEventListener("statechange",i)})):this._nativeAudioContext.resume().catch((function(t){if(void 0===t||15===t.code)throw e();throw t}))}},{key:"suspend",value:function(){return this._nativeAudioContext.suspend().catch((function(t){if(void 0===t)throw e();throw t}))}}]),h}(t)}(Yl,io,Gs,Qs,Xl,Zl,Ql,Jl,Cu),ec=(Ls=wl,function(t){var e=Ls.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e}),nc=(Is=ec,function(t,e){Is(t).add(e)}),rc=function(t){return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e[r];if(void 0===a)throw t();return Ia(n)?a.connect(n,0,i):a.connect(n,0)}}(sa),ic=function(t){return function(e,n){t(e).delete(n)}}(ec),ac=function(t){return function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?e.forEach((function(t){return t.disconnect()})):"number"==typeof n?eo(t,e,n).disconnect():Ia(n)?void 0===r?e.forEach((function(t){return t.disconnect(n)})):void 0===i?eo(t,e,r).disconnect(n,0):eo(t,e,r).disconnect(n,0,i):void 0===r?e.forEach((function(t){return t.disconnect(n)})):eo(t,e,r).disconnect(n,0)}}(sa),oc=new WeakMap,sc=(Ns=oc,Fs=Yi,function(t){return Fs(Ns,t)}),uc=function(t,e,n,r,i,a,o,s,u,l,c,h,p){return function(v,f,d,m){if(0===m.numberOfInputs&&0===m.numberOfOutputs)throw u();var _=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(_.some((function(t){return t<1})))throw u();if(_.length!==m.numberOfOutputs)throw e();if("explicit"!==m.channelCountMode)throw u();var g=m.channelCount*m.numberOfInputs,y=_.reduce((function(t,e){return t+e}),0),b=void 0===d.parameterDescriptors?0:d.parameterDescriptors.length;if(g+b>6||y>6)throw u();for(var w=new MessageChannel,k=[],x=[],C=0;C<m.numberOfInputs;C+=1)k.push(o(v,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),x.push(i(v,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));var E=[],M=!0,T=!1,P=void 0;if(void 0!==d.parameterDescriptors)try{for(var S,V=function(t,e){var n=e.value,r=n.defaultValue,i=n.maxValue,o=n.minValue,s=n.name,u=a(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==m.parameterData[s]?m.parameterData[s]:void 0===r?0:r});Object.defineProperties(u.offset,{defaultValue:{get:function(){return void 0===r?0:r}},maxValue:{get:function(){return void 0===i?ha:i}},minValue:{get:function(){return void 0===o?ca:o}}}),E.push(u)},O=d.parameterDescriptors[Symbol.iterator]();!(M=(S=O.next()).done);M=!0)V(0,S)}catch(t){T=!0,P=t}finally{try{M||null==O.return||O.return()}finally{if(T)throw P}}for(var R=r(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+b)}),L=yo(f,v.sampleRate),I=s(v,L,g+b,Math.max(1,y)),N=i(v,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),F=[],B=0;B<m.numberOfOutputs;B+=1)F.push(r(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[B]}));for(var j=0;j<m.numberOfInputs;j+=1){k[j].connect(x[j]);for(var z=0;z<m.channelCount;z+=1)x[j].connect(R,z,j*m.channelCount+z)}var U=new ja(void 0===d.parameterDescriptors?[]:d.parameterDescriptors.map((function(t,e){var n=t.name,r=E[e];return r.connect(R,0,g+e),r.start(0),[n,r.offset]})));R.connect(I);var q,W,G=m.channelInterpretation,H=null,K=0===m.numberOfOutputs?[I]:F,Y={get bufferSize(){return L},get channelCount(){return m.channelCount},set channelCount(t){throw n()},get channelCountMode(){return m.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return G},set channelInterpretation(t){var e=!0,n=!1,r=void 0;try{for(var i,a=k[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.channelInterpretation=t}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}G=t},get context(){return I.context},get inputs(){return k},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return H},set onprocessorerror(t){"function"==typeof H&&Y.removeEventListener("processorerror",H),"function"==typeof(H="function"==typeof t?t:null)&&Y.addEventListener("processorerror",H)},get parameters(){return U},get port(){return w.port2},addEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.addEventListener(e[0],e[1],e[2])},connect:t.bind(null,K),disconnect:l.bind(null,K),dispatchEvent:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.dispatchEvent(e[0])},removeEventListener:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.removeEventListener(e[0],e[1],e[2])}},X=new Map;w.port1.addEventListener=(q=w.port1.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var r="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==r){var i=X.get(e[1]);void 0!==i?e[1]=i:(e[1]=function(t){c(v.currentTime,v.sampleRate,(function(){return r(t)}))},X.set(r,e[1]))}}return q.call(w.port1,e[0],e[1],e[2])}),w.port1.removeEventListener=(W=w.port1.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var r=X.get(e[1]);void 0!==r&&(X.delete(e[1]),e[1]=r)}return W.call(w.port1,e[0],e[1],e[2])});var Z=null;Object.defineProperty(w.port1,"onmessage",{get:function(){return Z},set:function(t){"function"==typeof Z&&w.port1.removeEventListener("message",Z),"function"==typeof(Z="function"==typeof t?t:null)&&(w.port1.addEventListener("message",Z),w.port1.start())}}),d.prototype.port=w.port1;var Q=null,$=function(t,e,n,r){var i=Ui.get(t);void 0===i&&(i=new WeakMap,Ui.set(t,i));var a=wo(n,r);return i.set(e,a),a}(v,Y,d,m);$.then((function(t){return Q=t}));var J=Ga(m.numberOfInputs,m.channelCount),tt=Ga(m.numberOfOutputs,_),et=void 0===d.parameterDescriptors?[]:d.parameterDescriptors.reduce((function(t,e){return D({},t,A({},e.name,new Float32Array(128)))}),{}),nt=!0,rt=function(){m.numberOfOutputs>0&&I.disconnect(N);for(var t=0,e=0;t<m.numberOfOutputs;t+=1){for(var n=F[t],r=0;r<_[t];r+=1)N.disconnect(n,e+r,r);e+=_[t]}},it=new Map;I.onaudioprocess=function(t){var e=t.inputBuffer,n=t.outputBuffer;if(null!==Q)for(var r=function(t){for(var r=0;r<m.numberOfInputs;r+=1)for(var a=0;a<m.channelCount;a+=1)Ua(e,J[r],a,a,t);void 0!==d.parameterDescriptors&&d.parameterDescriptors.forEach((function(n,r){var i=n.name;Ua(e,et,i,g+r,t)}));for(var o=0;o<m.numberOfInputs;o+=1)for(var s=0;s<_[o];s+=1)0===tt[o][s].byteLength&&(tt[o][s]=new Float32Array(128));try{var u=J.map((function(t,e){if(i[e].size>0)return it.set(e,L/128),t;var n=it.get(e);return void 0===n?[]:(t.every((function(t){return t.every((function(t){return 0===t}))}))&&(1===n?it.delete(e):it.set(e,n-1)),t)})),l=c(v.currentTime+t/v.sampleRate,v.sampleRate,(function(){return Q.process(u,tt,et)}));nt=l;for(var h=0,p=0;h<m.numberOfOutputs;h+=1){for(var f=0;f<_[h];f+=1)Wa(n,tt[h],f,p+f,t);p+=_[h]}}catch(t){nt=!1,Y.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!nt){for(var y=0;y<m.numberOfInputs;y+=1){k[y].disconnect(x[y]);for(var b=0;b<m.channelCount;b+=1)x[t].disconnect(R,b,y*m.channelCount+b)}if(void 0!==d.parameterDescriptors)for(var w=d.parameterDescriptors.length,C=0;C<w;C+=1){var M=E[C];M.disconnect(R,0,g+C),M.stop()}return R.disconnect(I),I.onaudioprocess=null,at?rt():ut(),"break"}},i=h(Y),a=0;a<L;a+=128){if("break"===r(a))break}};var at=!1,ot=o(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),st=function(){return I.connect(ot).connect(v.destination)},ut=function(){I.disconnect(ot),ot.disconnect()};return st(),p(Y,(function(){if(nt){ut(),m.numberOfOutputs>0&&I.connect(N);for(var t=0,e=0;t<m.numberOfOutputs;t+=1){for(var n=F[t],r=0;r<_[t];r+=1)N.connect(n,e+r,r);e+=_[t]}}at=!0}),(function(){nt&&(st(),rt()),at=!1}))}}(rc,sa,io,Qu,xo,rl,Mo,Ws,Gs,ac,Ul,sc,Xu),lc=function(t,e,n,r,i){return function(a,o,s,u,l,c){if(null!==s)try{var h=new s(a,u,c),p=new Map,v=null;if(Object.defineProperties(h,{channelCount:{get:function(){return c.channelCount},set:function(){throw t()}},channelCountMode:{get:function(){return"explicit"},set:function(){throw t()}},onprocessorerror:{get:function(){return v},set:function(t){"function"==typeof v&&h.removeEventListener("processorerror",v),"function"==typeof(v="function"==typeof t?t:null)&&h.addEventListener("processorerror",v)}}}),h.addEventListener=(m=h.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;if("processorerror"===e[0]){var i="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==i){var a=p.get(e[1]);void 0!==a?e[1]=a:(e[1]=function(t){"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),i(t)):i(new ErrorEvent(e[0],D({},t)))},p.set(i,e[1]))}}return m.call(h,"error",e[1],e[2]),(r=m).call.apply(r,[h].concat(B(e)))}),h.removeEventListener=(d=h.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("processorerror"===e[0]){var r=p.get(e[1]);void 0!==r&&(p.delete(e[1]),e[1]=r)}return d.call(h,"error",e[1],e[2]),d.call(h,e[0],e[1],e[2])}),0!==c.numberOfOutputs){var f=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});h.connect(f).connect(a.destination);return i(h,(function(){return f.disconnect()}),(function(){return f.connect(a.destination)}))}return h}catch(t){if(11===t.code)throw r();throw t}var d,m;if(void 0===l)throw r();return function(t){var e=(new MessageChannel).port1;try{e.postMessage(t)}finally{e.close()}}(c),e(a,o,l,c)}}(io,uc,Mo,Gs,Xu),cc=function(t,n,r,i,a,o,s,u,c,h,p,v,f,d,m,_){return function(g,y,b){var w,k=new WeakMap,x=null,C=(w=l(e(ra).mark((function u(w,C){var E,M,T,P,A,S,V,O,D,R,L,I,N,B,j,z,U,q,W,G,H,K,Y,X,Z,Q,$,J,tt,et,nt,rt,it,at,ot,st,ut,lt,ct;return e(ra).wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(E=p(w),M=null,T=aa(E,C),P=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount),null===v){for(A=P.reduce((function(t,e){return t+e}),0),S=a(C,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),V=[],O=0;O<w.numberOfOutputs;O+=1)V.push(i(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:P[O]}));(D=s(C,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})).connect=n.bind(null,V),D.disconnect=c.bind(null,V),M=[S,V,D]}else T||(E=new v(C,g));if(k.set(C,null===M?E:M[2]),null===M){u.next=41;break}if(null!==x){u.next=32;break}if(void 0!==b){u.next=10;break}throw new Error("Missing the processor constructor.");case 10:if(null!==f){u.next=12;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 12:if(R=w.channelCount*w.numberOfInputs,L=void 0===b.parameterDescriptors?0:b.parameterDescriptors.length,I=R+L,N=function(){var t=l(e(ra).mark((function t(){var n,r,u,c,h,p,v,g,b,k,x,E,M,T,P,A;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new f(I,128*Math.ceil(w.context.length/128),C.sampleRate),r=[],u=[],c=0;c<y.numberOfInputs;c+=1)r.push(s(n,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),u.push(a(n,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));return t.next=6,Promise.all(Array.from(w.parameters.values()).map(function(){var t=l(e(ra).mark((function t(r){var i;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r.value}),t.next=3,d(n,r,i.offset);case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:for(h=t.sent,p=i(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+L)}),v=0;v<y.numberOfInputs;v+=1)for(r[v].connect(u[v]),g=0;g<y.channelCount;g+=1)u[v].connect(p,g,v*y.channelCount+g);for(b=!0,k=!1,x=void 0,t.prev=10,E=h.entries()[Symbol.iterator]();!(b=(M=E.next()).done);b=!0)T=F(M.value,2),P=T[0],(A=T[1]).connect(p,0,R+P),A.start(0);t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),k=!0,x=t.t0;case 18:t.prev=18,t.prev=19,b||null==E.return||E.return();case 21:if(t.prev=21,!k){t.next=24;break}throw x;case 24:return t.finish(21);case 25:return t.finish(18);case 26:return p.connect(n.destination),t.next=29,Promise.all(r.map((function(t){return m(w,n,t)})));case 29:return t.abrupt("return",_(n));case 30:case"end":return t.stop()}}),t,null,[[10,14,18,26],[19,,21,25]])})));return function(){return t.apply(this,arguments)}}(),u.t0=Ka,u.t1=w,0!==I){u.next=22;break}u.t2=null,u.next=25;break;case 22:return u.next=24,N();case 24:u.t2=u.sent;case 25:u.t3=u.t2,u.t4=C,u.t5=y,u.t6=P,u.t7=b,u.t8=h,x=(0,u.t0)(u.t1,u.t3,u.t4,u.t5,u.t6,u.t7,u.t8);case 32:return u.next=34,x;case 34:for(B=u.sent,j=r(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),z=F(M,3),U=z[0],q=z[1],W=z[2],null!==B&&(j.buffer=B,j.start(0)),j.connect(U),G=0,H=0;G<w.numberOfOutputs;G+=1){for(K=q[G],Y=0;Y<P[G];Y+=1)U.connect(K,H+Y,Y);H+=P[G]}return u.abrupt("return",W);case 41:if(X=!0,Z=!1,Q=void 0,$=!0,J=!1,tt=void 0,T){u.next=68;break}u.prev=43,et=w.parameters.entries()[Symbol.iterator]();case 45:if(X=(nt=et.next()).done){u.next=52;break}return rt=F(nt.value,2),it=rt[0],at=rt[1],u.next=49,d(C,at,E.parameters.get(it));case 49:X=!0,u.next=45;break;case 52:u.next=58;break;case 54:u.prev=54,u.t9=u.catch(43),Z=!0,Q=u.t9;case 58:u.prev=58,u.prev=59,X||null==et.return||et.return();case 61:if(u.prev=61,!Z){u.next=64;break}throw Q;case 64:return u.finish(61);case 65:return u.finish(58);case 66:u.next=91;break;case 68:u.prev=68,ot=w.parameters.entries()[Symbol.iterator]();case 70:if($=(st=ot.next()).done){u.next=77;break}return ut=F(st.value,2),lt=ut[0],ct=ut[1],u.next=74,t(C,ct,E.parameters.get(lt));case 74:$=!0,u.next=70;break;case 77:u.next=83;break;case 79:u.prev=79,u.t10=u.catch(68),J=!0,tt=u.t10;case 83:u.prev=83,u.prev=84,$||null==ot.return||ot.return();case 86:if(u.prev=86,!J){u.next=89;break}throw tt;case 89:return u.finish(86);case 90:return u.finish(83);case 91:return u.next=93,m(w,C,E);case 93:return u.abrupt("return",E);case 94:case"end":return u.stop()}}),u,null,[[43,54,58,66],[59,,61,65],[68,79,83,91],[84,,86,90]])}))),function(t,e){return w.apply(this,arguments)});return{render:function(t,e){u(e,t);var n=k.get(e);return void 0!==n?Promise.resolve(n):C(t,e)}}}}(Bu,rc,ju,Qu,xo,rl,Mo,ic,ac,Ul,Sa,Pu,bu,zu,_u,_l),hc=(Bs=ql,function(t){return Bs.get(t)}),pc=function(t){return function(e,n){t.set(e,n)}}(oc),vc=zl?function(t,e,n,r,i,a,o,u,l,h,p,v,f,d){return function(e){"use strict";O(_,e);var m=P(_);function _(e,d,g){var y,b;c(this,_);var w=u(e),k=l(w),x=p(D({},za,g));f(x);var C=zi.get(w),E=null==C?void 0:C.get(d),M=k||"closed"!==w.state?w:null!==(b=o(w))&&void 0!==b?b:w,T=i(M,k?null:e.baseLatency,h,d,E,x),P=k?r(d,x,E):null;y=m.call(this,e,!0,T,P);var A=[];T.parameters.forEach((function(t,e){var r=n(s(y),k,t);A.push([e,r])})),y._nativeAudioWorkletNode=T,y._onprocessorerror=null,y._parameters=new ja(A),k&&t(w,s(y));var S=a(s(y)).activeInputs;return v(T,S),y}return C(_,[{key:"onprocessorerror",get:function(){return this._onprocessorerror},set:function(t){var e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;var n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}},{key:"parameters",get:function(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}},{key:"port",get:function(){return this._nativeAudioWorkletNode.port}}]),_}(e)}(nc,Au,qu,cc,lc,fa,hc,yu,wu,Pu,(function(t){return D({},t,{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(function(){return 1}))})}),pc,(function(t){var e=new MessageChannel,n=e.port1,r=e.port2;try{n.postMessage(t)}finally{n.close(),r.close()}}),su):void 0,fc=(function(t,e,n,r,i){}(io,Gs,Qs,kl,Cu),function(t,e){return function(n,r,i){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}}}(Gs,bu)),dc=function(t,e,n,r,i,a,o,s){return function(u,l){return n(u).render(u,l).then((function(){return Promise.all(Array.from(r(l)).map((function(t){return n(t).render(t,l)})))})).then((function(){return i(l)})).then((function(n){return"function"!=typeof n.copyFromChannel?(o(n),ua(n)):e(a,(function(){return a(n)}))||s(n),t.add(n),n}))}}(Vu,vu,mu,ec,_l,oa,Ru,Lu),mc=(function(t,e,n,r,i){}(vu,io,fc,kl,dc),function(t,e,n,r,i){return function(t){"use strict";O(o,t);var a=P(o);function o(t,n,i){var s,u;if(c(this,o),"number"==typeof t&&void 0!==n&&void 0!==i)u={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");u=t}var l,h,p=D({},Hs,u),v=p.length,f=p.numberOfChannels,d=p.sampleRate,m=r(f,v,d);return e(co,(function(){return co(m)}))||m.addEventListener("statechange",(l=0,h=function(t){"running"===s._state&&(l>0?(m.removeEventListener("statechange",h),t.stopImmediatePropagation(),s._waitForThePromiseToSettle(t)):l+=1)})),(s=a.call(this,m,f))._length=v,s._nativeOfflineAudioContext=m,s._state=null,s}return C(o,[{key:"length",get:function(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}},{key:"state",get:function(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}},{key:"startRendering",value:function(){var t=this;return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((function(){t._state=null,_a(t)})))}},{key:"_waitForThePromiseToSettle",value:function(t){var e=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((function(){return e._waitForThePromiseToSettle(t)}))}}]),o}(t)}(Yl,vu,io,fc,dc)),_c=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(Fi,Eu),gc=(js=Li,zs=Mu,function(t){return js.has(t)||zs(t)}),yc=(Us=Ni,qs=Tu,function(t){return Us.has(t)||qs(t)}),bc=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(Fi,wu);function wc(t,e){if(!t)throw new Error(e)}function kc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(e<=t&&t<=n))throw new RangeError("Value must be within [".concat(e,", ").concat(n,"], got: ").concat(t))}function xc(t){t.isOffline||"running"===t.state||Mc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var Cc=console;function Ec(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;(r=Cc).log.apply(r,B(e))}function Mc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;(r=Cc).warn.apply(r,B(e))}function Tc(t){return void 0===t}function Pc(t){return!Tc(t)}function Ac(t){return"function"==typeof t}function Sc(t){return"number"==typeof t}function Vc(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Oc(t){return"boolean"==typeof t}function Dc(t){return Array.isArray(t)}function Rc(t){return"string"==typeof t}function Lc(t){return Rc(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Ic(t){return new tc(t)}function Nc(t,e,n){return new mc(t,e,n)}var Fc="object"==typeof self?self:null,Bc=Fc&&(Fc.hasOwnProperty("AudioContext")||Fc.hasOwnProperty("webkitAudioContext"));function jc(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function zc(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))}Object.create;Object.create;var Uc=function(){"use strict";function t(e,n,r){c(this,t),this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}return C(t,[{key:"_createWorker",value:function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}},{key:"_createTimeout",value:function(){var t=this;this._timeout=setTimeout((function(){t._createTimeout(),t._callback()}),1e3*this._updateInterval)}},{key:"_createClock",value:function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}},{key:"_disposeClock",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}},{key:"updateInterval",get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}},{key:"type",get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}},{key:"dispose",value:function(){this._disposeClock()}}]),t}();function qc(t){return yc(t)}function Wc(t){return gc(t)}function Gc(t){return bc(t)}function Hc(t){return _c(t)}function Kc(t){return t instanceof AudioBuffer}function Yc(t,e){return"value"===t||qc(e)||Wc(e)||Kc(e)}function Xc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var i=n.shift();if(Vc(t)&&Vc(i))for(var a in i)Yc(a,i[a])?t[a]=i[a]:Vc(i[a])?(t[a]||Object.assign(t,A({},a,{})),Xc(t[a],i[a])):Object.assign(t,A({},a,i[a]));return Xc.apply(void 0,[t].concat(B(n)))}function Zc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i={},a=Array.from(e);if(Vc(a[0])&&r&&!Reflect.has(a[0],r)){var o=Object.keys(a[0]).some((function(e){return Reflect.has(t,e)}));o||(Xc(i,A({},r,a[0])),n.splice(n.indexOf(r),1),a.shift())}if(1===a.length&&Vc(a[0]))Xc(i,a[0]);else for(var s=0;s<n.length;s++)Pc(a[s])&&(i[n[s]]=a[s]);return Xc(t,i)}function Qc(t,e){return Tc(t)?e:t}function $c(t,e){return e.forEach((function(e){Reflect.has(t,e)&&delete t[e]})),t}var Jc=function(){"use strict";function t(){c(this,t),this.debug=!1,this._wasDisposed=!1}return C(t,[{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(this.debug||Fc&&this.toString()===Fc.TONE_DEBUG_CLASS)&&Ec.apply(void 0,[this].concat(B(e)))}},{key:"dispose",value:function(){return this._wasDisposed=!0,this}},{key:"disposed",get:function(){return this._wasDisposed}},{key:"toString",value:function(){return this.name}}],[{key:"getDefaults",value:function(){return{}}}]),t}();Jc.version=Vi;var th=1e-6;function eh(t,e){return t>e+th}function nh(t,e){return eh(t,e)||ih(t,e)}function rh(t,e){return t+th<e}function ih(t,e){return Math.abs(t-e)<th}function ah(t,e,n){return Math.max(Math.min(t,n),e)}var oh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this)).name="Timeline",t._timeline=[];var r=Zc(n.getDefaults(),arguments,["memory"]);return t.memory=r.memory,t.increasing=r.increasing,t}return C(n,[{key:"length",get:function(){return this._timeline.length}},{key:"add",value:function(t){if(wc(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];wc(nh(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}return this}},{key:"remove",value:function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return-1!==n?this._timeline[n]:null}},{key:"peek",value:function(){return this._timeline[0]}},{key:"shift",value:function(){return this._timeline.shift()}},{key:"getAfter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}},{key:"getBefore",value:function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null}},{key:"cancel",value:function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(ih(this._timeline[e].time,t)){for(var n=e;n>=0&&ih(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&nh(this._timeline[0].time,t)&&(this._timeline=[]);return this}},{key:"cancelBefore",value:function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}},{key:"previousEvent",value:function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}},{key:"_search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;var n=0,r=this._timeline.length,i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<i;){var a=Math.floor(n+(i-n)/2),o=this._timeline[a],s=this._timeline[a+1];if(ih(o[e],t)){for(var u=a;u<this._timeline.length;u++){var l=this._timeline[u];if(!ih(l[e],t))break;a=u}return a}if(rh(o[e],t)&&eh(s[e],t))return a;eh(o[e],t)?i=a:n=a+1}return-1}},{key:"_iterate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(e,n+1).forEach(t)}},{key:"forEach",value:function(t){return this._iterate(t),this}},{key:"forEachBefore",value:function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}},{key:"forEachAfter",value:function(t,e){var n=this._search(t);return this._iterate(e,n+1),this}},{key:"forEachBetween",value:function(t,e,n){var r=this._search(t),i=this._search(e);return-1!==r&&-1!==i?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,r,i)):-1===r&&this._iterate(n,0,i),this}},{key:"forEachFrom",value:function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}},{key:"forEachAtTime",value:function(t,e){var n=this._search(t);if(-1!==n&&ih(this._timeline[n].time,t)){for(var r=n,i=n;i>=0&&ih(this._timeline[i].time,t);i--)r=i;this._iterate((function(t){e(t)}),r,n)}return this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._timeline=[],this}}],[{key:"getDefaults",value:function(){return{memory:1/0,increasing:!1}}}]),n}(Jc),sh=[];function uh(t){sh.push(t)}var lh=[];function ch(t){lh.push(t)}function hh(t){lh.forEach((function(e){return e(t)}))}var ph=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="Emitter",t}return C(n,[{key:"on",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(t){Tc(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)})),this}},{key:"once",value:function(t,e){var n=this,r=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(void 0,B(a)),n.off(t,r)};return this.on(t,r),this}},{key:"off",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(r){if(Tc(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(Tc(e))n._events[t]=[];else for(var i=n._events[t],a=i.length-1;a>=0;a--)i[a]===e&&i.splice(a,1)})),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this._events&&this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),a=0,o=i.length;a<o;a++)i[a].apply(this,n);return this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._events=void 0,this}}],[{key:"mixin",value:function(t){["on","once","off","emit"].forEach((function(e){var r=Object.getOwnPropertyDescriptor(n.prototype,e);Object.defineProperty(t.prototype,e,r)}))}}]),n}(Jc),vh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).isOffline=!1,t}return C(n,[{key:"toJSON",value:function(){return{}}}]),n}(ph),fh=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this)).name="Context",t._constants=new Map,t._timeouts=new oh,t._timeoutIds=0,t._initialized=!1,t.isOffline=!1,t._workletModules=new Map;var e=Zc(r.getDefaults(),arguments,["context"]);return e.context?t._context=e.context:t._context=Ic({latencyHint:e.latencyHint}),t._ticker=new Uc(t.emit.bind(s(t),"tick"),e.clockSource,e.updateInterval),t.on("tick",t._timeoutLoop.bind(s(t))),t._context.onstatechange=function(){t.emit("statechange",t.state)},t._setLatencyHint(e.latencyHint),t.lookAhead=e.lookAhead,t}return C(r,[{key:"initialize",value:function(){var t;return this._initialized||(t=this,sh.forEach((function(e){return e(t)})),this._initialized=!0),this}},{key:"createAnalyser",value:function(){return this._context.createAnalyser()}},{key:"createOscillator",value:function(){return this._context.createOscillator()}},{key:"createBufferSource",value:function(){return this._context.createBufferSource()}},{key:"createBiquadFilter",value:function(){return this._context.createBiquadFilter()}},{key:"createBuffer",value:function(t,e,n){return this._context.createBuffer(t,e,n)}},{key:"createChannelMerger",value:function(t){return this._context.createChannelMerger(t)}},{key:"createChannelSplitter",value:function(t){return this._context.createChannelSplitter(t)}},{key:"createConstantSource",value:function(){return this._context.createConstantSource()}},{key:"createConvolver",value:function(){return this._context.createConvolver()}},{key:"createDelay",value:function(t){return this._context.createDelay(t)}},{key:"createDynamicsCompressor",value:function(){return this._context.createDynamicsCompressor()}},{key:"createGain",value:function(){return this._context.createGain()}},{key:"createIIRFilter",value:function(t,e){return this._context.createIIRFilter(t,e)}},{key:"createPanner",value:function(){return this._context.createPanner()}},{key:"createPeriodicWave",value:function(t,e,n){return this._context.createPeriodicWave(t,e,n)}},{key:"createStereoPanner",value:function(){return this._context.createStereoPanner()}},{key:"createWaveShaper",value:function(){return this._context.createWaveShaper()}},{key:"createMediaStreamSource",value:function(t){return wc(Hc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}},{key:"createMediaElementSource",value:function(t){return wc(Hc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}},{key:"createMediaStreamDestination",value:function(){return wc(Hc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}},{key:"decodeAudioData",value:function(t){return this._context.decodeAudioData(t)}},{key:"currentTime",get:function(){return this._context.currentTime}},{key:"state",get:function(){return this._context.state}},{key:"sampleRate",get:function(){return this._context.sampleRate}},{key:"listener",get:function(){return this.initialize(),this._listener},set:function(t){wc(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}},{key:"transport",get:function(){return this.initialize(),this._transport},set:function(t){wc(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}},{key:"draw",get:function(){return this.initialize(),this._draw},set:function(t){wc(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}},{key:"destination",get:function(){return this.initialize(),this._destination},set:function(t){wc(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}},{key:"createAudioWorkletNode",value:function(t,e){return function(t,e,n){return wc(Pc(vc),"This node only works in a secure context (https or localhost)"),new vc(t,e,n)}(this.rawContext,t,e)}},{key:"addAudioWorkletModule",value:function(t,n){return zc(this,void 0,void 0,e(ra).mark((function r(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wc(Pc(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(t)),e.next=4,this._workletModules.get(n);case 4:case"end":return e.stop()}}),r,this)})))}},{key:"workletsAreReady",value:function(){return zc(this,void 0,void 0,e(ra).mark((function t(){var n;return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this._workletModules.forEach((function(t){return n.push(t)})),t.next=4,Promise.all(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"updateInterval",get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}},{key:"clockSource",get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}},{key:"latencyHint",get:function(){return this._latencyHint}},{key:"_setLatencyHint",value:function(t){var e=0;if(this._latencyHint=t,Rc(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}},{key:"rawContext",get:function(){return this._context}},{key:"now",value:function(){return this._context.currentTime+this.lookAhead}},{key:"immediate",value:function(){return this._context.currentTime}},{key:"resume",value:function(){return Hc(this._context)?this._context.resume():Promise.resolve()}},{key:"close",value:function(){return zc(this,void 0,void 0,e(ra).mark((function t(){return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Hc(this._context)){t.next=3;break}return t.next=3,this._context.close();case 3:this._initialized&&hh(this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getConstant",value:function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),r=0;r<n.length;r++)n[r]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}},{key:"dispose",value:function(){var t=this;return V(M(r.prototype),"dispose",this).call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((function(e){return t._constants[e].disconnect()})),this}},{key:"_timeoutLoop",value:function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}},{key:"setTimeout",value:function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}},{key:"clearTimeout",value:function(t){var e=this;return this._timeouts.forEach((function(n){n.id===t&&e._timeouts.remove(n)})),this}},{key:"clearInterval",value:function(t){return this.clearTimeout(t)}},{key:"setInterval",value:function(t,e){var n=this,r=++this._timeoutIds,i=function(){var a=n.now();n._timeouts.add({callback:function(){t(),i()},id:r,time:a+e})};return i(),r}}],[{key:"getDefaults",value:function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}}]),r}(vh),dh=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;return c(this,r),(t=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).lookAhead=0,t.latencyHint=0,t.isOffline=!1,t}return C(r,[{key:"createAnalyser",value:function(){return{}}},{key:"createOscillator",value:function(){return{}}},{key:"createBufferSource",value:function(){return{}}},{key:"createBiquadFilter",value:function(){return{}}},{key:"createBuffer",value:function(t,e,n){return{}}},{key:"createChannelMerger",value:function(t){return{}}},{key:"createChannelSplitter",value:function(t){return{}}},{key:"createConstantSource",value:function(){return{}}},{key:"createConvolver",value:function(){return{}}},{key:"createDelay",value:function(t){return{}}},{key:"createDynamicsCompressor",value:function(){return{}}},{key:"createGain",value:function(){return{}}},{key:"createIIRFilter",value:function(t,e){return{}}},{key:"createPanner",value:function(){return{}}},{key:"createPeriodicWave",value:function(t,e,n){return{}}},{key:"createStereoPanner",value:function(){return{}}},{key:"createWaveShaper",value:function(){return{}}},{key:"createMediaStreamSource",value:function(t){return{}}},{key:"createMediaElementSource",value:function(t){return{}}},{key:"createMediaStreamDestination",value:function(){return{}}},{key:"decodeAudioData",value:function(t){return Promise.resolve({})}},{key:"createAudioWorkletNode",value:function(t,e){return{}}},{key:"rawContext",get:function(){return{}}},{key:"addAudioWorkletModule",value:function(t,n){return zc(this,void 0,void 0,e(ra).mark((function t(){return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}}),t)})))}},{key:"resume",value:function(){return Promise.resolve()}},{key:"setTimeout",value:function(t,e){return 0}},{key:"clearTimeout",value:function(t){return this}},{key:"setInterval",value:function(t,e){return 0}},{key:"clearInterval",value:function(t){return this}},{key:"getConstant",value:function(t){return{}}},{key:"currentTime",get:function(){return 0}},{key:"state",get:function(){return{}}},{key:"sampleRate",get:function(){return 0}},{key:"listener",get:function(){return{}}},{key:"transport",get:function(){return{}}},{key:"draw",get:function(){return{}},set:function(t){}},{key:"destination",get:function(){return{}},set:function(t){}},{key:"now",value:function(){return 0}},{key:"immediate",value:function(){return 0}}]),r}(vh);function mh(t,e){Dc(e)?e.forEach((function(e){return mh(t,e)})):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function _h(t,e){Dc(e)?e.forEach((function(e){return _h(t,e)})):Object.defineProperty(t,e,{writable:!0})}var gh=function(){},yh=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this)).name="ToneAudioBuffer",t.onload=gh;var e=Zc(r.getDefaults(),arguments,["url","onload","onerror"]);return t.reverse=e.reverse,t.onload=e.onload,e.url&&Kc(e.url)||e.url instanceof r?t.set(e.url):Rc(e.url)&&t.load(e.url).catch(e.onerror),t}return C(r,[{key:"sampleRate",get:function(){return this._buffer?this._buffer.sampleRate:xh().sampleRate}},{key:"set",value:function(t){if(t instanceof r){var e=this;t.loaded?this._buffer=t.get():t.onload=function(){e.set(t),e.onload(e)}}else this._buffer=t;return this._reversed&&this._reverse(),this}},{key:"get",value:function(){return this._buffer}},{key:"load",value:function(t){return zc(this,void 0,void 0,e(ra).mark((function n(){var i,a,o;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,a=r.load(t).then((function(t){i.set(t),i.onload(i)})),r.downloads.push(a),e.prev=3,e.next=6,a;case 6:return e.prev=6,o=r.downloads.indexOf(a),r.downloads.splice(o,1),e.finish(6);case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),n,this,[[3,,6,10]])})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this._buffer=void 0,this}},{key:"fromArray",value:function(t){for(var e=Dc(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=xh(),a=i.createBuffer(n,r,i.sampleRate),o=e||1!==n?t:[t],s=0;s<n;s++)a.copyToChannel(o[s],s);return this._buffer=a,this}},{key:"toMono",value:function(t){if(Sc(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,r=0;r<n;r++)for(var i=this.toArray(r),a=0;a<i.length;a++)e[a]+=i[a];e=e.map((function(t){return t/n})),this.fromArray(e)}return this}},{key:"toArray",value:function(t){if(Sc(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e}},{key:"getChannelData",value:function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);wc(n<i,"The start time must be less than the end time");for(var a=i-n,o=xh().createBuffer(this.numberOfChannels,a,this.sampleRate),s=0;s<this.numberOfChannels;s++)o.copyToChannel(this.getChannelData(s).subarray(n,i),s);return new r(o)}},{key:"_reverse",value:function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}},{key:"loaded",get:function(){return this.length>0}},{key:"duration",get:function(){return this._buffer?this._buffer.duration:0}},{key:"length",get:function(){return this._buffer?this._buffer.length:0}},{key:"numberOfChannels",get:function(){return this._buffer?this._buffer.numberOfChannels:0}},{key:"reverse",get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}],[{key:"getDefaults",value:function(){return{onerror:gh,onload:gh,reverse:!1}}},{key:"fromArray",value:function(t){return(new r).fromArray(t)}},{key:"fromUrl",value:function(t){return zc(this,void 0,void 0,e(ra).mark((function n(){var i;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new r,e.next=3,i.load(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),n)})))}},{key:"load",value:function(t){return zc(this,void 0,void 0,e(ra).mark((function n(){var i,a,o,s,u,l,c,h,p,v,f,d,m;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.match(/\[([^\]\[]+\|.+)\]$/))){e.next=30;break}a=i[1].split("|"),o=a[0],s=!0,u=!1,l=void 0,e.prev=5,c=a[Symbol.iterator]();case 7:if(s=(h=c.next()).done){e.next=15;break}if(p=h.value,!r.supportsType(p)){e.next=12;break}return o=p,e.abrupt("break",15);case 12:s=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),u=!0,l=e.t0;case 21:e.prev=21,e.prev=22,s||null==c.return||c.return();case 24:if(e.prev=24,!u){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:t=t.replace(i[0],o);case 30:return v=""===r.baseUrl||r.baseUrl.endsWith("/")?r.baseUrl:r.baseUrl+"/",e.next=33,fetch(v+t);case 33:if((f=e.sent).ok){e.next=36;break}throw new Error("could not load url: ".concat(t));case 36:return e.next=38,f.arrayBuffer();case 38:return d=e.sent,e.next=41,xh().decodeAudioData(d);case 41:return m=e.sent,e.abrupt("return",m);case 43:case"end":return e.stop()}}),n,null,[[5,17,21,29],[22,,24,28]])})))}},{key:"supportsType",value:function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}},{key:"loaded",value:function(){return zc(this,void 0,void 0,e(ra).mark((function t(){return e(ra).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:if(!r.downloads.length){t.next=7;break}return t.next=5,r.downloads[0];case 5:t.next=2;break;case 7:case"end":return t.stop()}}),t)})))}}]),r}(Jc);yh.baseUrl="",yh.downloads=[];var bh=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;return c(this,r),(t=n.call(this,{clockSource:"offline",context:Gc(arguments[0])?arguments[0]:Nc(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Gc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})).name="OfflineContext",t._currentTime=0,t.isOffline=!0,t._duration=Gc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],t}return C(r,[{key:"now",value:function(){return this._currentTime}},{key:"currentTime",get:function(){return this._currentTime}},{key:"_renderClock",value:function(t){return zc(this,void 0,void 0,e(ra).mark((function n(){var r,i;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(this._duration-this._currentTime>=0)){e.next=11;break}if(this.emit("tick"),this._currentTime+=128/this.sampleRate,r++,i=Math.floor(this.sampleRate/128),!t||r%i!=0){e.next=9;break}return e.next=9,new Promise((function(t){return setTimeout(t,1)}));case 9:e.next=1;break;case 11:case"end":return e.stop()}}),n,this)})))}},{key:"render",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return zc(this,void 0,void 0,e(ra).mark((function n(){var r;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workletsAreReady();case 2:return e.next=4,this._renderClock(t);case 4:return e.next=6,this._context.startRendering();case 6:return r=e.sent,e.abrupt("return",new yh(r));case 8:case"end":return e.stop()}}),n,this)})))}},{key:"close",value:function(){return Promise.resolve()}}]),r}(fh),wh=new dh,kh=wh;function xh(){return kh===wh&&Bc&&Ch(new fh),kh}function Ch(t){kh=Hc(t)?new fh(t):Gc(t)?new bh(t):t}if(Fc&&!Fc.TONE_SILENCE_LOGGING){var Eh="v";0;var Mh=" * Tone.js ".concat(Eh).concat(Vi," * ");console.log("%c".concat(Mh),"background: #000; color: #fff")}var Th=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this)).name="ToneAudioBuffers",t._buffers=new Map,t._loadingCount=0;var r=Zc(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return t.baseUrl=r.baseUrl,Object.keys(r.urls).forEach((function(e){t._loadingCount++;var n=r.urls[e];t.add(e,n,t._bufferLoaded.bind(s(t),r.onload),r.onerror)})),t}return C(n,[{key:"has",value:function(t){return this._buffers.has(t.toString())}},{key:"get",value:function(t){return wc(this.has(t),"ToneAudioBuffers has no buffer named: ".concat(t)),this._buffers.get(t.toString())}},{key:"_bufferLoaded",value:function(t){this._loadingCount--,0===this._loadingCount&&t&&t()}},{key:"loaded",get:function(){return Array.from(this._buffers).every((function(t){var e=F(t,2);e[0];return e[1].loaded}))}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gh,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gh;return Rc(e)?this._buffers.set(t.toString(),new yh(this.baseUrl+e,n,r)):this._buffers.set(t.toString(),new yh(e,n,r)),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._buffers.forEach((function(t){return t.dispose()})),this._buffers.clear(),this}}],[{key:"getDefaults",value:function(){return{baseUrl:"",onerror:gh,onload:gh,urls:{}}}}]),n}(Jc);function Ph(t){return Math.pow(10,t/20)}function Ah(t){return Math.log(t)/Math.LN10*20}function Sh(t){return Math.pow(2,t/12)}var Vh=440;function Oh(t){return Math.round(Dh(t))}function Dh(t){return 69+12*Math.log2(t/Vh)}function Rh(t){return Vh*Math.pow(2,(t-69)/12)}var Lh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="TimeClass",t}return C(n,[{key:"_getExpressions",value:function(){var t=this;return Object.assign(V(M(n.prototype),"_getExpressions",this).call(this),{now:{method:function(e){return t._now()+new t.constructor(t.context,e).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(e){var r=new n(t.context,e).valueOf();return t._secondsToUnits(t.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})}},{key:"quantize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),i=Math.round(r/n),a=i*n,o=a-r;return r+o*e}},{key:"toNotation",value:function(){for(var t=this,e=this.toSeconds(),r=["1m"],i=1;i<9;i++){var a=Math.pow(2,i);r.push(a+"n."),r.push(a+"n"),r.push(a+"t")}r.push("0");var o=r[0],s=new n(this.context,r[0]).toSeconds();return r.forEach((function(r){var i=new n(t.context,r).toSeconds();Math.abs(i-e)<Math.abs(s-e)&&(o=r,s=i)})),o}},{key:"toBarsBeatsSixteenths",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),r=e%1*4;e=Math.floor(e)%this._getTimeSignature();var i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,e,r].join(":")}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}},{key:"toSeconds",value:function(){return this.valueOf()}},{key:"toMidi",value:function(){return Oh(this.toFrequency())}},{key:"_now",value:function(){return this.context.now()}}]),n}(function(t){"use strict";O(n,t);var e=P(n);function n(t,r,i){var a;return c(this,n),(a=e.call(this)).defaultUnits="s",a._val=r,a._units=i,a.context=t,a._expressions=a._getExpressions(),a}return C(n,[{key:"_getExpressions",value:function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var r=parseInt(e,10),i="."===n?1.5:1;return 1===r?t._beatsToUnits(t._getTimeSignature())*i:t._beatsToUnits(4/r)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,r){var i=0;return e&&"0"!==e&&(i+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(i+=t._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(i+=t._beatsToUnits(parseFloat(r)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}},{key:"valueOf",value:function(){if(this._val instanceof n&&this.fromType(this._val),Tc(this._val))return this._noArg();if(Rc(this._val)&&Tc(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Vc(this._val)){var e=0;for(var r in this._val)if(Pc(this._val[r])){var i=this._val[r];e+=new this.constructor(this.context,r).valueOf()*i}return e}if(Pc(this._units)){var a=this._expressions[this._units],o=this._val.toString().trim().match(a.regexp);return o?a.method.apply(this,o.slice(1)):a.method.call(this,this._val)}return Rc(this._val)?parseFloat(this._val):this._val}},{key:"_frequencyToUnits",value:function(t){return 1/t}},{key:"_beatsToUnits",value:function(t){return 60/this._getBpm()*t}},{key:"_secondsToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return t*this._beatsToUnits(1)/this._getPPQ()}},{key:"_noArg",value:function(){return this._now()}},{key:"_getBpm",value:function(){return this.context.transport.bpm.value}},{key:"_getTimeSignature",value:function(){return this.context.transport.timeSignature}},{key:"_getPPQ",value:function(){return this.context.transport.PPQ}},{key:"fromType",value:function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}},{key:"toFrequency",value:function(){return 1/this.toSeconds()}},{key:"toSamples",value:function(){return this.toSeconds()*this.context.sampleRate}},{key:"toMilliseconds",value:function(){return 1e3*this.toSeconds()}}]),n}(Jc));var Ih=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="Frequency",t.defaultUnits="hz",t}return C(n,[{key:"_getExpressions",value:function(){return Object.assign({},V(M(n.prototype),"_getExpressions",this).call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:n.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var r=Nh[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?r:n.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}},{key:"transpose",value:function(t){return new n(this.context,this.valueOf()*Sh(t))}},{key:"harmonize",value:function(t){var e=this;return t.map((function(t){return e.transpose(t)}))}},{key:"toMidi",value:function(){return Oh(this.valueOf())}},{key:"toNote",value:function(){var t=this.toFrequency(),e=Math.log2(t/n.A4),r=Math.round(12*e)+57,i=Math.floor(r/12);return i<0&&(r+=-12*i),Fh[r%12]+i.toString()}},{key:"toSeconds",value:function(){return 1/V(M(n.prototype),"toSeconds",this).call(this)}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}},{key:"_noArg",value:function(){return 0}},{key:"_frequencyToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}},{key:"_beatsToUnits",value:function(t){return 1/V(M(n.prototype),"_beatsToUnits",this).call(this,t)}},{key:"_secondsToUnits",value:function(t){return 1/t}}],[{key:"A4",get:function(){return Vh},set:function(t){!function(t){Vh=t}(t)}},{key:"mtof",value:function(t){return Rh(t)}},{key:"ftom",value:function(t){return Oh(t)}}]),n}(Lh),Nh={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Fh=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Bh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="TransportTime",t}return C(n,[{key:"_now",value:function(){return this.context.transport.seconds}}]),n}(Lh);var jh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),t=e.call(this);var r=Zc(n.getDefaults(),arguments,["context"]);return t.defaultContext?t.context=t.defaultContext:t.context=r.context,t}return C(n,[{key:"now",value:function(){return this.context.currentTime+this.context.lookAhead}},{key:"immediate",value:function(){return this.context.currentTime}},{key:"sampleTime",get:function(){return 1/this.context.sampleRate}},{key:"blockTime",get:function(){return 128/this.context.sampleRate}},{key:"toSeconds",value:function(t){return new Lh(this.context,t).toSeconds()}},{key:"toFrequency",value:function(t){return new Ih(this.context,t).toFrequency()}},{key:"toTicks",value:function(t){return new Bh(this.context,t).toTicks()}},{key:"_getPartialProperties",value:function(t){var e=this.get();return Object.keys(e).forEach((function(n){Tc(t[n])&&delete e[n]})),e}},{key:"get",value:function(){var t=this,e=this.constructor.getDefaults();return Object.keys(e).forEach((function(r){if(Reflect.has(t,r)){var i=t[r];Pc(i)&&Pc(i.value)&&Pc(i.setValueAtTime)?e[r]=i.value:i instanceof n?e[r]=i._getPartialProperties(e[r]):Dc(i)||Sc(i)||Rc(i)||Oc(i)?e[r]=i:delete e[r]}})),e}},{key:"set",value:function(t){var e=this;return Object.keys(t).forEach((function(r){Reflect.has(e,r)&&Pc(e[r])&&(e[r]&&Pc(e[r].value)&&Pc(e[r].setValueAtTime)?e[r].value!==t[r]&&(e[r].value=t[r]):e[r]instanceof n?e[r].set(t[r]):e[r]=t[r])})),this}}],[{key:"getDefaults",value:function(){return{context:xh()}}}]),n}(Jc),zh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["param","units","convert"]))).name="Param",t.overridden=!1,t._minOutput=1e-7;var r=Zc(n.getDefaults(),arguments,["param","units","convert"]);for(wc(Pc(r.param)&&(qc(r.param)||r.param instanceof n),"param must be an AudioParam");!qc(r.param);)r.param=r.param._param;return t._swappable=!!Pc(r.swappable)&&r.swappable,t._swappable?(t.input=t.context.createGain(),t._param=r.param,t.input.connect(t._param)):t._param=t.input=r.param,t._events=new oh(1e3),t._initialValue=t._param.defaultValue,t.units=r.units,t.convert=r.convert,t._minValue=r.minValue,t._maxValue=r.maxValue,Pc(r.value)&&r.value!==t._toType(t._initialValue)&&t.setValueAtTime(r.value,0),t}return C(n,[{key:"value",get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}},{key:"minValue",get:function(){return Pc(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}},{key:"maxValue",get:function(){return Pc(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}},{key:"_is",value:function(t,e){return this.units===e}},{key:"_assertRange",value:function(t){return Pc(this.maxValue)&&Pc(this.minValue)&&kc(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}},{key:"_fromType",value:function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Ph(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}},{key:"_toType",value:function(t){return this.convert&&"decibels"===this.units?Ah(t):t}},{key:"setValueAtTime",value:function(t,e){var n=this.toSeconds(e),r=this._fromType(t);return wc(isFinite(r)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(r),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}},{key:"getValueAtTime",value:function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),r=this._events.get(e),i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var a=r.value;if("setTargetAtTime"===r.type){var o=this._events.getBefore(r.time);a=null===o?this._initialValue:o.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,a,n.time,n.value,e):this._exponentialInterpolate(r.time,a,n.time,n.value,e)}else i=r.value;else{var s,u=this._events.getBefore(r.time);s=null===u?this._initialValue:u.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,s,r.value,r.constant,e))}return this._toType(i)}},{key:"setRampPoint",value:function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}},{key:"linearRampToValueAtTime",value:function(t,e){var n=this._fromType(t),r=this.toSeconds(e);return wc(isFinite(n)&&isFinite(r),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){var n=this._fromType(t);n=ih(n,0)?this._minOutput:n,this._assertRange(n);var r=this.toSeconds(e);return wc(isFinite(n)&&isFinite(r),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this}},{key:"exponentialRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"linearRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"targetRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}},{key:"setTargetAtTime",value:function(t,e,n){var r=this._fromType(t);wc(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var i=this.toSeconds(e);return this._assertRange(r),wc(isFinite(r)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(r,i,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),e=this.toSeconds(e);var i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);for(var a=n/(t.length-1),o=1;o<t.length;o++){var s=this._fromType(t[o])*r;this.linearRampToValueAtTime(this._toType(s),e+o*a)}return this}},{key:"cancelScheduledValues",value:function(t){var e=this.toSeconds(t);return wc(isFinite(e),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(t))),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}},{key:"cancelAndHoldAtTime",value:function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));wc(isFinite(e),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(t))),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);var r=this._events.get(e),i=this._events.getAfter(e);return r&&ih(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}},{key:"rampTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}},{key:"apply",value:function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var r=this._events.getAfter(n.time),i=r?r.time:e+2,a=(i-e)/10,o=e;o<i;o+=a)t.linearRampToValueAtTime(this.getValueAtTime(o),o);return this._events.forEachAfter(this.context.currentTime,(function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}},{key:"setParam",value:function(t){wc(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._events.dispose(),this}},{key:"defaultValue",get:function(){return this._toType(this._param.defaultValue)}},{key:"_exponentialApproach",value:function(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)}},{key:"_linearInterpolate",value:function(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)}},{key:"_exponentialInterpolate",value:function(t,e,n,r,i){return e*Math.pow(r/e,(i-t)/(n-t))}}],[{key:"getDefaults",value:function(){return Object.assign(jh.getDefaults(),{convert:!0,units:"number"})}}]),n}(jh),Uh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="ToneAudioNode",t._internalChannels=[],t}return C(n,[{key:"numberOfInputs",get:function(){return Pc(this.input)?qc(this.input)||this.input instanceof zh?1:this.input.numberOfInputs:0}},{key:"numberOfOutputs",get:function(){return Pc(this.output)?this.output.numberOfOutputs:0}},{key:"_isAudioNode",value:function(t){return Pc(t)&&(t instanceof n||Wc(t))}},{key:"_getInternalNodes",value:function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}},{key:"_setChannelProperties",value:function(t){this._getInternalNodes().forEach((function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}},{key:"_getChannelProperties",value:function(){var t=this._getInternalNodes();wc(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}},{key:"channelCount",get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}},{key:"channelCountMode",get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}},{key:"channelInterpretation",get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}},{key:"connect",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t(this,e,n,r),this}},{key:"toDestination",value:function(){return this.connect(this.context.destination),this}},{key:"toMaster",value:function(){return Mc("toMaster() has been renamed toDestination()"),this.toDestination()}},{key:"disconnect",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t(this,e,n,r),this}},{key:"chain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return qh.apply(void 0,[this].concat(B(e))),this}},{key:"fan",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this;return e.forEach((function(t){return r.connect(t)})),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),Pc(this.input)&&(this.input instanceof n?this.input.dispose():Wc(this.input)&&this.input.disconnect()),Pc(this.output)&&(this.output instanceof n?this.output.dispose():Wc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}]),n}(jh);function qh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();e.reduce((function(t,e){return t instanceof Uh?t.connect(e):Wc(t)&&Wh(t,e),e}),r)}function Wh(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(wc(Pc(t),"Cannot connect from undefined node"),wc(Pc(e),"Cannot connect to undefined node"),(e instanceof Uh||Wc(e))&&wc(e.numberOfInputs>0,"Cannot connect to node with no inputs"),wc(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Uh||e instanceof zh;)Pc(e.input)&&(e=e.input);for(;t instanceof Uh;)Pc(t.output)&&(t=t.output);qc(e)?t.connect(e,n):t.connect(e,n,r)}var Gh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["gain","units"]))).name="Gain",t._gainNode=t.context.createGain(),t.input=t._gainNode,t.output=t._gainNode;var r=Zc(n.getDefaults(),arguments,["gain","units"]);return t.gain=new zh({context:t.context,convert:r.convert,param:t._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),mh(s(t),"gain"),t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{convert:!0,gain:1,units:"gain"})}}]),n}(Uh),Hh=function(t){"use strict";O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).onended=gh,r._startTime=-1,r._stopTime=-1,r._timeout=-1,r.output=new Gh({context:r.context,gain:0}),r._gainNode=r.output,r.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},r._fadeIn=t.fadeIn,r._fadeOut=t.fadeOut,r._curve=t.curve,r.onended=t.onended,r}return C(n,[{key:"_startGain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;wc(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}},{key:"stop",value:function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}},{key:"_stopGain",value:function(t){var e=this;wc(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()}),this._stopTime-this.context.currentTime),this}},{key:"_onended",value:function(){if(this.onended!==gh&&(this.onended(this),this.onended=gh,!this.context.isOffline)){var t=this,e=function(){return t.dispose()};void 0!==window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,1e3)}}},{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"cancelStop",value:function(){return this.log("cancelStop"),wc(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:gh})}}]),n}(Uh),Kh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["url","onload"]))).name="ToneBufferSource",t._source=t.context.createBufferSource(),t._internalChannels=[t._source],t._sourceStarted=!1,t._sourceStopped=!1;var r=Zc(n.getDefaults(),arguments,["url","onload"]);return Wh(t._source,t._gainNode),t._source.onended=function(){return t._stopSource()},t.playbackRate=new zh({context:t.context,param:t._source.playbackRate,units:"positive",value:r.playbackRate}),t.loop=r.loop,t.loopStart=r.loopStart,t.loopEnd=r.loopEnd,t._buffer=new yh(r.url,r.onload,r.onerror),t._internalChannels.push(t._source),t}return C(n,[{key:"fadeIn",get:function(){return this._fadeIn},set:function(t){this._fadeIn=t}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(t){this._fadeOut=t}},{key:"curve",get:function(){return this._curve},set:function(t){this._curve=t}},{key:"start",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;wc(this.buffer.loaded,"buffer is either not set or not loaded");var i=this.toSeconds(t);this._startGain(i,r),e=this.loop?Qc(e,this.loopStart):Qc(e,0);var a=Math.max(this.toSeconds(e),0);if(this.loop){var o=this.toSeconds(this.loopEnd)||this.buffer.duration,s=this.toSeconds(this.loopStart),u=o-s;nh(a,o)&&(a=(a-s)%u+s),ih(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,rh(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),Pc(n)){var l=this.toSeconds(n);l=Math.max(l,0),this.stop(i+l)}return this}},{key:"_stopSource",value:function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}},{key:"loopStart",get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}},{key:"loopEnd",get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Hh.getDefaults(),{url:new yh,loop:!1,loopEnd:0,loopStart:0,onload:gh,onerror:gh,playbackRate:1})}}]),n}(Hh),Yh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="Draw",t.expiration=.25,t.anticipation=.008,t._events=new oh,t._boundDrawLoop=t._drawLoop.bind(s(t)),t._animationFrame=-1,t}return C(n,[{key:"schedule",value:function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}},{key:"cancel",value:function(t){return this._events.cancel(this.toSeconds(t)),this}},{key:"_drawLoop",value:function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}]),n}(jh);uh((function(t){t.draw=new Yh({context:t})})),ch((function(t){t.draw.dispose()}));var Xh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";return c(this,n),(t=e.call(this)).name="StateTimeline",t._initial=r,t.setStateAtTime(t._initial,0),t}return C(n,[{key:"getValueAtTime",value:function(t){var e=this.get(t);return null!==e?e.state:this._initial}},{key:"setStateAtTime",value:function(t,e,n){return kc(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}},{key:"getLastState",value:function(t,e){for(var n=this._search(e);n>=0;n--){var r=this._timeline[n];if(r.state===t)return r}}},{key:"getNextState",value:function(t,e){var n=this._search(e);if(-1!==n)for(var r=n;r<this._timeline.length;r++){var i=this._timeline[r];if(i.state===t)return i}}}]),n}(oh),Zh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["offset"]))).name="ToneConstantSource",t._source=t.context.createConstantSource();var r=Zc(n.getDefaults(),arguments,["offset"]);return Wh(t._source,t._gainNode),t.offset=new zh({context:t.context,convert:r.convert,param:t._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue}),t}return C(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}},{key:"_stopSource",value:function(t){this._source.stop(t)}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Hh.getDefaults(),{convert:!0,offset:1,units:"number"})}}]),n}(Hh),Qh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["value","units"]))).name="Signal",t.override=!0;var r=Zc(n.getDefaults(),arguments,["value","units"]);return t.output=t._constantSource=new Zh({context:t.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),t._constantSource.start(0),t.input=t._param=t._constantSource.offset,t}return C(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $h(this,t,e,n),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._param.dispose(),this._constantSource.dispose(),this}},{key:"setValueAtTime",value:function(t,e){return this._param.setValueAtTime(t,e),this}},{key:"getValueAtTime",value:function(t){return this._param.getValueAtTime(t)}},{key:"setRampPoint",value:function(t){return this._param.setRampPoint(t),this}},{key:"linearRampToValueAtTime",value:function(t,e){return this._param.linearRampToValueAtTime(t,e),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}},{key:"exponentialRampTo",value:function(t,e,n){return this._param.exponentialRampTo(t,e,n),this}},{key:"linearRampTo",value:function(t,e,n){return this._param.linearRampTo(t,e,n),this}},{key:"targetRampTo",value:function(t,e,n){return this._param.targetRampTo(t,e,n),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}},{key:"setTargetAtTime",value:function(t,e,n){return this._param.setTargetAtTime(t,e,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n,r){return this._param.setValueCurveAtTime(t,e,n,r),this}},{key:"cancelScheduledValues",value:function(t){return this._param.cancelScheduledValues(t),this}},{key:"cancelAndHoldAtTime",value:function(t){return this._param.cancelAndHoldAtTime(t),this}},{key:"rampTo",value:function(t,e,n){return this._param.rampTo(t,e,n),this}},{key:"value",get:function(){return this._param.value},set:function(t){this._param.value=t}},{key:"convert",get:function(){return this._param.convert},set:function(t){this._param.convert=t}},{key:"units",get:function(){return this._param.units}},{key:"overridden",get:function(){return this._param.overridden},set:function(t){this._param.overridden=t}},{key:"maxValue",get:function(){return this._param.maxValue}},{key:"minValue",get:function(){return this._param.minValue}},{key:"apply",value:function(t){return this._param.apply(t),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{convert:!0,units:"number",value:0})}}]),n}(Uh);function $h(t,e,n,r){(e instanceof zh||qc(e)||e instanceof Qh&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Qh&&(e.overridden=!0)),Wh(t,e,n,r)}var Jh=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["value"]))).name="TickParam",t._events=new oh(1/0),t._multiplier=1;var r=Zc(n.getDefaults(),arguments,["value"]);return t._multiplier=r.multiplier,t._events.cancel(0),t._events.add({ticks:0,time:0,type:"setValueAtTime",value:t._fromType(r.value)}),t.setValueAtTime(r.value,0),t}return C(n,[{key:"setTargetAtTime",value:function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var r=this._fromType(t),i=this._events.get(e),a=Math.round(Math.max(1/n,1)),o=0;o<=a;o++){var s=n*o+e,u=this._exponentialApproach(i.time,i.value,r,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"setValueAtTime",value:function(t,e){var r=this.toSeconds(e);V(M(n.prototype),"setValueAtTime",this).call(this,t,e);var i=this._events.get(r),a=this._events.previousEvent(i),o=this._getTicksUntilEvent(a,r);return i.ticks=Math.max(o,0),this}},{key:"linearRampToValueAtTime",value:function(t,e){var r=this.toSeconds(e);V(M(n.prototype),"linearRampToValueAtTime",this).call(this,t,e);var i=this._events.get(r),a=this._events.previousEvent(i),o=this._getTicksUntilEvent(a,r);return i.ticks=Math.max(o,0),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max(10*(e-r.time),1)),a=(e-r.time)/i,o=0;o<=i;o++){var s=a*o+r.time,u=this._exponentialInterpolate(r.time,r.value,e,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"_getTicksUntilEvent",value:function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Tc(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var r=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),a=this._events.get(e);return a&&a.time===e&&"setValueAtTime"===a.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(r+i)+t.ticks}},{key:"getTicksAtTime",value:function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}},{key:"getDurationOfTicks",value:function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-n}},{key:"getTimeOfTick",value:function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var r=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),a=Math.sqrt(Math.pow(r,2)-2*i*(e.ticks-t)),o=(-r+a)/i;return(o>0?o:(-r-a)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}},{key:"ticksToTime",value:function(t,e){return this.getDurationOfTicks(t,e)}},{key:"timeToTicks",value:function(t,e){var n=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}},{key:"_fromType",value:function(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):V(M(n.prototype),"_fromType",this).call(this,t)}},{key:"_toType",value:function(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:V(M(n.prototype),"_toType",this).call(this,t)}},{key:"multiplier",get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}],[{key:"getDefaults",value:function(){return Object.assign(zh.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(zh),tp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["value"]))).name="TickSignal";var r=Zc(n.getDefaults(),arguments,["value"]);return t.input=t._param=new Jh({context:t.context,convert:r.convert,multiplier:r.multiplier,param:t._constantSource.offset,units:r.units,value:r.value}),t}return C(n,[{key:"ticksToTime",value:function(t,e){return this._param.ticksToTime(t,e)}},{key:"timeToTicks",value:function(t,e){return this._param.timeToTicks(t,e)}},{key:"getTimeOfTick",value:function(t){return this._param.getTimeOfTick(t)}},{key:"getDurationOfTicks",value:function(t,e){return this._param.getDurationOfTicks(t,e)}},{key:"getTicksAtTime",value:function(t){return this._param.getTicksAtTime(t)}},{key:"multiplier",get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._param.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Qh.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(Qh),ep=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["frequency"]))).name="TickSource",t._state=new Xh,t._tickOffset=new oh;var r=Zc(n.getDefaults(),arguments,["frequency"]);return t.frequency=new tp({context:t.context,units:r.units,value:r.frequency}),mh(s(t),"frequency"),t._state.setStateAtTime("stopped",0),t.setTicksAtTime(0,0),t}return C(n,[{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Pc(e)&&this.setTicksAtTime(e,n)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}},{key:"cancel",value:function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}},{key:"getTicksAtTime",value:function(t){var e=this,n=this.toSeconds(t),r=this._state.getLastState("stopped",n),i={state:"paused",time:n};this._state.add(i);var a=r,o=0;return this._state.forEachBetween(r.time,n+this.sampleTime,(function(t){var n=a.time,r=e._tickOffset.get(t.time);r&&r.time>=a.time&&(o=r.ticks,n=r.time),"started"===a.state&&"started"!==t.state&&(o+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),a=t})),this._state.remove(i),o}},{key:"ticks",get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}},{key:"seconds",get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}},{key:"getSecondsAtTime",value:function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);var i=n,a=0;return this._state.forEachBetween(n.time,t+this.sampleTime,(function(t){var n=i.time,r=e._tickOffset.get(t.time);r&&r.time>=i.time&&(a=r.seconds,n=r.time),"started"===i.state&&"started"!==t.state&&(a+=t.time-n),i=t})),this._state.remove(r),a}},{key:"setTicksAtTime",value:function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}},{key:"getStateAtTime",value:function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now(),n=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(n.time,r.time),a=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(a)}},{key:"forEachTickBetween",value:function(t,e,n){var r=this,i=this._state.get(t);this._state.forEachBetween(t,e,(function(e){i&&"started"===i.state&&"started"!==e.state&&r.forEachTickBetween(Math.max(i.time,t),e.time-r.sampleTime,n),i=e}));var a=null;if(i&&"started"===i.state){var o=Math.max(i.time,t),s=this.frequency.getTicksAtTime(o),u=s-this.frequency.getTicksAtTime(i.time),l=Math.ceil(u)-u;l=ih(l,1)?0:l;for(var c=this.frequency.getTimeOfTick(s+l);c<e;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(t){a=t;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(a)throw a;return this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign({frequency:1,units:"hertz"},jh.getDefaults())}}]),n}(jh),np=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["callback","frequency"]))).name="Clock",t.callback=gh,t._lastUpdate=0,t._state=new Xh("stopped"),t._boundLoop=t._loop.bind(s(t));var r=Zc(n.getDefaults(),arguments,["callback","frequency"]);return t.callback=r.callback,t._tickSource=new ep({context:t.context,frequency:r.frequency,units:r.units}),t._lastUpdate=0,t.frequency=t._tickSource.frequency,mh(s(t),"frequency"),t._state.setStateAtTime("stopped",0),t.context.on("tick",t._boundLoop),t}return C(n,[{key:"state",get:function(){return this._state.getValueAtTime(this.now())}},{key:"start",value:function(t,e){xc(this.context);var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}},{key:"ticks",get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}},{key:"seconds",get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}},{key:"getSecondsAtTime",value:function(t){return this._tickSource.getSecondsAtTime(t)}},{key:"setTicksAtTime",value:function(t,e){return this._tickSource.setTicksAtTime(t,e),this}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(t,e)}},{key:"getTicksAtTime",value:function(t){return this._tickSource.getTicksAtTime(t)}},{key:"nextTickTime",value:function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)}},{key:"_loop",value:function(){var t=this._lastUpdate,e=this.now();if(this._lastUpdate=e,this.log("loop",t,e),t!==e){var n=this;this._state.forEachBetween(t,e,(function(t){switch(t.state){case"started":var e=n._tickSource.getTicksAtTime(t.time);n.emit("start",t.time,e);break;case"stopped":0!==t.time&&n.emit("stop",t.time);break;case"paused":n.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,(function(t,e){n.callback(t,e)}))}}},{key:"getStateAtTime",value:function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jh.getDefaults(),{callback:gh,frequency:1,units:"hertz"})}}]),n}(jh);ph.mixin(np);var rp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="Ticks",t.defaultUnits="i",t}return C(n,[{key:"_now",value:function(){return this.context.transport.ticks}},{key:"_beatsToUnits",value:function(t){return this._getPPQ()*t}},{key:"_secondsToUnits",value:function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}},{key:"_ticksToUnits",value:function(t){return t}},{key:"toTicks",value:function(){return this.valueOf()}},{key:"toSeconds",value:function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}]),n}(Bh);var ip=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="IntervalTimeline",t._root=null,t._length=0,t}return C(n,[{key:"add",value:function(t){wc(Pc(t.time),"Events must have a time property"),wc(Pc(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new ap(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}},{key:"remove",value:function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.event===t){this._removeNode(s),this._length--;break}}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return this}},{key:"length",get:function(){return this._length}},{key:"cancel",value:function(t){var e=this;return this.forEachFrom(t,(function(t){return e.remove(t)})),this}},{key:"_setRoot",value:function(t){this._root=t,null!==this._root&&(this._root.parent=null)}},{key:"_replaceNodeInParent",value:function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}},{key:"_removeNode",value:function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}},{key:"_rotateLeft",value:function(t){var e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}},{key:"_rotateRight",value:function(t){var e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}},{key:"_rebalance",value:function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}},{key:"get",value:function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],r=1;r<e.length;r++)e[r].low>n.low&&(n=e[r]);return n.event}}return null}},{key:"forEach",value:function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){return e.push(t)})),e.forEach((function(e){e.event&&t(e.event)}))}return this}},{key:"forEachAtTime",value:function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"forEachFrom",value:function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),null!==this._root&&this._root.traverse((function(t){return t.dispose()})),this._root=null,this}}]),n}(Jc),ap=function(){"use strict";function t(e,n,r){c(this,t),this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}return C(t,[{key:"insert",value:function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}},{key:"search",value:function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}},{key:"searchAfter",value:function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}},{key:"traverse",value:function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}},{key:"updateHeight",value:function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}},{key:"updateMax",value:function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}},{key:"getBalance",value:function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}},{key:"isLeftChild",value:function(){return null!==this.parent&&this.parent.left===this}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"dispose",value:function(){this.parent=null,this._left=null,this._right=null,this.event=null}}]),t}(),op=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["volume"]))).name="Volume";var r=Zc(n.getDefaults(),arguments,["volume"]);return t.input=t.output=new Gh({context:t.context,gain:r.volume,units:"decibels"}),t.volume=t.output.gain,mh(s(t),"volume"),t._unmutedVolume=r.volume,t.mute=r.mute,t}return C(n,[{key:"mute",get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.input.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{mute:!1,volume:0})}}]),n}(Uh),sp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments))).name="Destination",t.input=new op({context:t.context}),t.output=new Gh({context:t.context}),t.volume=t.input.volume;var r=Zc(n.getDefaults(),arguments);return qh(t.input,t.output,t.context.rawContext.destination),t.mute=r.mute,t._internalChannels=[t.input,t.context.rawContext.destination,t.output],t}return C(n,[{key:"mute",get:function(){return this.input.mute},set:function(t){this.input.mute=t}},{key:"chain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.input.disconnect(),e.unshift(this.input),e.push(this.output),qh.apply(void 0,B(e)),this}},{key:"maxChannelCount",get:function(){return this.context.rawContext.destination.maxChannelCount}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{mute:!1,volume:0})}}]),n}(Uh);uh((function(t){t.destination=new sp({context:t})})),ch((function(t){t.destination.dispose()}));var up=function(t){"use strict";O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this)).name="TimelineValue",r._timeline=new oh({memory:10}),r._initialValue=t,r}return C(n,[{key:"set",value:function(t,e){return this._timeline.add({value:t,time:e}),this}},{key:"get",value:function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue}}]),n}(Jc),lp=function(){"use strict";function t(e,n){c(this,t),this.id=t._eventId++;var r=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}return C(t,[{key:"invoke",value:function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}},{key:"dispose",value:function(){return this.callback=void 0,this}}],[{key:"getDefaults",value:function(){return{callback:gh,once:!1,time:0}}}]),t}();lp._eventId=0;var cp=function(t){"use strict";O(n,t);var e=P(n);function n(t,r){var i;c(this,n),(i=e.call(this,t,r))._currentId=-1,i._nextId=-1,i._nextTick=i.time,i._boundRestart=i._restart.bind(s(i));var a=Object.assign(n.getDefaults(),r);return i.duration=new rp(t.context,a.duration).valueOf(),i._interval=new rp(t.context,a.interval).valueOf(),i._nextTick=a.time,i.transport.on("start",i._boundRestart),i.transport.on("loopStart",i._boundRestart),i.context=i.transport.context,i._restart(),i}return C(n,[{key:"invoke",value:function(t){this._createEvents(t),V(M(n.prototype),"invoke",this).call(this,t)}},{key:"_createEvents",value:function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new rp(this.context,this._nextTick).toSeconds()))}},{key:"_restart",value:function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new rp(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new rp(this.context,this._nextTick).toSeconds())}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}],[{key:"getDefaults",value:function(){return Object.assign({},lp.getDefaults(),{duration:1/0,interval:1,once:!1})}}]),n}(lp),hp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments))).name="Transport",t._loop=new up(!1),t._loopStart=0,t._loopEnd=0,t._scheduledEvents={},t._timeline=new oh,t._repeatedEvents=new ip,t._syncedSignals=[],t._swingAmount=0;var r=Zc(n.getDefaults(),arguments);return t._ppq=r.ppq,t._clock=new np({callback:t._processTick.bind(s(t)),context:t.context,frequency:0,units:"bpm"}),t._bindClockEvents(),t.bpm=t._clock.frequency,t._clock.frequency.multiplier=r.ppq,t.bpm.setValueAtTime(r.bpm,0),mh(s(t),"bpm"),t._timeSignature=r.timeSignature,t._swingTicks=r.ppq/2,t}return C(n,[{key:"_processTick",value:function(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;t+=new rp(this.context,2*this._swingTicks/3).toSeconds()*r}this._timeline.forEachAtTime(e,(function(e){return e.invoke(t)}))}},{key:"schedule",value:function(t,e){var n=new lp(this,{callback:t,time:new Bh(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"scheduleRepeat",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=new cp(this,{callback:t,duration:new Lh(this.context,r).toTicks(),interval:new Lh(this.context,e).toTicks(),time:new Bh(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}},{key:"scheduleOnce",value:function(t,e){var n=new lp(this,{callback:t,once:!0,time:new Bh(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"clear",value:function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}},{key:"_addEvent",value:function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this,n=this.toTicks(t);return this._timeline.forEachFrom(n,(function(t){return e.clear(t.id)})),this._repeatedEvents.forEachFrom(n,(function(t){return e.clear(t.id)})),this}},{key:"_bindClockEvents",value:function(){var t=this;this._clock.on("start",(function(e,n){n=new rp(t.context,n).toSeconds(),t.emit("start",e,n)})),this._clock.on("stop",(function(e){t.emit("stop",e)})),this._clock.on("pause",(function(e){t.emit("pause",e)}))}},{key:"state",get:function(){return this._clock.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n;return Pc(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}},{key:"stop",value:function(t){return this._clock.stop(t),this}},{key:"pause",value:function(t){return this._clock.pause(t),this}},{key:"toggle",value:function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}},{key:"timeSignature",get:function(){return this._timeSignature},set:function(t){Dc(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}},{key:"loopStart",get:function(){return new Lh(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}},{key:"loopEnd",get:function(){return new Lh(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}},{key:"loop",get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"swing",get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}},{key:"swingSubdivision",get:function(){return new rp(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}},{key:"position",get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new rp(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}},{key:"seconds",get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}},{key:"progress",get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}},{key:"ticks",get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();if("started"===this.state){var n=this._clock.getTicksAtTime(e),r=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this._clock.setTicksAtTime(t,e)}}},{key:"getTicksAtTime",value:function(t){return Math.round(this._clock.getTicksAtTime(t))}},{key:"getSecondsAtTime",value:function(t){return this._clock.getSecondsAtTime(t)}},{key:"PPQ",get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t}},{key:"nextSubdivision",value:function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}},{key:"syncSignal",value:function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}var i=new Gh(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}},{key:"unsyncSignal",value:function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._clock.dispose(),_h(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(jh.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}}]),n}(jh);ph.mixin(hp),uh((function(t){t.transport=new hp({context:t})})),ch((function(t){t.transport.dispose()}));var pp=function(t){"use strict";O(n,t);var e=P(n);function n(t){var r;return c(this,n),(r=e.call(this,t)).input=void 0,r._state=new Xh("stopped"),r._synced=!1,r._scheduled=[],r._syncedStart=gh,r._syncedStop=gh,r._state.memory=100,r._state.increasing=!0,r._volume=r.output=new op({context:r.context,mute:t.mute,volume:t.volume}),r.volume=r._volume.volume,mh(s(r),"volume"),r.onstop=t.onstop,r}return C(n,[{key:"state",get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}},{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"_clampToCurrentTime",value:function(t){return this._synced?t:Math.max(t,this.context.currentTime)}},{key:"start",value:function(t,e,n){var r=Tc(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){var i=this,a=this._state.get(r);a&&(a.offset=this.toSeconds(Qc(e,0)),a.duration=n?this.toSeconds(n):void 0);var o=this.context.transport.schedule((function(t){i._start(t,e,n)}),r);this._scheduled.push(o),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else xc(this.context),this._start(r,e,n);else wc(eh(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,n);return this}},{key:"stop",value:function(t){var e=Tc(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Pc(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}},{key:"restart",value:function(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}},{key:"sync",value:function(){if(!this._synced){var t=this;this._synced=!0,this._syncedStart=function(e,n){if(n>0){var r=t._state.get(n);if(r&&"started"===r.state&&r.time!==n){var i,a=n-t.toSeconds(r.time);r.duration&&(i=t.toSeconds(r.duration)-a),t._start(e,t.toSeconds(r.offset)+a,i)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)}return this}},{key:"unsync",value:function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((function(e){return t.context.transport.clear(e)})),this._scheduled=[],this._state.cancel(0),this._stop(0),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.onstop=gh,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{mute:!1,onstop:gh,volume:0})}}]),n}(Uh);function vp(t,n){return zc(this,void 0,void 0,e(ra).mark((function r(){var i,a,o;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n/t.context.sampleRate,a=new bh(1,i,t.context.sampleRate),new t.constructor(Object.assign(t.get(),{frequency:2/i,detune:0,context:a})).toDestination().start(0),e.next=6,a.render();case 6:return o=e.sent,e.abrupt("return",o.getChannelData(0));case 8:case"end":return e.stop()}}),r)})))}var fp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["frequency","type"]))).name="ToneOscillatorNode",t._oscillator=t.context.createOscillator(),t._internalChannels=[t._oscillator];var r=Zc(n.getDefaults(),arguments,["frequency","type"]);return Wh(t._oscillator,t._gainNode),t.type=r.type,t.frequency=new zh({context:t.context,param:t._oscillator.frequency,units:"frequency",value:r.frequency}),t.detune=new zh({context:t.context,param:t._oscillator.detune,units:"cents",value:r.detune}),mh(s(t),["frequency","detune"]),t}return C(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}},{key:"_stopSource",value:function(t){this._oscillator.stop(t)}},{key:"setPeriodicWave",value:function(t){return this._oscillator.setPeriodicWave(t),this}},{key:"type",get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Hh.getDefaults(),{detune:0,frequency:440,type:"sine"})}}]),n}(Hh),dp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","type"]))).name="Oscillator",t._oscillator=null;var e=Zc(r.getDefaults(),arguments,["frequency","type"]);return t.frequency=new Qh({context:t.context,units:"frequency",value:e.frequency}),mh(s(t),"frequency"),t.detune=new Qh({context:t.context,units:"cents",value:e.detune}),mh(s(t),"detune"),t._partials=e.partials,t._partialCount=e.partialCount,t._type=e.type,e.partialCount&&"custom"!==e.type&&(t._type=t.baseType+e.partialCount.toString()),t.phase=e.phase,t}return C(r,[{key:"_start",value:function(t){var e=this,n=this.toSeconds(t),r=new fp({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}},{key:"_restart",value:function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}},{key:"syncFrequency",value:function(){return this.context.transport.syncSignal(this.frequency),this}},{key:"unsyncFrequency",value:function(){return this.context.transport.unsyncSignal(this.frequency),this}},{key:"_getCachedPeriodicWave",value:function(){if("custom"===this._type){var t=this;return r._periodicWaveCache.find((function(e){return e.phase===t._phase&&(n=e.partials,r=t._partials,n.length===r.length&&n.every((function(t,e){return r[e]===t})));var n,r}))}var e=this,n=r._periodicWaveCache.find((function(t){return t.type===e._type&&t.phase===e._phase}));return this._partialCount=n?n.partialCount:this._partialCount,n}},{key:"type",get:function(){return this._type},set:function(t){this._type=t;var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var n=this._getCachedPeriodicWave();if(Pc(n)){var i=n.partials,a=n.wave;this._wave=a,this._partials=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var o=F(this._getRealImaginary(t,this._phase),2),s=o[0],u=o[1],l=this.context.createPeriodicWave(s,u);this._wave=l,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),r._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),r._periodicWaveCache.length>100&&r._periodicWaveCache.shift()}}}},{key:"baseType",get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}},{key:"partialCount",get:function(){return this._partialCount},set:function(t){kc(t,0);var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var r=new Float32Array(t);this._partials.forEach((function(t,e){return r[e]=t})),this._partials=Array.from(r),this.type=this._type}}},{key:"_getRealImaginary",value:function(t,e){var n=2048,r=new Float32Array(n),i=new Float32Array(n),a=1;if("custom"===t){if(a=this._partials.length+1,this._partialCount=this._partials.length,n=a,0===this._partials.length)return[r,i]}else{var o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);o?(a=parseInt(o[2],10)+1,this._partialCount=parseInt(o[2],10),t=o[1],n=a=Math.max(a,2)):this._partialCount=0,this._partials=[]}for(var s=1;s<n;++s){var u=2/(s*Math.PI),l=void 0;switch(t){case"sine":l=s<=a?1:0,this._partials[s-1]=l;break;case"square":l=1&s?2*u:0,this._partials[s-1]=l;break;case"sawtooth":l=u*(1&s?1:-1),this._partials[s-1]=l;break;case"triangle":l=1&s?u*u*2*(s-1>>1&1?-1:1):0,this._partials[s-1]=l;break;case"custom":l=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==l?(r[s]=-l*Math.sin(e*s),i[s]=l*Math.cos(e*s)):(r[s]=0,i[s]=0)}return[r,i]}},{key:"_inverseFFT",value:function(t,e,n){for(var r=0,i=t.length,a=0;a<i;a++)r+=t[a]*Math.cos(a*n)+e[a]*Math.sin(a*n);return r}},{key:"getInitialValue",value:function(){for(var t=F(this._getRealImaginary(this._type,0),2),e=t[0],n=t[1],r=0,i=2*Math.PI,a=0;a<32;a++)r=Math.max(this._inverseFFT(e,n,a/32*i),r);return ah(-this._inverseFFT(e,n,this._phase)/r,-1,1)}},{key:"partials",get:function(){return this._partials.slice(0,this.partialCount)},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}},{key:"phase",get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pp.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}}]),r}(pp);dp._periodicWaveCache=[];var mp=function(t){"use strict";O(n,t);var e=P(n);function n(){return c(this,n),e.call(this,Object.assign(Zc(n.getDefaults(),arguments,["context"])))}return C(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $h(this,t,e,n),this}}]),n}(Uh),_p=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Object.assign(Zc(n.getDefaults(),arguments,["mapping","length"])))).name="WaveShaper",t._shaper=t.context.createWaveShaper(),t.input=t._shaper,t.output=t._shaper;var r=Zc(n.getDefaults(),arguments,["mapping","length"]);return Dc(r.mapping)||r.mapping instanceof Float32Array?t.curve=Float32Array.from(r.mapping):Ac(r.mapping)&&t.setMap(r.mapping,r.length),t}return C(n,[{key:"setMap",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=new Float32Array(e),r=0,i=e;r<i;r++){var a=r/(i-1)*2-1;n[r]=t(a,r)}return this.curve=n,this}},{key:"curve",get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(t){wc(["none","2x","4x"].some((function(e){return e.includes(t)})),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._shaper.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Qh.getDefaults(),{length:1024})}}]),n}(mp),gp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="AudioToGain",t._norm=new _p({context:t.context,mapping:function(t){return(t+1)/2}}),t.input=t._norm,t.output=t._norm,t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(mp),yp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Object.assign(Zc(n.getDefaults(),arguments,["value"])))).name="Multiply",t.override=!1;var r=Zc(n.getDefaults(),arguments,["value"]);return t._mult=t.input=t.output=new Gh({context:t.context,minValue:r.minValue,maxValue:r.maxValue}),t.factor=t._param=t._mult.gain,t.factor.setValueAtTime(r.value,0),t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Qh.getDefaults(),{value:0})}}]),n}(Qh),bp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","type","modulationType"]))).name="AMOscillator",t._modulationScale=new gp({context:t.context}),t._modulationNode=new Gh({context:t.context});var e=Zc(r.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new dp({context:t.context,detune:e.detune,frequency:e.frequency,onstop:function(){return t.onstop(s(t))},phase:e.phase,type:e.type}),t.frequency=t._carrier.frequency,t.detune=t._carrier.detune,t._modulator=new dp({context:t.context,phase:e.phase,type:e.modulationType}),t.harmonicity=new yp({context:t.context,units:"positive",value:e.harmonicity}),t.frequency.chain(t.harmonicity,t._modulator.frequency),t._modulator.chain(t._modulationScale,t._modulationNode.gain),t._carrier.chain(t._modulationNode,t.output),mh(s(t),["frequency","detune","harmonicity"]),t}return C(r,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._carrier.restart(t)}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(dp.getDefaults(),{harmonicity:1,modulationType:"square"})}}]),r}(pp),wp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","type","modulationType"]))).name="FMOscillator",t._modulationNode=new Gh({context:t.context,gain:0});var e=Zc(r.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new dp({context:t.context,detune:e.detune,frequency:0,onstop:function(){return t.onstop(s(t))},phase:e.phase,type:e.type}),t.detune=t._carrier.detune,t.frequency=new Qh({context:t.context,units:"frequency",value:e.frequency}),t._modulator=new dp({context:t.context,phase:e.phase,type:e.modulationType}),t.harmonicity=new yp({context:t.context,units:"positive",value:e.harmonicity}),t.modulationIndex=new yp({context:t.context,units:"positive",value:e.modulationIndex}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t.detune.connect(t._modulator.detune),mh(s(t),["modulationIndex","frequency","detune","harmonicity"]),t}return C(r,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){return this._modulator.restart(t),this._carrier.restart(t),this}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(dp.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}}]),r}(pp),kp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","width"]))).name="PulseOscillator",t._widthGate=new Gh({context:t.context,gain:0}),t._thresh=new _p({context:t.context,mapping:function(t){return t<=0?-1:1}});var e=Zc(r.getDefaults(),arguments,["frequency","width"]);return t.width=new Qh({context:t.context,units:"audioRange",value:e.width}),t._triangle=new dp({context:t.context,detune:e.detune,frequency:e.frequency,onstop:function(){return t.onstop(s(t))},phase:e.phase,type:"triangle"}),t.frequency=t._triangle.frequency,t.detune=t._triangle.detune,t._triangle.chain(t._thresh,t.output),t.width.chain(t._widthGate,t._thresh),mh(s(t),["width","frequency","detune"]),t}return C(r,[{key:"_start",value:function(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}},{key:"_restart",value:function(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"phase",get:function(){return this._triangle.phase},set:function(t){this._triangle.phase=t}},{key:"type",get:function(){return"pulse"}},{key:"baseType",get:function(){return"pulse"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"carrierType",set:function(t){this._triangle.type=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pp.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}}]),r}(pp),xp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","type","spread"]))).name="FatOscillator",t._oscillators=[];var e=Zc(r.getDefaults(),arguments,["frequency","type","spread"]);return t.frequency=new Qh({context:t.context,units:"frequency",value:e.frequency}),t.detune=new Qh({context:t.context,units:"cents",value:e.detune}),t._spread=e.spread,t._type=e.type,t._phase=e.phase,t._partials=e.partials,t._partialCount=e.partialCount,t.count=e.count,mh(s(t),["frequency","detune"]),t}return C(r,[{key:"_start",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.start(t)}))}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.stop(t)}))}},{key:"_restart",value:function(t){this._forEach((function(e){return e.restart(t)}))}},{key:"_forEach",value:function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._forEach((function(e){return e.type=t}))}},{key:"spread",get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach((function(t,r){return t.detune.value=e+n*r}))}}},{key:"count",get:function(){return this._oscillators.length},set:function(t){if(kc(t,1),this._oscillators.length!==t){this._forEach((function(t){return t.dispose()})),this._oscillators=[];for(var e=0;e<t;e++){var n=this,r=new dp({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?function(){return n.onstop(n)}:gh});"custom"===this.type&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[e]=r}this.spread=this._spread,"started"===this.state&&this._forEach((function(t){return t.start()}))}}},{key:"phase",get:function(){return this._phase},set:function(t){var e=this;this._phase=t,this._forEach((function(t,n){return t.phase=e._phase+n/e.count*360}))}},{key:"baseType",get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach((function(e){return e.baseType=t})),this._type=this._oscillators[0].type}},{key:"partials",get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((function(e){return e.partials=t})))}},{key:"partialCount",get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach((function(e){return e.partialCount=t})),this._type=this._oscillators[0].type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach((function(t){return t.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(dp.getDefaults(),{count:3,spread:20,type:"sawtooth"})}}]),r}(pp),Cp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","modulationFrequency"]))).name="PWMOscillator",t.sourceType="pwm",t._scale=new yp({context:t.context,value:2});var e=Zc(r.getDefaults(),arguments,["frequency","modulationFrequency"]);return t._pulse=new kp({context:t.context,frequency:e.modulationFrequency}),t._pulse.carrierType="sine",t.modulationFrequency=t._pulse.frequency,t._modulator=new dp({context:t.context,detune:e.detune,frequency:e.frequency,onstop:function(){return t.onstop(s(t))},phase:e.phase}),t.frequency=t._modulator.frequency,t.detune=t._modulator.detune,t._modulator.chain(t._scale,t._pulse.width),t._pulse.connect(t.output),mh(s(t),["modulationFrequency","frequency","detune"]),t}return C(r,[{key:"_start",value:function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._pulse.restart(t)}},{key:"type",get:function(){return"pwm"}},{key:"baseType",get:function(){return"pwm"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"phase",get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pp.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}}]),r}(pp),Ep={am:bp,fat:xp,fm:wp,oscillator:dp,pulse:kp,pwm:Cp},Mp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["frequency","type"]))).name="OmniOscillator";var e=Zc(r.getDefaults(),arguments,["frequency","type"]);return t.frequency=new Qh({context:t.context,units:"frequency",value:e.frequency}),t.detune=new Qh({context:t.context,units:"cents",value:e.detune}),mh(s(t),["frequency","detune"]),t.set(e),t}return C(r,[{key:"_start",value:function(t){this._oscillator.start(t)}},{key:"_stop",value:function(t){this._oscillator.stop(t)}},{key:"_restart",value:function(t){return this._oscillator.restart(t),this}},{key:"type",get:function(){var t=this,e="";return["am","fm","fat"].some((function(e){return t._sourceType===e}))&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}},{key:"partials",get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}},{key:"partialCount",get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}},{key:"set",value:function(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),V(M(r.prototype),"set",this).call(this,t),this}},{key:"_createNewOscillator",value:function(t){if(t!==this._sourceType){var e=this;this._sourceType=t;var n=Ep[t],r=this.now();if(this._oscillator){var i=this._oscillator;i.stop(r),this.context.setTimeout((function(){return i.dispose()}),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(r)}}},{key:"phase",get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}},{key:"sourceType",get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}},{key:"_getOscType",value:function(t,e){return t instanceof Ep[e]}},{key:"baseType",get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}},{key:"width",get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}},{key:"count",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&Sc(t)&&(this._oscillator.count=t)}},{key:"spread",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&Sc(t)&&(this._oscillator.spread=t)}},{key:"modulationType",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Rc(t)&&(this._oscillator.modulationType=t)}},{key:"modulationIndex",get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}},{key:"harmonicity",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}},{key:"modulationFrequency",get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vp(this,t));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(dp.getDefaults(),wp.getDefaults(),bp.getDefaults(),xp.getDefaults(),kp.getDefaults(),Cp.getDefaults())}}]),r}(pp);function Tp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){kc(r,t,e),n.set(this,r)}})}}function Pp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){kc(this.toSeconds(r),t,e),n.set(this,r)}})}}var Ap=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["url","onload"]))).name="Player",t._activeSources=new Set;var e=Zc(r.getDefaults(),arguments,["url","onload"]);return t._buffer=new yh({onload:t._onload.bind(s(t),e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),t.autostart=e.autostart,t._loop=e.loop,t._loopStart=e.loopStart,t._loopEnd=e.loopEnd,t._playbackRate=e.playbackRate,t.fadeIn=e.fadeIn,t.fadeOut=e.fadeOut,t}return C(r,[{key:"load",value:function(t){return zc(this,void 0,void 0,e(ra).mark((function n(){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._buffer.load(t);case 2:return this._onload(),e.abrupt("return",this);case 4:case"end":return e.stop()}}),n,this)})))}},{key:"_onload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gh;t(),this.autostart&&this.start()}},{key:"_onSourceEnd",value:function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}},{key:"start",value:function(t,e,n){return V(M(r.prototype),"start",this).call(this,t,e,n),this}},{key:"_start",value:function(t,e,n){e=this._loop?Qc(e,this._loopStart):Qc(e,0);var r=this.toSeconds(e),i=n;n=Qc(n,Math.max(this._buffer.duration-r,0));var a=this.toSeconds(n);a/=this._playbackRate,t=this.toSeconds(t);var o=new Kh({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+a),this._state.setStateAtTime("stopped",t+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Tc(i)?o.start(t,r):o.start(t,r,a-this.toSeconds(this.fadeOut))}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._activeSources.forEach((function(t){return t.stop(e)}))}},{key:"restart",value:function(t,e,n){return V(M(r.prototype),"restart",this).call(this,t,e,n),this}},{key:"_restart",value:function(t,e,n){this._stop(t),this._start(t,e,n)}},{key:"seek",value:function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var r=this.toSeconds(t);this._stop(n),this._start(n,r)}return this}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this._loopStart=t,this.buffer.loaded&&kc(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopStart=t}))}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this.buffer.loaded&&kc(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopEnd=t}))}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((function(e){e.loop=t})),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((function(t){return t.cancelStop()}))),this._activeSources.forEach((function(n){n.playbackRate.setValueAtTime(t,e)}))}},{key:"reverse",get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}},{key:"loaded",get:function(){return this._buffer.loaded}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this._activeSources.forEach((function(t){return t.dispose()})),this._activeSources.clear(),this._buffer.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pp.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:gh,onerror:gh,playbackRate:1,reverse:!1})}}]),r}(pp);jc([Pp(0)],Ap.prototype,"fadeIn",void 0),jc([Pp(0)],Ap.prototype,"fadeOut",void 0);var Sp=function(t){"use strict";O(r,t);var n=P(r);function r(){var t;c(this,r),(t=n.call(this,Zc(r.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="Envelope",t._sig=new Qh({context:t.context,value:0}),t.output=t._sig,t.input=void 0;var e=Zc(r.getDefaults(),arguments,["attack","decay","sustain","release"]);return t.attack=e.attack,t.decay=e.decay,t.sustain=e.sustain,t.release=e.release,t.attackCurve=e.attackCurve,t.releaseCurve=e.releaseCurve,t.decayCurve=e.decayCurve,t}return C(r,[{key:"value",get:function(){return this.getValueAtTime(this.now())}},{key:"_getCurve",value:function(t,e){if(Rc(t))return t;var n;for(n in Vp)if(Vp[n][e]===t)return n;return t}},{key:"_setCurve",value:function(t,e,n){if(Rc(n)&&Reflect.has(Vp,n)){var r=Vp[n];Vc(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else{if(!Dc(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}},{key:"attackCurve",get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}},{key:"releaseCurve",get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}},{key:"decayCurve",get:function(){return this._decayCurve},set:function(t){wc(["linear","exponential"].some((function(e){return e===t})),"Invalid envelope curve: ".concat(t)),this._decayCurve=t}},{key:"triggerAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),r=n,i=this.toSeconds(this.decay),a=this.getValueAtTime(t);if(a>0){var o=1/r,s=1-a;r=s/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,r,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);for(var u=this._attackCurve,l=1;l<u.length;l++)if(u[l-1]<=a&&a<=u[l]){(u=this._attackCurve.slice(l))[0]=a;break}this._sig.setValueCurveAtTime(u,t,r,e)}if(i&&this.sustain<1){var c=e*this.sustain,h=t+r;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(c,i+h):this._sig.exponentialApproachValueAtTime(c,h,i)}return this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(wc(Dc(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}},{key:"getValueAtTime",value:function(t){return this._sig.getValueAtTime(t)}},{key:"triggerAttackRelease",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}},{key:"cancel",value:function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $h(this,t,e,n),this}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return zc(this,void 0,void 0,e(ra).mark((function n(){var r,i,a,o,s,u,l,c;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t/this.context.sampleRate,i=new bh(1,r,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o+(s=.1*o),(l=new this.constructor(Object.assign(this.get(),{attack:r*this.toSeconds(this.attack)/u,decay:r*this.toSeconds(this.decay)/u,release:r*this.toSeconds(this.release)/u,context:i})))._sig.toDestination(),l.triggerAttackRelease(r*(a+s)/u,0),e.next=11,i.render();case 11:return c=e.sent,e.abrupt("return",c.getChannelData(0));case 13:case"end":return e.stop()}}),n,this)})))}},{key:"dispose",value:function(){return V(M(r.prototype),"dispose",this).call(this),this._sig.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}}]),r}(Uh);jc([Pp(0)],Sp.prototype,"attack",void 0),jc([Pp(0)],Sp.prototype,"decay",void 0),jc([Tp(0,1)],Sp.prototype,"sustain",void 0),jc([Pp(0)],Sp.prototype,"release",void 0);var Vp=function(){var t,e,n=128,r=[];for(t=0;t<n;t++)r[t]=Math.sin(t/127*(Math.PI/2));var i=[];for(t=0;t<127;t++){e=t/127;var a=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=a/10+.83*e}i[127]=1;var o=[];for(t=0;t<n;t++)o[t]=Math.ceil(t/127*5)/5;var s=[];for(t=0;t<n;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));var u,l=[];for(t=0;t<n;t++){e=t/127;var c=4*Math.pow(e,3)+.2,h=Math.cos(c*Math.PI*2*e);l[t]=Math.abs(h*(1-e))}function p(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:p(l),Out:l},cosine:{In:r,Out:(u=r,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:p(i)},sine:{In:s,Out:p(s)},step:{In:o,Out:p(o)}}}(),Op=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments)))._scheduledEvents=[],t._synced=!1,t._original_triggerAttack=t.triggerAttack,t._original_triggerRelease=t.triggerRelease;var r=Zc(n.getDefaults(),arguments);return t._volume=t.output=new op({context:t.context,volume:r.volume}),t.volume=t._volume.volume,mh(s(t),"volume"),t}return C(n,[{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}},{key:"_syncState",value:function(){var t=!1;return this._synced||(this._synced=!0,t=!0),t}},{key:"_syncMethod",value:function(t,e){var n=this,r=this["_original_"+t]=this[t];this[t]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=n,s=i[e],u=n.context.transport.schedule((function(t){i[e]=t,r.apply(o,i)}),s);n._scheduledEvents.push(u)}}},{key:"unsync",value:function(){var t=this;return this._scheduledEvents.forEach((function(e){return t.context.transport.clear(e)})),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}},{key:"triggerAttackRelease",value:function(t,e,n,r){var i=this.toSeconds(n),a=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+a),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{volume:0})}}]),n}(Uh),Dp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),t=e.call(this,Zc(n.getDefaults(),arguments));var r=Zc(n.getDefaults(),arguments);return t.portamento=r.portamento,t.onsilence=r.onsilence,t}return C(n,[{key:"triggerAttack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",t,e,n);var r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,n),this.setNote(t,r),this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}},{key:"setNote",value:function(t,e){var n=this.toSeconds(e),r=t instanceof Ih?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}],[{key:"getDefaults",value:function(){return Object.assign(Op.getDefaults(),{detune:0,onsilence:gh,portamento:0})}}]),n}(Op);jc([Pp(0)],Dp.prototype,"portamento",void 0);var Rp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="AmplitudeEnvelope",t._gainNode=new Gh({context:t.context,gain:0}),t.output=t._gainNode,t.input=t._gainNode,t._sig.connect(t._gainNode.gain),t.output=t._gainNode,t.input=t._gainNode,t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._gainNode.dispose(),this}}]),n}(Sp),Lp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments))).name="Synth";var r=Zc(n.getDefaults(),arguments);return t.oscillator=new Mp(Object.assign({context:t.context,detune:r.detune,onstop:function(){return t.onsilence(s(t))}},r.oscillator)),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.envelope=new Rp(Object.assign({context:t.context},r.envelope)),t.oscillator.chain(t.envelope,t.output),mh(s(t),["oscillator","frequency","detune","envelope"]),t}return C(n,[{key:"_triggerEnvelopeAttack",value:function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+r)}}},{key:"_triggerEnvelopeRelease",value:function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Dp.getDefaults(),{envelope:Object.assign($c(Sp.getDefaults(),Object.keys(Uh.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign($c(Mp.getDefaults(),B(Object.keys(pp.getDefaults())).concat(["frequency","detune"])),{type:"triangle"})})}}]),n}(Dp),Ip=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments))).name="MembraneSynth",t.portamento=0;var r=Zc(n.getDefaults(),arguments);return t.pitchDecay=r.pitchDecay,t.octaves=r.octaves,mh(s(t),["oscillator","envelope"]),t}return C(n,[{key:"setNote",value:function(t,e){var n=this.toSeconds(e),r=this.toFrequency(t instanceof Ih?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this}}],[{key:"getDefaults",value:function(){return Xc(Dp.getDefaults(),Lp.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}}]),n}(Lp);jc([Tp(0)],Ip.prototype,"octaves",void 0),jc([Pp(0)],Ip.prototype,"pitchDecay",void 0);var Np=new Set;function Fp(t){Np.add(t)}function Bp(t,e){var n='registerProcessor("'.concat(t,'", ').concat(e,")");Np.add(n)}Fp('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');Fp("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");Fp("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");var jp="feedback-comb-filter";Bp(jp,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');var zp=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))).name="Sampler",t._activeSources=new Map;var r=Zc(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),i={};return Object.keys(r.urls).forEach((function(e){var n=parseInt(e,10);if(wc(Lc(e)||Sc(n)&&isFinite(n),"url key is neither a note or midi pitch: ".concat(e)),Lc(e)){var a=new Ih(t.context,e).toMidi();i[a]=r.urls[e]}else Sc(n)&&isFinite(n)&&(i[n]=r.urls[n])})),t._buffers=new Th({urls:i,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),t.attack=r.attack,t.release=r.release,t.curve=r.curve,t._buffers.loaded&&Promise.resolve().then(r.onload),t}return C(n,[{key:"_findClosest",value:function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: ".concat(t))}},{key:"triggerAttack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this;return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=r,a=Dh(new Ih(r.context,t).toFrequency()),o=Math.round(a),s=a-o,u=r._findClosest(o),l=o-u,c=r._buffers.get(l),h=Sh(u+s),p=new Kh({url:c,context:r.context,curve:r.curve,fadeIn:r.attack,fadeOut:r.release,playbackRate:h}).connect(r.output);p.start(e,0,c.duration/h,n),Dc(r._activeSources.get(o))||r._activeSources.set(o,[]),r._activeSources.get(o).push(p),p.onended=function(){if(i._activeSources&&i._activeSources.has(o)){var t=i._activeSources.get(o),e=t.indexOf(p);-1!==e&&t.splice(e,1)}}})),this}},{key:"triggerRelease",value:function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((function(t){var r=new Ih(n.context,t).toMidi();if(n._activeSources.has(r)&&n._activeSources.get(r).length){var i=n._activeSources.get(r);e=n.toSeconds(e),i.forEach((function(t){t.stop(e)})),n._activeSources.set(r,[])}})),this}},{key:"releaseAll",value:function(t){var e=this.toSeconds(t);return this._activeSources.forEach((function(t){for(;t.length;){t.shift().stop(e)}})),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"triggerAttackRelease",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=this.toSeconds(n);if(this.triggerAttack(t,i,r),Dc(e)){var a=this;wc(Dc(t),"notes must be an array when duration is array"),t.forEach((function(t,n){var r=e[Math.min(n,e.length-1)];a.triggerRelease(t,i+a.toSeconds(r))}))}else this.triggerRelease(t,i+this.toSeconds(e));return this}},{key:"add",value:function(t,e,n){if(wc(Lc(t)||isFinite(t),"note must be a pitch or midi: ".concat(t)),Lc(t)){var r=new Ih(this.context,t).toMidi();this._buffers.add(r,e,n)}else this._buffers.add(t,e,n);return this}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._buffers.dispose(),this._activeSources.forEach((function(t){t.forEach((function(t){return t.dispose()}))})),this._activeSources.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Op.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:gh,onerror:gh,release:.1,urls:{}})}}]),n}(Op);jc([Pp(0)],zp.prototype,"attack",void 0),jc([Pp(0)],zp.prototype,"release",void 0);var Up=e(ra).mark(uv),qp=e(ra).mark(sv),Wp=e(ra).mark(ov),Gp=e(ra).mark(av),Hp=e(ra).mark(iv),Kp=e(ra).mark(rv),Yp=e(ra).mark(nv),Xp=e(ra).mark(tv),Zp=e(ra).mark(Jp),Qp=e(ra).mark($p);function $p(t){var n;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=8;break}return n=ev(n,t),e.next=5,t[n];case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),Qp)}function Jp(t){var n;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length-1;case 1:if(!(n>=0)){e.next=8;break}return n=ev(n,t),e.next=5,t[n];case 5:n--,e.next=1;break;case 8:case"end":return e.stop()}}),Zp)}function tv(t,n){return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(n(t),"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),Xp)}function ev(t,e){return ah(t,0,e.length-1)}function nv(t,n){var r;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n?0:t.length-1;case 1:return r=ev(r,t),e.next=5,t[r];case 5:n?++r>=t.length-1&&(n=!1):--r<=0&&(n=!0),e.next=1;break;case 8:case"end":return e.stop()}}),Yp)}function rv(t){var n,r;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=0;case 2:if(!(n<t.length)){e.next=10;break}return n=ev(n,t),e.next=6,t[n];case 6:r++,n+=r%2?2:-1,e.next=2;break;case 10:case"end":return e.stop()}}),Kp)}function iv(t){var n,r;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length-1,r=0;case 2:if(!(n>=0)){e.next=10;break}return n=ev(n,t),e.next=6,t[n];case 6:r++,n+=r%2?-2:1,e.next=2;break;case 10:case"end":return e.stop()}}),Hp)}function av(t){var n;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.floor(Math.random()*t.length),e.next=4,t[n];case 4:e.next=0;break;case 6:case"end":return e.stop()}}),Gp)}function ov(t){var n,r,i,a;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++)n.push(r);case 2:if(!(n.length>0)){e.next=9;break}return i=n.splice(Math.floor(n.length*Math.random()),1),a=ev(i[0],t),e.next=7,t[a];case 7:e.next=2;break;case 9:case"end":return e.stop()}}),Wp)}function sv(t){var n;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.floor(Math.random()*t.length);case 1:return 0===n?n++:n===t.length-1||Math.random()<.5?n--:n++,e.next=5,t[n];case 5:e.next=1;break;case 7:case"end":return e.stop()}}),qp)}function uv(t){var n,r=arguments;return e(ra).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:"up",r.length>2&&void 0!==r[2]?r[2]:0,wc(t.length>0,"The array must have more than one value in it"),e.t0=n,e.next="up"===e.t0?5:"down"===e.t0?6:"upDown"===e.t0?7:"downUp"===e.t0?8:"alternateUp"===e.t0?9:"alternateDown"===e.t0?10:"random"===e.t0?11:"randomOnce"===e.t0?12:"randomWalk"===e.t0?13:14;break;case 5:return e.delegateYield(tv(t,$p),"t1",6);case 6:return e.delegateYield(tv(t,Jp),"t2",7);case 7:return e.delegateYield(nv(t,!0),"t3",8);case 8:return e.delegateYield(nv(t,!1),"t4",9);case 9:return e.delegateYield(tv(t,rv),"t5",10);case 10:return e.delegateYield(tv(t,iv),"t6",11);case 11:return e.delegateYield(av(t),"t7",12);case 12:return e.delegateYield(tv(t,ov),"t8",13);case 13:return e.delegateYield(sv(t),"t9",14);case 14:case"end":return e.stop()}}),Up)}var lv=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Object.assign(Zc(n.getDefaults(),arguments,["pan"])))).name="Panner",t._panner=t.context.createStereoPanner(),t.input=t._panner,t.output=t._panner;var r=Zc(n.getDefaults(),arguments,["pan"]);return t.pan=new zh({context:t.context,param:t._panner.pan,value:r.pan,minValue:-1,maxValue:1}),t._panner.channelCount=r.channelCount,t._panner.channelCountMode="explicit",mh(s(t),"pan"),t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.pan.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{pan:0,channelCount:1})}}]),n}(Uh),cv="bit-crusher";Bp(cv,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");var hv=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["solo"]))).name="Solo";var r=Zc(n.getDefaults(),arguments,["solo"]);return t.input=t.output=new Gh({context:t.context}),n._allSolos.has(t.context)||n._allSolos.set(t.context,new Set),n._allSolos.get(t.context).add(s(t)),t.solo=r.solo,t}return C(n,[{key:"solo",get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach((function(t){return t._updateSolo()}))}},{key:"muted",get:function(){return 0===this.input.gain.value}},{key:"_addSolo",value:function(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}},{key:"_removeSolo",value:function(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}},{key:"_isSoloed",value:function(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}},{key:"_noSolos",value:function(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&0===n._soloed.get(this.context).size}},{key:"_updateSolo",value:function(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{solo:!1})}}]),n}(Uh);hv._allSolos=new Map,hv._soloed=new Map;var pv=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["pan","volume"]))).name="PanVol";var r=Zc(n.getDefaults(),arguments,["pan","volume"]);return t._panner=t.input=new lv({context:t.context,pan:r.pan,channelCount:r.channelCount}),t.pan=t._panner.pan,t._volume=t.output=new op({context:t.context,volume:r.volume}),t.volume=t._volume.volume,t._panner.connect(t._volume),t.mute=r.mute,mh(s(t),["pan","volume"]),t}return C(n,[{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}}]),n}(Uh),vv=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;c(this,n),(t=e.call(this,Zc(n.getDefaults(),arguments,["volume","pan"]))).name="Channel";var r=Zc(n.getDefaults(),arguments,["volume","pan"]);return t._solo=t.input=new hv({solo:r.solo,context:t.context}),t._panVol=t.output=new pv({context:t.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),t.pan=t._panVol.pan,t.volume=t._panVol.volume,t._solo.connect(t._panVol),mh(s(t),["pan","volume"]),t}return C(n,[{key:"solo",get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}},{key:"muted",get:function(){return this._solo.muted||this.mute}},{key:"mute",get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}},{key:"_getBus",value:function(t){return n.buses.has(t)||n.buses.set(t,new Gh({context:this.context})),n.buses.get(t)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._getBus(t),r=new Gh({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(n),r}},{key:"receive",value:function(t){return this._getBus(t).connect(this),this}},{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}}]),n}(Uh);vv.buses=new Map;var fv=function(t){"use strict";O(n,t);var e=P(n);function n(){var t;return c(this,n),(t=e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))).name="Listener",t.positionX=new zh({context:t.context,param:t.context.rawContext.listener.positionX}),t.positionY=new zh({context:t.context,param:t.context.rawContext.listener.positionY}),t.positionZ=new zh({context:t.context,param:t.context.rawContext.listener.positionZ}),t.forwardX=new zh({context:t.context,param:t.context.rawContext.listener.forwardX}),t.forwardY=new zh({context:t.context,param:t.context.rawContext.listener.forwardY}),t.forwardZ=new zh({context:t.context,param:t.context.rawContext.listener.forwardZ}),t.upX=new zh({context:t.context,param:t.context.rawContext.listener.upX}),t.upY=new zh({context:t.context,param:t.context.rawContext.listener.upY}),t.upZ=new zh({context:t.context,param:t.context.rawContext.listener.upZ}),t}return C(n,[{key:"dispose",value:function(){return V(M(n.prototype),"dispose",this).call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Uh.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}}]),n}(Uh);uh((function(t){t.listener=new fv({context:t})})),ch((function(t){t.listener.dispose()}));var dv=xh().transport;xh().destination,xh().destination;xh().listener;xh().draw;xh();var mv=new WeakSet;function _v(){if(this.pane){var t=this.pane.addFolder({title:"audio"});t.addButton({title:"play"}).on("click",(function(){return dv.start()})),t.addButton({title:"stop"}).on("click",(function(){return dv.stop()}))}}var gv=new WeakMap,yv=new WeakMap,bv=new WeakMap,wv=new WeakMap,kv=new WeakSet,xv=new WeakSet,Cv=new WeakSet,Ev=new WeakSet,Mv=new WeakSet,Tv=new WeakSet,Pv=new WeakSet,Av=new WeakSet,Sv=new WeakSet,Vv=new WeakSet,Ov=new WeakSet,Dv=new WeakSet,Rv=(mv=new WeakSet,new WeakSet),Lv=function(){"use strict";function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,t),_(this,kv),_(this,xv),_(this,Cv),_(this,Ev),_(this,Mv),_(this,Tv),_(this,Pv),_(this,Av),_(this,Sv),_(this,Vv),_(this,Ov),_(this,Dv),_(this,mv),_(this,Rv),A(this,"oninit",void 0),f(this,gv,{writable:!0,value:0}),f(this,yv,{writable:!0,value:0}),f(this,bv,{writable:!0,value:0}),f(this,wv,{writable:!0,value:!1}),A(this,"camera",{matrix:z.create(),near:60,far:155,distance:100,orbit:Ut.create(),position:qt.create(),rotation:qt.create(),up:qt.fromValues(0,1,0)}),A(this,"animate",!0),A(this,"plantSettings",{showGuides:!1}),this.canvas=e,this.pane=n,this.oninit=r,m(this,Mv,jv).call(this)}return C(t,[{key:"resize",value:function(){var t,e,n,r,i=this.gl;(t=i.canvas,e=t.clientWidth,n=t.clientHeight,(r=t.width!==e||t.height!==n)&&(t.width=e,t.height=n),r)&&(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),m(this,Av,Wv).call(this,i)),this.blurScale=i.canvas.clientHeight/550,m(this,Dv,Yv).call(this,i)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this;this.fpsGraph&&this.fpsGraph.begin(),d(this,bv,Math.min(32,t-p(this,gv))),d(this,gv,t),this.animate&&d(this,yv,p(this,yv)+p(this,bv)/16),p(this,wv)||(this.control.update(p(this,bv)),z.fromQuat(this.drawUniforms.worldMatrix,this.control.rotationQuat),z.invert(this.drawUniforms.worldInverseTransposeMatrix,this.drawUniforms.worldMatrix),z.transpose(this.drawUniforms.worldInverseTransposeMatrix,this.drawUniforms.worldInverseTransposeMatrix),z.invert(this.drawUniforms.inversProjectionMatrix,this.drawUniforms.projectionMatrix),this.plant.update(p(this,yv)),m(this,kv,Iv).call(this),this.fpsGraph&&this.fpsGraph.end(),requestAnimationFrame((function(t){return e.run(t)})))}},{key:"destroy",value:function(){d(this,wv,!0)}}]),t}();function Iv(){var t=this.gl;Sr(t,this.plantFBO,this.drawBufferSize[0],this.drawBufferSize[1]),t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.plant.render(this.drawUniforms,this.plantSettings.showGuides),Sr(t,null,this.drawBufferSize[0],this.drawBufferSize[1]),Sr(t,this.deltaDepthFBO,this.drawBufferSize[0],this.drawBufferSize[1]),t.useProgram(this.deltaDepthProgram),t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.plantColorTexture),t.uniform1i(this.deltaDepthLocations.u_colorTexture,0),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.plantDepthTexture),t.uniform1i(this.deltaDepthLocations.u_depthTexture,1),t.uniformMatrix4fv(this.deltaDepthLocations.u_viewMatrix,!1,this.drawUniforms.viewMatrix),t.uniformMatrix4fv(this.deltaDepthLocations.u_projectionMatrix,!1,this.drawUniforms.projectionMatrix),t.uniformMatrix4fv(this.deltaDepthLocations.u_inversProjectionMatrix,!1,this.drawUniforms.inversProjectionMatrix),t.uniformMatrix4fv(this.deltaDepthLocations.u_worldMatrix,!1,this.drawUniforms.worldMatrix),t.bindVertexArray(this.vesselVAO),t.drawElements(t.TRIANGLES,this.vesselBuffers.numElem,t.UNSIGNED_SHORT,0),Sr(t,null,this.drawBufferSize[0],this.drawBufferSize[1]),Sr(t,this.hBlurFBO,this.drawBufferSize[0],this.drawBufferSize[1]),m(this,xv,Nv).call(this,this.deltaDepthColorTexture),Sr(t,null,this.drawBufferSize[0],this.drawBufferSize[1]),Sr(t,this.vBlurFBO,this.drawBufferSize[0],this.drawBufferSize[1]),m(this,xv,Nv).call(this,this.hBlurTexture,!0),Sr(t,null,this.drawBufferSize[0],this.drawBufferSize[1]),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),m(this,Ev,Bv).call(this),m(this,Cv,Fv).call(this,!1)}function Nv(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.gl;n.useProgram(this.blurProgram),n.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t),n.uniform1i(this.blurLocations.u_colorTexture,0),e?n.uniform2f(this.blurLocations.u_direction,0,1):n.uniform2f(this.blurLocations.u_direction,1,0),n.uniform1f(this.blurLocations.u_scale,this.blurScale),n.bindVertexArray(this.quadVAO),n.drawArrays(n.TRIANGLES,0,this.quadBuffers.numElem)}function Fv(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.gl;n.useProgram(this.vesselProgram),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST);var r=this.drawUniforms.worldInverseTransposeMatrix;t&&(n.cullFace(n.FRONT),r=z.scale(z.create(),this.drawUniforms.worldInverseTransposeMatrix,qt.fromValues(-1,-1,-1))),e||(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.vBlurTexture),n.uniform1i(this.vesselLocations.u_colorTexture,0)),n.uniformMatrix4fv(this.vesselLocations.u_viewMatrix,!1,this.drawUniforms.viewMatrix),n.uniformMatrix4fv(this.vesselLocations.u_projectionMatrix,!1,this.drawUniforms.projectionMatrix),n.uniform3f(this.vesselLocations.u_cameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]),n.uniformMatrix4fv(this.vesselLocations.u_worldMatrix,!1,this.drawUniforms.worldMatrix),n.uniformMatrix4fv(this.vesselLocations.u_worldInverseTransposeMatrix,!1,r),n.bindVertexArray(this.vesselVAO),n.drawElements(n.TRIANGLES,this.vesselBuffers.numElem,n.UNSIGNED_SHORT,0),n.cullFace(n.BACK)}function Bv(){var t=this.gl;t.useProgram(this.titleProgram),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.titleTexture),t.uniform1i(this.titleLocations.u_titleTexture,0),t.uniformMatrix4fv(this.titleLocations.u_viewMatrix,!1,this.drawUniforms.viewMatrix),t.uniformMatrix4fv(this.titleLocations.u_projectionMatrix,!1,this.drawUniforms.projectionMatrix),t.uniformMatrix4fv(this.titleLocations.u_worldMatrix,!1,z.create()),t.uniform1f(this.titleLocations.u_frames,p(this,yv)),t.bindVertexArray(this.titleRibbonVAO),t.drawElements(t.TRIANGLES,this.titleRibbonBuffers.numElem,t.UNSIGNED_SHORT,0)}function jv(){var t=this;this.gl=this.canvas.getContext("webgl2",{antialias:!1,alpha:!1});var n=this.gl;if(!n)throw new Error("No WebGL 2 context!");n.getExtension("EXT_color_buffer_float")||(console.error("FLOAT color buffer not available"),document.body.innerHTML="This example requires EXT_color_buffer_float which is unavailable on this system."),this.deltaDepthProgram=Mr(n,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\n\nout vec3 v_position;\n\nvoid main() {\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_position = viewPosition.xyz;\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform mat4 u_inversProjectionMatrix;\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\n\nin vec3 v_position;\n\nout vec4 outColor;\n\n// reconstructs the view space position given the screen space coordinates\n// along with the depth\nvec3 reconstructPosition(vec2 uv, float depth, mat4 inversProjectionMatrix) {\n    float x = uv.x * 2. - 1.;   // = x / w\n    float y = uv.y * 2. - 1.;   // = y / w\n    float z = depth * 2. - 1.;\n    vec4 projectedPosition = vec4(x, y, z, 1.);\n    vec4 pos = inversProjectionMatrix * projectedPosition;\n    return pos.xyz / pos.w;\n}\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n    float vesselRadius = 20.;\n    float cameraDistance = 100.;\n\n    float plantDepth = texture(u_depthTexture, uv).r;\n    vec3 plantPosition = reconstructPosition(uv, plantDepth, u_inversProjectionMatrix);\n    // get the normalized plant z position\n    float plantNormZ = (cameraDistance + vesselRadius + plantPosition.z) / (2. * vesselRadius);\n    // get the normalized vessel z position\n    float vesselNormZ = (cameraDistance + vesselRadius + v_position.z) / (2. * vesselRadius);\n    float deltaBlur = smoothstep(0.15, 0.4, vesselNormZ - plantNormZ);\n    float deltaFog = smoothstep(0.0, 1.1, vesselNormZ - plantNormZ);\n    vec4 color = mix(texture(u_colorTexture, uv), vec4(1.), deltaFog);\n\n    outColor = vec4(color.rgb, deltaBlur);\n}\n")],null,{a_position:0}),this.blurProgram=Mr(n,[e("#version 300 es\n#define GLSLIFY 1\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_colorTexture;\nuniform float u_scale;\nuniform vec2 u_direction;\n\nout vec4 blurColor;\n\nfloat getRadius(float depth) {\n    return clamp(depth, 0.0, 1.);\n}\n\nvoid blur(\n    in vec2 A,\n    in vec2 direction,\n    in float scale,\n    in sampler2D inTexture,\n    out vec4 outColor\n) {\n    const int KERNEL_SIZE = 6;\n    float gaussian[KERNEL_SIZE];  \n    gaussian[5] = 0.04153263993208;\n    gaussian[4] = 0.06352050813141;\n    gaussian[3] = 0.08822292796029;\n    gaussian[2] = 0.11143948794984;\n    gaussian[1] = 0.12815541114232;\n    gaussian[0] = 0.13425804976814;\n\n    vec4 resultColor = vec4(0.);\n    float weightSum = 0.;\n\n    // position of the current pixel\n    vec2 texelSize = 1. / vec2(textureSize(inTexture, 0));\n    vec4 colorA = texture(inTexture, A);\n    float depthA = colorA.a;\n    float rA = getRadius(depthA);\n\n    // scatter as you gather loop\n    for(int i = -KERNEL_SIZE; i < KERNEL_SIZE; ++i) {\n        vec2 B = A + direction * ((float(i) * scale) * texelSize);\n        vec4 colorB = texture(inTexture, B);\n        float depthB = colorB.a;\n        float rB = getRadius(depthB);\n\n        float blurWeight = gaussian[abs(i)];\n\n        // only consider if B is in front of A\n        float bNearerWeight = clamp(abs(rA) - abs(rB) + 1., 0., .5);\n        float weight = bNearerWeight * blurWeight;\n        weightSum += weight;\n        resultColor.rgb += colorB.rgb * weight;\n    }\n\n    // apply total weights\n    resultColor.rgb /= weightSum;\n    resultColor.a = colorA.a;\n\n    outColor = resultColor;\n}\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        u_direction,\n        u_scale,\n        u_colorTexture,\n        blurColor\n    );\n\n    //blurColor = vec4(texture(u_colorTexture, uv).a);\n}")],null,{a_position:0}),this.vesselProgram=Mr(n,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_colorTexture;\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec2 texelSize = 1. / vec2(textureSize(u_colorTexture, 0));\n    vec2 uv = gl_FragCoord.xy * texelSize;\n\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 VN = normalize(v_viewNormal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., .5, 4.));\n    float NdL = max(0., dot(N, L));\n\n    // calculate the half vector\n    vec3 H = normalize(V + N);\n\n    // specular term\n    float specular = pow(max(0., max(0., dot(H, L))), 100.) * .6;\n\n    // diffuse term\n    float diffuse = NdL * .3 + .7;\n\n    // edge darkening term\n    float edge = min(1., pow(min(1., NdL + 0.5), 3.) + 0.6);\n\n    // ambient light color\n    vec4 ambient = vec4(0.9, 0.9, 1., 1.);\n    \n    vec4 innerColor = texture(u_colorTexture, uv);\n\n    vec4 vesselColor = ambient * diffuse + vec4(specular) * 1.5;\n    vesselColor *= edge;\n\n    outColor = innerColor * 0.9 + vesselColor * 0.1 + vec4(N.zyx, 1.) * 0.05;\n}\n")],null,{a_position:0,a_normal:1,a_uv:2}),this.titleProgram=Mr(n,[e("#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\nin vec2 a_uv;\n\nout vec2 v_uv;\n\nvoid main() {\n    v_uv = a_uv;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n}\n"),e("#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_titleTexture;\nuniform float u_frames;\n\nin vec2 v_uv;\n\nout vec4 outColor;\n\nvoid main() {\n    vec2 uv = vec2(v_uv.x - u_frames * 0.00025, v_uv.y);\n    vec4 color = 1. - texture(u_titleTexture, uv * vec2(-4., 0.99));\n    //color = mix(vec4(248. / 255., 248. / 255., 222. / 255., 1.), vec4(1.), color);\n    color = mix(vec4(228. / 255., 238. / 255., 255. / 255., 1.), vec4(1.), color);\n    //color = mix(vec4(55. / 255., 25. / 255., 22. / 255., 1.), vec4(1.), color);\n\n    color = mix(color, vec4(1.), sin(v_uv.x * 9.5) * 0.5 + 0.5);\n\n    outColor = color;\n}\n")],null,{a_position:0,a_uv:1}),this.deltaDepthLocations={a_position:n.getAttribLocation(this.deltaDepthProgram,"a_position"),u_worldMatrix:n.getUniformLocation(this.deltaDepthProgram,"u_worldMatrix"),u_viewMatrix:n.getUniformLocation(this.deltaDepthProgram,"u_viewMatrix"),u_projectionMatrix:n.getUniformLocation(this.deltaDepthProgram,"u_projectionMatrix"),u_inversProjectionMatrix:n.getUniformLocation(this.deltaDepthProgram,"u_inversProjectionMatrix"),u_colorTexture:n.getUniformLocation(this.deltaDepthProgram,"u_colorTexture"),u_depthTexture:n.getUniformLocation(this.deltaDepthProgram,"u_depthTexture")},this.blurLocations={a_position:n.getAttribLocation(this.blurProgram,"a_position"),u_colorTexture:n.getUniformLocation(this.blurProgram,"u_colorTexture"),u_scale:n.getUniformLocation(this.blurProgram,"u_scale"),u_direction:n.getUniformLocation(this.blurProgram,"u_direction")},this.vesselLocations={a_position:n.getAttribLocation(this.vesselProgram,"a_position"),a_normal:n.getAttribLocation(this.vesselProgram,"a_normal"),a_uv:n.getAttribLocation(this.vesselProgram,"a_uv"),u_worldMatrix:n.getUniformLocation(this.vesselProgram,"u_worldMatrix"),u_viewMatrix:n.getUniformLocation(this.vesselProgram,"u_viewMatrix"),u_projectionMatrix:n.getUniformLocation(this.vesselProgram,"u_projectionMatrix"),u_worldInverseTransposeMatrix:n.getUniformLocation(this.vesselProgram,"u_worldInverseTransposeMatrix"),u_cameraPosition:n.getUniformLocation(this.vesselProgram,"u_cameraPosition"),u_colorTexture:n.getUniformLocation(this.vesselProgram,"u_colorTexture")},this.titleLocations={a_position:n.getAttribLocation(this.titleProgram,"a_position"),a_uv:n.getAttribLocation(this.titleProgram,"a_uv"),u_worldMatrix:n.getUniformLocation(this.titleProgram,"u_worldMatrix"),u_viewMatrix:n.getUniformLocation(this.titleProgram,"u_viewMatrix"),u_projectionMatrix:n.getUniformLocation(this.titleProgram,"u_projectionMatrix"),u_titleTexture:n.getUniformLocation(this.titleProgram,"u_titleTexture"),u_frames:n.getUniformLocation(this.titleProgram,"u_frames")},this.drawUniforms={worldMatrix:z.create(),viewMatrix:z.create(),cameraMatrix:z.create(),projectionMatrix:z.create(),inversProjectionMatrix:z.create(),worldInverseTransposeMatrix:z.create()},this.VESSEL_HEIGHT=50,this.VESSEL_RADIUS=20,this.VESSEL_BEVEL_RADIUS=13,this.vesselGeometry=new Kr(this.VESSEL_HEIGHT,this.VESSEL_RADIUS,this.VESSEL_BEVEL_RADIUS),this.vesselBuffers={position:Pr(n,this.vesselGeometry.vertices,n.STATIC_DRAW),normal:Pr(n,this.vesselGeometry.normals,n.STATIC_DRAW),numElem:this.vesselGeometry.indices.length},this.vesselVAO=Tr(n,[[this.vesselBuffers.position,this.vesselLocations.a_position,3],[this.vesselBuffers.normal,this.vesselLocations.a_normal,3]],this.vesselGeometry.indices);var r=[-1,-1,3,-1,-1,3];this.quadBuffers={position:Pr(n,new Float32Array(r),n.STATIC_DRAW),numElem:r.length/2},this.quadVAO=Tr(n,[[this.quadBuffers.position,0,2]]),this.plant=new xi(n,this.VESSEL_HEIGHT,this.VESSEL_RADIUS,this.VESSEL_BEVEL_RADIUS,(function(){return t.plant.generate(p(t,yv))})),this.plant.generate(p(this,yv)),this.titleRibbonGeometry=m(this,Vv,Hv).call(this,50,8,60,1),this.titleRibbonBuffers={position:Pr(n,new Float32Array(this.titleRibbonGeometry.vertices),n.STATIC_DRAW),uv:Pr(n,new Float32Array(this.titleRibbonGeometry.uvs),n.STATIC_DRAW),numElem:this.titleRibbonGeometry.count},this.titleRibbonVAO=Tr(n,[[this.titleRibbonBuffers.position,this.titleLocations.a_position,3],[this.titleRibbonBuffers.uv,this.titleLocations.a_uv,2]],this.titleRibbonGeometry.indices);var i=Rn.fromValues(n.canvas.clientWidth,n.canvas.clientHeight);this.drawBufferSize=Rn.clone(i),this.plantColorTexture=m(this,Tv,zv).call(this,n,n.RGBA,i,n.LINEAR,n.LINEAR,n.REPEAT,n.REPEAT),this.plantDepthTexture=m(this,Tv,zv).call(this,n,n.DEPTH_COMPONENT32F,i,n.NEAREST,n.NEAREST,n.REPEAT,n.REPEAT),this.plantFBO=Ar(n,[this.plantColorTexture],this.plantDepthTexture),this.deltaDepthColorTexture=m(this,Tv,zv).call(this,n,n.RGBA,i,n.LINEAR,n.LINEAR,n.REPEAT,n.REPEAT),this.deltaDepthFBO=Ar(n,[this.deltaDepthColorTexture]),this.hBlurTexture=m(this,Tv,zv).call(this,n,n.RGBA,i,n.LINEAR,n.LINEAR,n.REPEAT,n.REPEAT),this.vBlurTexture=m(this,Tv,zv).call(this,n,n.RGBA,i,n.LINEAR,n.LINEAR,n.REPEAT,n.REPEAT),this.hBlurFBO=Ar(n,[this.hBlurTexture]),this.vBlurFBO=Ar(n,[this.vBlurTexture]),this.control=new Dr(this.canvas),this.resize(),m(this,Pv,qv).call(this),this.camera.position[2]=this.camera.distance,m(this,Ov,Kv).call(this),m(this,Dv,Yv).call(this,n),m(this,mv,_v).call(this),this.oninit&&this.oninit(this)}function zv(t,e,n,r,i,a,o){var s=Vr(t,r,i,a,o);return t.bindTexture(t.TEXTURE_2D,s),e===t.RGBA?t.texImage2D(t.TEXTURE_2D,0,e,n[0],n[1],0,e,t.UNSIGNED_BYTE,null):e===t.DEPTH_COMPONENT32F?t.texImage2D(t.TEXTURE_2D,0,e,n[0],n[1],0,t.DEPTH_COMPONENT,t.FLOAT,null):e===t.RGBA16F&&t.texStorage2D(t.TEXTURE_2D,1,t.RGBA16F,n[0],n[1]),t.bindTexture(t.TEXTURE_2D,null),s}var Uv;function qv(){var t=this,e=this.gl;this.titleTexture=Vr(e,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);var n=new Image;n.width=2e3,n.addEventListener("load",(function(){e.bindTexture(e.TEXTURE_2D,t.titleTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.bindTexture(e.TEXTURE_2D,null)})),n.src=new URL(Uv)}function Wv(t){var e=Rn.fromValues(t.canvas.clientWidth,t.canvas.clientHeight);this.drawBufferSize=Rn.clone(e),m(this,Sv,Gv).call(this,t,this.plantColorTexture,t.RGBA,e),m(this,Sv,Gv).call(this,t,this.plantDepthTexture,t.DEPTH_COMPONENT32F,e),m(this,Sv,Gv).call(this,t,this.deltaDepthColorTexture,t.RGBA,e),m(this,Sv,Gv).call(this,t,this.hBlurTexture,t.RGBA,e),m(this,Sv,Gv).call(this,t,this.vBlurTexture,t.RGBA,e),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}function Gv(t,e,n,r){t.bindTexture(t.TEXTURE_2D,e),n===t.RGBA?t.texImage2D(t.TEXTURE_2D,0,n,r[0],r[1],0,n,t.UNSIGNED_BYTE,null):n===t.DEPTH_COMPONENT32F&&t.texImage2D(t.TEXTURE_2D,0,n,r[0],r[1],0,t.DEPTH_COMPONENT,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,null)}function Hv(t,e,n,r){for(var i=2*Math.PI/n,a=e/r,o=n*r*6,s=[],u=[],l=[],c=[],h=n+1,p=-e/2,v=0;v<=r;++v)for(var f=0;f<=n;++f){var d={x:t*Math.sin(i*f),y:p+a*v,z:t*Math.cos(i*f)},m={x:0,y:0,z:1};s.push(d.x,d.y,d.z),u.push(m.x,m.y,m.z),l.push(f/n,v/r)}for(var _=0;_<r;++_)for(var g=0;g<n;++g)c.push(_*h+g,(_+1)*h+g+1,_*h+g+1),c.push((_+1)*h+g+1,_*h+g,(_+1)*h+g);return{vertices:s,normals:u,uvs:l,indices:c,count:o}}function Kv(){z.targetTo(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),z.invert(this.drawUniforms.viewMatrix,this.camera.matrix),z.copy(this.drawUniforms.cameraMatrix,this.camera.matrix)}function Yv(t){var e=t.canvas.clientWidth/t.canvas.clientHeight;z.perspective(this.drawUniforms.projectionMatrix,Math.PI/4,e,this.camera.near,this.camera.far)}function _v(){if(this.pane){var t=this;this.fpsGraph=this.pane.addBlade({view:"fpsgraph",label:"fps",lineCount:1,maxValue:120,minValue:0}),this.pane.addInput(this,"animate",{label:"animate"});var e=this.pane.addFolder({title:"Camera"});m(this,Rv,Xv).call(this,e,this.camera,"near","near",1,200,null,(function(){return m(t,Dv,Yv).call(t,t.gl)})),m(this,Rv,Xv).call(this,e,this.camera,"far","far",1,200,null,(function(){return m(t,Dv,Yv).call(t,t.gl)}))}}function Xv(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7?arguments[7]:void 0,u=t.addBlade({view:"slider",label:r,min:i,max:a,step:o,value:e[n]});u.on("change",(function(t){e[n]=t.value,s&&s()}))}Uv=a("aNJCr").getBundleURL("7EiNB")+a("iE7OH").resolve("9VljA");var Zv,Qv,$v=window.location.search,Jv=null!==new URLSearchParams($v).get("debug");window.addEventListener("load",(function(){var t,e=document.body.querySelector("#c");Jv&&(t=new o.Pane({title:"Settings"})).registerPlugin(j),Zv=new Lv(e,t,(function(t){t.run()}))})),window.addEventListener("resize",(function(){Zv&&(Qv&&clearTimeout(Qv),Qv=setTimeout((function(){Qv=null,Zv.resize()}),300))}))}();
//# sourceMappingURL=index.0aae1cd6.js.map
